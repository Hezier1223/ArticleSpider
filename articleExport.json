[{"url_object_id": "32e96e54d49c6b94cfdf651cc3e61f7b", "title": "实战：图片上传组件开发", "url": "http://web.jobbole.com/93946/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/02/2b34e7e01b62709f1d456aecd6aa238a.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "1", "tags": "JavaScript,组件", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000013038300\">lskrat</a>   </div><div>\n<p><strong>温馨提示：这里除了一些幼稚的小组件啥也没有</strong><br>\n<strong>温馨提示-续：这是一个新的系列，写一些实际开发中遇到的一些常用的功能，想法笨拙，代码乱套</strong></p>\n<h1>写在前面</h1>\n<p>图片上传，作为web端一个常用的功能，在不同的项目中有不同的需求，在这里实现一个比价基本的上传图片插件，主要能实现图片的浏览，剪裁，上传这三个功能，同时也是为了让自己对图片／文件上传和HTML5中名声在外的<code>canvas</code>相关能够有一些了解</p>\n<h1>我就要自行车 – 需求整理</h1>\n<p>放眼WWW，一般的图片上传模块，主要就是实现了三个功能，图片的预览，图片的剪裁及预览，图片的上传，那我也就整这么一个吧，再细化一下需求</p>\n<h2>图片的预览</h2>\n<p><strong>用户使用：</strong>用户点击“选择图片”，弹出文件浏览器，可以选择本地的图片，点击确认后，所选图片会按照原始比例出现在页面的浏览区域中<br>\n<strong>组件调用：</strong>开发者可以自己定义图片预览区域的大小，并限定所传图片的文件大小和尺寸大小</p>\n<h2>图片的剪裁</h2>\n<p><strong>用户使用：</strong>用户根据提示，在预览区域的图片上拖动鼠标框出想要上传的图片区域，并且能在结果预览区域看到自己的剪裁结果<br>\n<strong>组件调用：</strong>开发者可以自定义是否剪裁图片，并可以定义是否限定剪裁图片的大小及比例，并且设定具体大小及比例</p>\n<h2>图片的上传</h2>\n<p><strong>用户使用：</strong>用户点击“图片上传”，图片开始上传，现实“上传中…”，完成后显示“上传完成”<br>\n<strong>组件调用：</strong>开发者得到base64格式的urlData图片，自己编写调用Ajax的函数及其回调函数</p>\n<h2>扔出原型图</h2>\n<p>作为设计师，扔图是我的最爱，画了一套全功能，包含剪裁及剪裁浏览的原型图</p>\n<p>state-1:初始状态<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/2b34e7e01b62709f1d456aecd6aa238a.jpg\"><img class=\"alignnone size-full wp-image-93960\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/2b34e7e01b62709f1d456aecd6aa238a.jpg\" alt=\"bV2p4X\"></a></p>\n<p>state-2:点击”选择图片”，浏览本地后载入图片<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/2c0935b47c72d991e9229eb5d5c615cb.jpg\"><img class=\"alignnone size-full wp-image-93959\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/2c0935b47c72d991e9229eb5d5c615cb.jpg\" alt=\"bV2p45\"></a></p>\n<p>state-3:剪裁，在图片区域上拖动鼠标选择要剪裁的部分，确认要上传的部分<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/27a6ebe8a55b7d43864cba7d24d47727.jpg\"><img class=\"alignnone size-full wp-image-93958\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/27a6ebe8a55b7d43864cba7d24d47727.jpg\" alt=\"bV2p5d\"></a></p>\n<h1>一次历史性的对话 – 本地图片读取</h1>\n<p>自打干上web开发这活，就都是在捣鼓浏览器内部这点事，从没想过跟浏览器之外计算机本地的一些文件能发生什么关系。但是该来的总要来，既然要上传图片，就肯定要从计算机本地来选择文件并在浏览器内打开，这历史性的对话就要这么开启了…</p>\n<h2>图片的选择</h2>\n<p>其实在HTML中的&lt;input&gt;<code></code>标签就提供了浏览本地文件的功能，前提是<code>type=\"file\"</code>，真是很讲道理… 试过就知道一点击就会打开文件浏览器</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233d87244890845\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;input id=\"inputArea\" type=\"file\"/&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233d87244890845-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233d87244890845-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">input </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"inputArea\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"file\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>但这么做有两个经典的问题：<br>\n第一，会有一个输入框傻乎乎的在那里…<br>\n第二，我用的是Ajax，怎么才能get到表单当中的文件呢</p>\n<p>对于问题一，很好解决直接各种方式hide这个input标签即可，再主动触发<code>click()</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233d94701862649\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar imgFrom = document.getElementById(\"inputArea\");\r\nfunction loadImg(){\r\n    imgFrom.click(); \r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233d94701862649-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233d94701862649-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233d94701862649-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233d94701862649-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233d94701862649-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">imgFrom</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementById</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"inputArea\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233d94701862649-2\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loadImg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233d94701862649-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">imgFrom</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233d94701862649-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>对于问题二，这就要介绍一下<code>FormData</code>对象了</p>\n<blockquote><p>XMLHttpRequest Level 2添加了一个新的接口FormData.利用FormData对象,我们可以通过JavaScript用一些键值对来模拟一系列表单控件,我们还可以使用XMLHttpRequest的send()方法来异步的提交这个”表单”.<strong>比起普通的ajax,使用FormData的最大优点就是我们可以异步上传一个二进制文件.</strong><br>\n<em>摘自<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FormData\">MDN Web docs – Web技术文档／Web API 接口／FormData</a></em></p></blockquote>\n<p>正如上面的文档所说<code>FormData</code>对象可以干的事无非就是用javascript模拟表单控件，也正因为如此所以可以在模拟的表单中放入一个文件</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233d99736112438\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar myFrom = new FormData();\r\nvar imageData = imgFrom.files[0];//获取表单中第一个文件\r\nmyFrom.append(\"image\",imageDate);//向表单中添加一个键值对\r\nconsole.log(myFrom.getAll(\"image\"));//获取表单中image字段对应的值，结果见下图</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233d99736112438-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233d99736112438-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233d99736112438-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233d99736112438-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233d99736112438-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">myFrom</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FormData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233d99736112438-2\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">imageData</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">imgFrom</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">files</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//获取表单中第一个文件</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233d99736112438-3\"><span class=\"crayon-v\">myFrom</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"image\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">imageDate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//向表单中添加一个键值对</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233d99736112438-4\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">myFrom</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getAll</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"image\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//获取表单中image字段对应的值，结果见下图</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/4464c75ed2aae5f2564c996216f1ef6c.png\"><img class=\"alignnone size-full wp-image-93957\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/4464c75ed2aae5f2564c996216f1ef6c.png\" alt=\"bV2twt\"></a><br>\n正如我们所见，文件我们已经通过Web拿到手了</p>\n<h2>图片的展现</h2>\n<p>既然是要上传图片，我们肯定得知道自己传的是啥图片啊，所以下一步就是如何把读取的图片展现在页面上了，正如上图中的显示，我的得到的图片是一个<code>File</code>对象，而<code>File</code>对象是特殊的<code>Blob</code>对象，那<code>Blob</code>对象又是个啥呢…</p>\n<blockquote><p>Blob 对象表示不可变的类似文件对象的原始数据。Blob表示不一定是JavaScript原生形式的数据。File 接口基于Blob，继承了 blob的功能并将其扩展使其支持用户系统上的文件。<br>\n<em>摘自<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob\">MDN Web docs – Web技术文档／Web API 接口／Blob</a></em></p></blockquote>\n<p>说实话，真是懵逼<br>\n但仔细理解下大概意思就是<code>Blob</code>对象是用来表示／承载文件对象的原始数据（二进制）的，借助一些博文会有助于理解<br>\n<a href=\"https://www.cnblogs.com/wangfajing/p/7202139.html?utm_source=itdadao&amp;utm_medium=referral\">js中关于Blob对象的介绍与使用 – 可乐Script</a><br>\n<a href=\"http://blog.csdn.net/zdy0_2004/article/details/52727250\">HTML5 Blob对象 – zdy0_2004</a><br>\n<strong>说到底，重点不在这，了解一下有个概念即可，重点在于我们怎么展示这个<code>File</code>对象</strong></p>\n<p>这就要请出<code>FileReader</code>对象了</p>\n<blockquote><p>FileReader 对象允许Web应用程序异步读取存储在用户计算机上的文件（或原始数据缓冲区）的内容，使用 File 或 Blob 对象指定要读取的文件或数据。<br>\n<em>摘自<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader\">MDN Web docs – Web技术文档／Web API 接口／FileReader</a></em></p></blockquote>\n<p>不难看出，<code>FileReader</code>对象就是用来读取本地文件的，而这其方法<code>readAsDataURL()</code>就是我们要用的东西啦</p>\n<blockquote><p>该方法会读取指定的 Blob 或 File 对象。读取操作完成的时候，readyState 会变成已完成（DONE），并触发 loadend 事件，同时 result 属性将包含一个data:URL格式的字符串（base64编码）以表示所读取文件的内容。<br>\n<em>摘自<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readAsDataURL\">MDN Web docs – Web技术文档／Web API 接口／FileReader／FileReader.readAsDataURL()</a></em></p></blockquote>\n<p>这里面又提到一个新名词<strong>data:URL</strong>，也就是说<code>readAsDataURL()</code>的作用就是能把文件转换为data:URL，不过这个data:URL又是什么呢，执行来看看</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233d9e585440321\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar reader = new FileReader(); //调用FileReader对象\r\nreader.readAsDataURL(imgData); //通过DataURL的方式返回图像\r\nreader.onload = function(e) {                \r\n    console.log(e.target.result);//看看你是个啥\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233d9e585440321-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233d9e585440321-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233d9e585440321-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233d9e585440321-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233d9e585440321-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233d9e585440321-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">reader</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FileReader</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//调用FileReader对象</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233d9e585440321-2\"><span class=\"crayon-v\">reader</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">readAsDataURL</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">imgData</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//通过DataURL的方式返回图像</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233d9e585440321-3\"><span class=\"crayon-v\">reader</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onload</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">                </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233d9e585440321-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//看看你是个啥</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233d9e585440321-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>控制台的结果全脸懵逼<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/206ec76aa1963ed12e6510b4c7aee3c3.png\"><img class=\"alignnone size-full wp-image-93956\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/206ec76aa1963ed12e6510b4c7aee3c3.png\" alt=\"bV2xer\"></a><br>\n可以通过这篇文章去大概了解一下<a href=\"https://www.cnblogs.com/xuechenlei/p/5940371.html\">DATA URL简介及DATA URL的利弊 – 薛陈磊</a></p>\n<p>说到底这dataURL我就粗略的理解它为<strong>URL形式的data</strong>，也就是说这段URL并不是与普通的URL一样指向某个地址，而是它本身就是数据，我们试着把这一堆字符粘到一个<code>&lt;img&gt;</code>的<code>src</code>属性中<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/b41e330214813a5c55ee3fccc928186e.png\"><img class=\"alignnone size-full wp-image-93955\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/b41e330214813a5c55ee3fccc928186e.png\" alt=\"bV2xdc\"></a></p>\n<p>终于看到了，结果正如所料，将这段包含了数据的URL赋给一个<code>&lt;img&gt;</code>确实可以让数据被展现为图片<br>\n至此，我们实现了本地文件的<strong>读取</strong>及<strong>展现</strong></p>\n<h1>指哪儿截哪儿 – 利用canvas的图片截取</h1>\n<p><strong>温馨提示-乱入：看明白这里需要对canvas有基本的了解<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial\">MDN Web docs – Web技术文档／Web API接口／Canvas／Canvas教程</a></strong></p>\n<p>在Web上对图像进行操作，没有比canvas相关技术更合适的了，所以本文用canvas技术来实现对图片的截取</p>\n<h2>canvas中的图片展现</h2>\n<p>在上文中，我们利用&lt;img&gt;<code></code>展现出了我们选择的图片，但是我们的图片截取功能可是要利用<code></code>来实现的，所以怎么在<code></code>中展现我们刚才获取的图片就是下一步要干的事情了</p>\n<p>canvas的API中自带<code>drawImage()</code>函数，其作用就是在<code></code>中渲染一张图片出来，其可以支持多种图片来源见<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/drawImage\">MDN Web docs – Web技术文档／Web API接口／CanvasRenderingContext2D／CanvasRenderingContext2D.drawImage()</a></p>\n<p>最简单的，我们直接把刚刚显示图片的那个&lt;img&gt;<code></code>传入是不是就可以呢</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233da3394152529\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar theCanvas = document.getElementById(\"imgCanvas\");\r\nvar canvasImg = theCanvas.getContext(\"2d\");//获取2D渲染背景\r\nvar img = document.getElementById(\"image\");\r\nimg.onload = function(){//确认图片已载入    \r\n    canvasImg.drawImage(img,0,0);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da3394152529-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da3394152529-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da3394152529-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da3394152529-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da3394152529-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da3394152529-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233da3394152529-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementById</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"imgCanvas\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da3394152529-2\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getContext</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2d\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//获取2D渲染背景</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233da3394152529-3\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">img</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementById</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"image\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da3394152529-4\"><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onload</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-c\">//确认图片已载入    </span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233da3394152529-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">drawImage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da3394152529-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>结果如下<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/d2be4ac4e3577b4f85836c98a73c9434.png\"><img class=\"alignnone size-full wp-image-93954\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/d2be4ac4e3577b4f85836c98a73c9434.png\" alt=\"bV2xqP\"></a><br>\n从图中看，左侧是之前的'&lt;img&gt;’，右侧是渲染了图片信息的&lt;canvas&gt;<code></code><br>\n这么看来虽然成功？在&lt;canvas&gt;<code></code>中渲染出了图片但是有两个明显的问题</p>\n<p>1.左边的'&lt;img&gt;’留着干啥？<br>\n2.右边看上去是不是有点不一样？</p>\n<p>这俩问题其实都好办，针对第一个问题，我们其实可以根本不用实体的'&lt;img&gt;’直接利用’Image’对象即可，第二个问题明显是因为<code></code>的大小与获取到的图片大小不一致所产生的，综合这两点，对代码进行进化！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233da7958894080\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar theCanvas = document.getElementById(\"imgCanvas\");\r\nvar canvasImg = theCanvas.getContext(\"2d\");\r\nvar img = new Image();//创建img对象\r\n\r\nreader.onload = function(e) {                \r\n    img.src = e.target.result;\r\n}\r\n \r\nimg.onload = function(){\r\n    theCanvas.Width = img.width;//将img对象的长款赋给canvas标签\r\n    theCanvas.height = img.height;    \r\n    canvasImg.drawImage(img,0,0);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da7958894080-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da7958894080-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da7958894080-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da7958894080-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da7958894080-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da7958894080-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da7958894080-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da7958894080-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da7958894080-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da7958894080-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da7958894080-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233da7958894080-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233da7958894080-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233da7958894080-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementById</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"imgCanvas\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da7958894080-2\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getContext</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2d\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233da7958894080-3\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">img</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Image</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//创建img对象</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da7958894080-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f233da7958894080-5\"><span class=\"crayon-v\">reader</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onload</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">                </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da7958894080-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">src</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233da7958894080-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da7958894080-8\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233da7958894080-9\"><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onload</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da7958894080-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Width</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//将img对象的长款赋给canvas标签</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233da7958894080-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233da7958894080-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">drawImage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233da7958894080-13\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/ff943290c35df880ba88007839b99553.png\"><img class=\"alignnone size-full wp-image-93953\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/ff943290c35df880ba88007839b99553.png\" alt=\"bV2xto\"></a></p>\n<p>结果与我们所期待的一样，至此我们成功的在'&lt;canvas&gt;’中展现了从本地获取的图片</p>\n<h2>canvas中图片的截取</h2>\n<p>其实截图，说白了就是在一个图像上，获取某个区域中的图像信息<br>\ncanvas作为专门用来处理图像及像素相关的一套API，获取区域中的相关图像信息可以说是再简单不过的事情，利用<code>getImageData()</code>函数即可 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData\">//详情</a>，当然我们不光要把图像信息获取到，最好还能展现出来我们的截图结果，这里就要用到与之相对的<code>putImageData()</code>函数 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/putImageData\">//详情</a></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233dab135945084\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar resultCanvas = document.getElementById(\"resultCanvas\");\r\nvar resultImg = resultCanvas.getContext(\"2d\");\r\nvar cutData = canvasImg.getImageData(100,100,200,200);\r\nresultImg.putImageData(cutData,0,0);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233dab135945084-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233dab135945084-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233dab135945084-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233dab135945084-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233dab135945084-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">resultCanvas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementById</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"resultCanvas\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233dab135945084-2\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">resultImg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">resultCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getContext</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2d\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233dab135945084-3\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cutData</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getImageData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233dab135945084-4\"><span class=\"crayon-v\">resultImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">putImageData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cutData</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>结果如图<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/05ea050eea3bfbab8db3967bc1887b15.png\"><img class=\"alignnone size-full wp-image-93952\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/05ea050eea3bfbab8db3967bc1887b15.png\" alt=\"bV2PIF\"></a></p>\n<h2>我也要画一个圈／框</h2>\n<p>既然这个工具是面向用户的，截图的过程肯定是要所见即所得的，在函数<code>getImageData()</code>中有4个参数，分别是截图起点的两个坐标和区域的宽度及高度，所以问题就变成了如何更合理的让用户输入这4个值。<br>\n其实现存的主流解决方案就做的非常好了：<strong>在图上拖动鼠标，拉出一个框，这个框内就是用户希望截取的区域。</strong></p>\n<p>在画布上画出一个框很简单，只需用到<code>strokeRect()</code>函数 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/strokeRect\">//详情</a><br>\n但是让用户自己拖出一个框就比较复杂了，先分析一下用户的一套动作都有什么</p>\n<ol>\n<li>用户选定起始点，点下鼠标左键</li>\n<li>用户选定截图区域的大小，保持鼠标左键不抬起，同时移动鼠标选择</li>\n<li>用户完成选择，抬起鼠标左键</li>\n</ol>\n<p>回过头再来看程序需要干什么</p>\n<ol>\n<li>获取起始点的坐标，并记录为已点击状态</li>\n<li>判断一下如果为已点击状态那么，获取每一次移动／帧的鼠标坐标，并计算出与起始点之间的横纵坐标距离，而这距离就是所画框的长度和宽度，清除上一帧的<strong>整个画面</strong>，再绘制一个新的图片再画一个新的框，同时按照框的起始坐标及宽高，截取图像信息，再清除预览区域的上一帧的画布，再将这一帧的图像信息载入</li>\n<li>鼠标抬起后，停止记录及绘制，保持最终一帧的框停留在画面上</li>\n</ol>\n<p>在这里，要说明一下，为什么非要清除整个画面不可，其实可以把通过<code>canvas.getContext(\"2d\")</code>获取到的<strong>2D 画布的渲染上下文</strong> <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCanvasElement/getContext\">//详情</a> 就当作一块画布，已经渲染出来的东西就已经留在了上面，无法再修改，如果想要更改画面上已经存在的元素的大小位置形状等等属性，那么在程序层面，就<strong>只能</strong>（个人理解，不一定对，如果有问题请一定跟我唠唠）把之前的画布清空再重新渲染。</p>\n<p>这个思路与我们之前端开发中动画相关的开发思路不同，并不是像之前那样直接操作现有元素属性就可以改变该元素在画面上的呈现结果的，而在这里其实更像是在现实生活中的动画制作原理就是</p>\n<p><strong>每一帧都需要重新绘制整张画面</strong></p>\n<p>而其实这是任何动画渲染方式的最底层思路与行为</p>\n<p>话说回来按照上文相关的开发思路，实现这个功能的代码如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233db0937775907\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar flag = false;//记录是否为点击状态的标记\r\nvar W = img.width;\r\nvar H = img.height;\r\nvar startX = 0;\r\nvar startY = 0;\r\n\r\n//当鼠标被按下\r\ntheCanvas.addEventListener(\"mousedown\", e =&gt; {\r\n    flag = true;//改变标记状态，置为点击状态\r\n    startX = e.clientX;//获得起始点横坐标\r\n    startY = e.clientY;//获得起始点纵坐标\r\n})\r\n\r\n//当鼠标在移动\r\ntheCanvas.addEventListener(\"mousemove\", e =&gt; {\r\n    if(flag){//判断鼠标是否被拖动\r\n        canvasImg.clearRect(0,0,W,H);//清空整个画面\r\n        canvasImg.drawImage(img,0,0);//重新绘制图片\r\n        canvasImg.strokeRect(startX, startY, e.clientX - startX, e.clientY - startY);//绘制黑框\r\n        resultImg.clearRect(0,0,cutData.width,cutData.height);//清空预览区域\r\n        cutData = canvasImg.getImageData(startX, startY, e.clientX - startX, e.clientY - startY);//截取黑框区域图片信息\r\n        resultImg.putImageData(cutData,0,0);//将图片信息赋给预览区域\r\n    }\r\n})\r\n\r\n//当鼠标左键抬起\r\ntheCanvas.addEventListener(\"mouseup\", e =&gt; {\r\n    flag = false;//将标志置为已抬起状态\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db0937775907-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db0937775907-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//记录是否为点击状态的标记</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-2\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">W</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-3\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-4\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startX</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-5\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-7\"><span class=\"crayon-c\">//当鼠标被按下</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-8\"><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"mousedown\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">flag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//改变标记状态，置为点击状态</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">startX</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientX</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//获得起始点横坐标</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">startY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientY</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//获得起始点纵坐标</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-12\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-14\"><span class=\"crayon-c\">//当鼠标在移动</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-15\"><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"mousemove\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-c\">//判断鼠标是否被拖动</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clearRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">W</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">H</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//清空整个画面</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">drawImage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//重新绘制图片</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strokeRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientX</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//绘制黑框</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">resultImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clearRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cutData</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cutData</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//清空预览区域</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cutData</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getImageData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientX</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//截取黑框区域图片信息</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">resultImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">putImageData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cutData</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//将图片信息赋给预览区域</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-24\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-26\"><span class=\"crayon-c\">//当鼠标左键抬起</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-27\"><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"mouseup\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db0937775907-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">flag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//将标志置为已抬起状态</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db0937775907-29\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0054 seconds] -->\r\n<p>结果如图<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/fa2ddd8a02d0d3e9236a4c2d9e397cc3.jpg\"><img class=\"alignnone size-full wp-image-93951\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/fa2ddd8a02d0d3e9236a4c2d9e397cc3.jpg\" alt=\"bV2QE3\"></a></p>\n<h2>能不能弄的高大上一点啊</h2>\n<p>主要吧，这个黑框太丑了，透露着一种原始和狂野，以及来自工科男审美的粗糙感…<br>\n能不能弄的好看点，起码让它看上去是一个工具不是一个实验</p>\n<p>我的想法是这样的，待被截取的图片上应该蒙上一层半透明白色遮罩，用户框选出的部分是没有遮罩的，这样效果可以为功能增加视觉上的材质感及舒适感，同时显得高端</p>\n<p>具体效果是这样的-下图来自ps<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/55a89ab3c431760cbc627c8ea628c041.jpg\"><img class=\"alignnone size-full wp-image-93950\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/55a89ab3c431760cbc627c8ea628c041.jpg\" alt=\"bV2QKA\"></a></p>\n<p>是不是稍微好些了</p>\n<p>可是，怎么实现？<br>\n简单来说，就是在原有的画布上再蒙半透明的一层画布，然后让这一层有一部分是没有的就可以实现了，总的来说就是蒙版和遮罩的思路，在canvas中也有相关的api，但是我愣是没看明白<br>\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing\">负责任的贴一个链接</a></p>\n<p>不过开发就是这样，条条大路出bug<br>\n我想到这个功能的瞬间脑子像抽了一样，出现了这么一种实现方法</p>\n<p>见下图<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/4a488688b1851d43d4a224d7bcd57437.jpg\"><img class=\"alignnone size-full wp-image-93949\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/4a488688b1851d43d4a224d7bcd57437.jpg\" alt=\"bV2Rpe\"></a><br>\nmask层可以分为A，B，C，D四个矩形区域，在图中两个蓝色的点是已知的（用户自己画出来的），在下层图片大小已知的前提下，这四个矩形区域的四个点都是可以计算出来的，从而其高度和宽度也可以计算出来，这样就可以利用这些数据画出一个半透明的矩形，将四个半透明矩形都画出来后，就能够实现之前设计出的效果了，具体代码如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233db5725715260\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntheCanvas.addEventListener(\"mousemove\", e =&gt; {\r\n    if(flag){\r\n        canvasImg.clearRect(0,0,W,H);\r\n        resultImg.clearRect(0,0,cutData.width,cutData.height);\r\n        canvasImg.drawImage(img,0,0);\r\n        canvasImg.fillStyle = 'rgba(255,255,255,0.6)';//设定为半透明的白色\r\n        canvasImg.fillRect(0, 0, e.clientX, startY);//矩形A\r\n        canvasImg.fillRect(e.clientX, 0, W, e.clientY);//矩形B\r\ncanvasImg.fillRect(startX, e.clientY, W-startX, H-e.clientY);//矩形C\r\n        canvasImg.fillRect(0, startY, startX, H-startY);//矩形D\r\n        cutData = canvasImg.getImageData(startX, startY, e.clientX - startX, e.clientY - startY);\r\n        resultImg.putImageData(cutData,0,0);\r\n    }\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db5725715260-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db5725715260-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db5725715260-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db5725715260-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db5725715260-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db5725715260-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db5725715260-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db5725715260-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db5725715260-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db5725715260-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db5725715260-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db5725715260-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db5725715260-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db5725715260-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233db5725715260-1\"><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"mousemove\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db5725715260-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">flag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db5725715260-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clearRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">W</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">H</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db5725715260-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">resultImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clearRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cutData</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">width</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cutData</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">height</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db5725715260-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">drawImage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">img</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db5725715260-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">fillStyle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'rgba(255,255,255,0.6)'</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//设定为半透明的白色</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db5725715260-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fillRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//矩形A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db5725715260-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fillRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">W</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientY</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//矩形B</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db5725715260-9\"><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fillRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientY</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">W</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">H</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientY</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//矩形C</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db5725715260-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fillRect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">H</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//矩形D</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db5725715260-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cutData</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvasImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getImageData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientX</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startX</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clientY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startY</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db5725715260-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">resultImg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">putImageData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cutData</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db5725715260-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db5725715260-14\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0042 seconds] -->\r\n<p>效果如图<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/02/e40cfe10e9cb7e8a712ef4c937df2abb.png\"><img class=\"alignnone size-full wp-image-93948\" src=\"http://jbcdn2.b0.upaiyun.com/2018/02/e40cfe10e9cb7e8a712ef4c937df2abb.png\" alt=\"bV2Rxg\"></a></p>\n<p><strong>没有什么把自己的脑残想法实现更爽的了</strong></p>\n<p>至此，截图的基本功能都实现了，但还差最后一步</p>\n<h1>另一次历史性的对话 – 图片上传</h1>\n<p>图片已经截出来了，下一步就是怎么上传了，通过Ajax上传，需要将图像数据转化为<code>File</code>，而在canvas的API中自带<code>toBlob()</code>函数 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCanvasElement/toBlob\">//详情</a></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f233db9086373324\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar resultFile = {}\r\ntheCanvas.addEventListener(\"mouseup\", e =&gt; {\r\n    resultCanvas.toBlob(blob =&gt; {\r\n            resultFile = blob;\r\n            console.log(blob);//Blob(1797) {size: 1797, type: \"image/png\"}\r\n        }\r\n    })\r\n    flag = false;\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db9086373324-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db9086373324-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db9086373324-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db9086373324-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db9086373324-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db9086373324-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db9086373324-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f233db9086373324-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f233db9086373324-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f233db9086373324-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">resultFile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db9086373324-2\"><span class=\"crayon-v\">theCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"mouseup\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db9086373324-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">resultCanvas</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toBlob</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">blob</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db9086373324-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">resultFile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">blob</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db9086373324-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">blob</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//Blob(1797) {size: 1797, type: \"image/png\"}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db9086373324-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db9086373324-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f233db9086373324-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">flag</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f233db9086373324-9\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>然后就可以用Ajax上传拉，具体怎么上传就需要具体问题具体分析了</p>\n<p>至此，整个插件的思路及需要用到相关技术都捋清楚了，接下来就可以开始按照上文的需求进行开发了，而这是下一篇文章要讲的事情了</p>\n<p><strong>能看到这的绝对很闲</strong><br>\n<strong>这篇文章的长度让我想起读研时被毕业论文统治的恐惧</strong><br>\n<strong>本来想着连同组件开发一起在一篇内写完呢，但是实在太长还是放弃了</strong><br>\n<strong>身体和家人都是最重要的，今年还没过一个月就被上了很多课</strong></p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93946\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93946votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93946\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "9ec1f91f9487502dff4ebc1e670fae6f", "title": "2017年 JavaScript 框架回顾 — React生态系统", "url": "http://web.jobbole.com/93822/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/783d3a6794357fb2813f2d296f62cd38.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,React", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.npmjs.com/npm/the-state-of-javascript-frameworks-2017-part-2-the-react-ecosystem\">Laurie Voss</a>   译文出处：<a target=\"_blank\" href=\"http://www.cnblogs.com/powertoolsteam/p/state-of-javascript-frameworks-2017-part-2.html\">葡萄城控件</a>   </div><div id=\"cnblogs_post_body\">\n<p><a href=\"http://www.cnblogs.com/powertoolsteam/p/state-of-javascript-frameworks-2017-part-1.html\" target=\"_blank\">前一篇文章</a>中，我们介绍了2017年 JavaScript 框架的整体情况。我们也了解到在众多的前端框架中，目前最为庞大又在快速增长的当属 React 了，本文就来重点介绍 React 的生态系统。<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/783d3a6794357fb2813f2d296f62cd38.png\"><img class=\"alignnone size-full wp-image-93843\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/783d3a6794357fb2813f2d296f62cd38.png\" alt=\"139239-20180123104211287-72656440\"></a></p>\n<p> </p>\n<p>首先看看与 React 有关的软件包的生态系统。在 Facebook 构建 React 之初，就有许多来自于开源社区第三方库的软件包。这些软件包使用 React 补充其它功能，以便提供完整的应用程序解决方案。当然，安装包中也存在着提供相似功能的彼此竞争关系。</p>\n<h1>React Router<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/5e531085ba1134ec0ef8656888036139.png\"><img class=\"alignnone size-full wp-image-93842\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/5e531085ba1134ec0ef8656888036139.png\" alt=\"139239-20180123104423662-1049330362\"></a></h1>\n<p> </p>\n<p>丰富的 Web 应用程序具有的一个共同特点就是：提供了多个“路由”。这些“路由”本质上是不同的功能块，在浏览器中表现为单独的 URL。React 不需要为简单的应用程序使用路由，同时在一些桌面和移动应用程序环境中，路由也不是必需的。因此，React Router 虽然是最受欢迎的 React 应用程序的路由解决方案，但 React Router 的相对流行程度却只有 React 的一半。</p>\n<p>了解 React 的开发者都知道，React 应用于一个明确定义的问题领域并具有明确定义的接口，这也使其本身可以应用于比原本设计的更广泛的应用领域。这种方式虽然增加了开发者使用 React 的 pool，但也进一步提升了 React，扩展了 React 的生态系统，创造了一个有益的循环。React 作为一个部分的解决方案，本质上是不如 Ember 和 Angular 这样的完整框架使用起来方便的。</p>\n<h1>Flux</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/997ebef807254a5541dd8a7929b405ae.png\"><img class=\"alignnone size-full wp-image-93841\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/997ebef807254a5541dd8a7929b405ae.png\" alt=\"139239-20180123104447787-1326614067\"></a></p>\n<p>React 作为一个非完整的解决方案，其中一个尚未解决的问题就是应用程序的数据层部分。当引入 React 时，Facebook 还推出了 Flux（一种管理应用程序中状态的方法）和 GraphQL（一种用于在客户端和服务器之间进行通信的系统）。这两者都不如 React 本身流行。</p>\n<p>Flux 在 React 之后不久就被推出了，但却直到2015年中期才得到普及。在这期间，Flux 与 React Router 一起呈同步上升趋势，这也表明 Flux 和 React Router 正在网络应用程序中配合使用。但是，2015年中期之后，Flux 和 React Router 的轨迹发生了很大的分化，Flux 在受欢迎程度上缓慢下滑。</p>\n<h1>Redux</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/07d3c140c4e86fe72bf6c93eb19cf50c.png\"><img class=\"alignnone size-full wp-image-93840\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/07d3c140c4e86fe72bf6c93eb19cf50c.png\" alt=\"139239-20180123104543928-786715091\"></a></p>\n<p>造成 Flux 受欢迎下降的一种原因是 Redux 的崛起。Redux 和 Flux 针对的是应用程序功能中完全相同的部分，Redux 于2015年中期正式推出，并且使用率迅速提高，而 Flux 则在同一时期开始逐渐下滑。Redux 现在几乎和 React Router 的相对流行程度相当，而且两者相互紧密相关，并且都越来越受欢迎。这也表明 Redux 已经取代 Flux 成为 React 网络应用程序中首选的状态管理系统。</p>\n<h1>MobX</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/cb381383b5d0ab39e3ea5e72c5487aed.png\"><img class=\"alignnone size-full wp-image-93838\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/cb381383b5d0ab39e3ea5e72c5487aed.png\" alt=\"139239-20180123104612600-491348449\"></a></p>\n<p>MobX 是2016年中期推出的，也是 Flux 和 Redux 的竞争对手。虽然 MobX 的使用率还不高，但是目前正在快速增长，值得关注。</p>\n<h1>RxJS</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/250382fe625d7af299c36b72013c84db.png\"><img class=\"alignnone size-full wp-image-93835\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/250382fe625d7af299c36b72013c84db.png\" alt=\"139239-20180123104651569-1362723666\"></a></p>\n<p>RxJS 是 Flux 和 Redux 的另一个竞争的状态管理组件。RxJS 的流行情况不好统计。首先，RxJS 有两个现存版本，一个是传统版本 rx，一个是当前版本 rxjs。这两个版本下载量都很大，其中 rx 下载量正在下降，而 rxjs 下载量正在增长。</p>\n<p>RxJS 的使用基本是作为其它项目子依赖的驱动，特别是对于 Angular CLI。这意味着所有使用 Angular 的驱动器，都需要使用相同的 RxJS。同时，RxJS 也被合并到其它一些流行的命令行工具中。</p>\n<h1>GraphQL</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/cee0bd3b1915027c4c643545a73ff733.png\"><img class=\"alignnone size-full wp-image-93833\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/cee0bd3b1915027c4c643545a73ff733.png\" alt=\"139239-20180123104708381-393947826\"></a></p>\n<p>GraphQL 与 React 是由 Facebook 同时开发的，但是这两者之间并没有内在的联系。GraphQL 是 Web 客户端查询服务器数据的一种方式。GraphQL 通过名为 Relay 和 Apollo 的两个竞争库得到了普及，Relay 和 Apollo 提供了一个 Web 应用程序，用于生成 GraphQL 和管理数据流。</p>\n<p>Relay 首先被发布，并且正在增长，但是半年后发布的 Apollo 却上升的更快，同时也越来越受到欢迎，并且增长速度还在明显加快。虽然 GraphQL 开发者使用量的绝对数还很小，但是 Apollo 的增长轨迹意味着 GraphQL 很值得开发者关注。</p>\n<h1>React生态系统概述</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/7cc5b354838b4b86910d74cfff8da732.png\"><img class=\"alignnone size-full wp-image-93832\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/7cc5b354838b4b86910d74cfff8da732.png\" alt=\"139239-20180123104732334-2031228441\"></a></p>\n<p>通过上图中 React 生态系统12个月的变化趋势，可以得到以下结论：</p>\n<ul>\n<li>Apollo 的使用率正在快速增长。</li>\n<li>Flux 的使用率正在下降。</li>\n<li>React Router 和 Redux 都非常受欢迎，并且在使用中具有紧密相关的联系。</li>\n<li>MobX 具有良好的增长，但其使用率还远没有到达 Redux。</li>\n<li>React 本身的生态系统是巨大的。</li>\n</ul>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93822\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93822votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93822\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "35681825c2652020972181f226875361", "title": "Javascript 调试命令——你只会 Console.log() ?", "url": "http://web.jobbole.com/93876/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/4a159c36ee3ebbb6ac7b64c233905d6b.png"], "praise_nums": "2", "comment_nums": "  评论", "fav_nums": "8", "tags": "JavaScript,Console", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000012957199\">徐大大</a>   </div><div>\n<blockquote><p>Console 对象提供对浏览器控制台的接入（如：Firefox 的 Web Console）。不同浏览器上它的工作方式是不一样的，但这里会介绍一些大都会提供的接口特性。<br>\nConsole对象可以在任何全局对象中访问，如 Window，WorkerGlobalScope 以及通过属性工作台提供的特殊定义。<br>\n它被浏览器定义为 Window.Console，也可被简单的 Console 调用。</p></blockquote>\n<p>最常用的方法就是<code>Console.log()</code>,就是在控制台输出内容。刚开始学前端的时候看到大家都是用的<code>Console.log()</code>,几乎没有见过<code>Console</code>的其他用法，难道<code>Console</code>真的没有别的用法了？查了一下后发现<code>Console</code>还是非常强大的，至于为什么很少看到有人用可能是因为用过都删掉了吧。在此记录一下<code>Console</code>的其他用法。</p>\n<p>注意：因为<strong>Console 对象提供对浏览器控制台的接入</strong> 所以在不同浏览器中的支持及表现形式可能不太一样，但是调试内容只有我们开发者会看，所以保证开发环境能用这些方法就可以了，下面演示全部都为<code>Chrome</code>上面的效果。</p>\n<h1>分类输出</h1>\n<p>不同类别信息的输出</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291a86856169159\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconsole.log('文字信息');\r\nconsole.info('提示信息');\r\nconsole.warn('警告信息');\r\nconsole.error('错误信息');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a86856169159-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a86856169159-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a86856169159-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a86856169159-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291a86856169159-1\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'文字信息'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a86856169159-2\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'提示信息'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a86856169159-3\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">warn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'警告信息'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a86856169159-4\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'错误信息'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/4a159c36ee3ebbb6ac7b64c233905d6b.png\"><img class=\"alignnone wp-image-93877 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/4a159c36ee3ebbb6ac7b64c233905d6b.png\" width=\"800\" height=\"92\"></a></p>\n<h1>分组输出</h1>\n<p>使用<code>Console.group()</code>和<code>Console.groupEnd()</code>包裹分组内容。</p>\n<p>还可以使用<code>Console.groupCollapsed()</code>来代替<code>Console.group()</code>生成折叠的分组。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291a90675037411\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconsole.group('第一个组');\r\n    console.log(\"1-1\");\r\n    console.log(\"1-2\");\r\n    console.log(\"1-3\");\r\nconsole.groupEnd();\r\n\r\nconsole.group('第二个组');\r\n    console.log(\"2-1\");\r\n    console.log(\"2-2\");\r\n    console.log(\"2-3\");\r\nconsole.groupEnd();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a90675037411-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a90675037411-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a90675037411-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a90675037411-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a90675037411-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a90675037411-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a90675037411-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a90675037411-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a90675037411-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a90675037411-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a90675037411-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291a90675037411-1\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">group</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'第一个组'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a90675037411-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"1-1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a90675037411-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"1-2\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a90675037411-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"1-3\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a90675037411-5\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a90675037411-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a90675037411-7\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">group</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'第二个组'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a90675037411-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2-1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a90675037411-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2-2\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a90675037411-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2-3\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a90675037411-11\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/fca89a083579bbf73de40db04457c295.png\"><img class=\"alignnone size-full wp-image-93893\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/fca89a083579bbf73de40db04457c295.png\" alt=\"1460000012957209\"></a></p>\n<p><code>Console.group()</code>还可以嵌套使用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291a94124384608\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconsole.group('第一个组');\r\n    console.group(\"1-1\");\r\n        console.group(\"1-1-1\");\r\n            console.log('内容');\r\n        console.groupEnd();\r\n    console.groupEnd();\r\n    console.group(\"1-2\");\r\n        console.log('内容');\r\n        console.log('内容');\r\n        console.log('内容');\r\n    console.groupEnd();\r\nconsole.groupEnd();\r\n\r\nconsole.groupCollapsed('第二个组');\r\n    console.group(\"2-1\");\r\n    console.groupEnd();\r\n    console.group(\"2-2\");\r\n    console.groupEnd();\r\nconsole.groupEnd();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a94124384608-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a94124384608-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-1\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">group</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'第一个组'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">group</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"1-1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">group</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"1-1-1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'内容'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">group</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"1-2\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'内容'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'内容'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'内容'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-12\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-14\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupCollapsed</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'第二个组'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">group</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2-1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">group</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2-2\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a94124384608-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a94124384608-19\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/07f01e873a2758b62f74f5e8d129e2d6.png\"><img class=\"alignnone size-full wp-image-93889\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/07f01e873a2758b62f74f5e8d129e2d6.png\" alt=\"1460000012957210\"></a></p>\n<h1>表格输出</h1>\n<p>使用<code>console.table()</code>可以将传入的对象，或数组以表格形式输出。适合排列整齐的元素</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291a98422772115\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar Obj = {\r\n    Obj1: {\r\n        a: \"aaa\",\r\n        b: \"bbb\",\r\n        c: \"ccc\"\r\n    },\r\n    Obj2: {\r\n        a: \"aaa\",\r\n        b: \"bbb\",\r\n        c: \"ccc\"\r\n    },\r\n    Obj3: {\r\n        a: \"aaa\",\r\n        b: \"bbb\",\r\n        c: \"ccc\"\r\n    },\r\n    Obj4: {\r\n        a: \"aaa\",\r\n        b: \"bbb\",\r\n        c: \"ccc\"\r\n    }\r\n}\r\n\r\nconsole.table(Obj);\r\n\r\nvar Arr = [\r\n    [\"aa\",\"bb\",\"cc\"],\r\n    [\"dd\",\"ee\",\"ff\"],\r\n    [\"gg\",\"hh\",\"ii\"],\r\n]\r\n\r\nconsole.table(Arr);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a98422772115-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a98422772115-32\">32</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Obj</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Obj1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"aaa\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"bbb\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ccc\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Obj2</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"aaa\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"bbb\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ccc\"</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Obj3</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"aaa\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"bbb\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ccc\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Obj4</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"aaa\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"bbb\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ccc\"</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-22\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-24\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">table</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Obj</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-26\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Arr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"aa\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"bb\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"cc\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"dd\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"ee\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"ff\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"gg\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"hh\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"ii\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-30\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a98422772115-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a98422772115-32\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">table</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Arr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/cdc6fa1b1a5a572483408fa0f17d013a.png\"><img class=\"alignnone size-full wp-image-93887\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/cdc6fa1b1a5a572483408fa0f17d013a.png\" alt=\"1460000012957211\"></a></p>\n<h1>查看对象</h1>\n<p>使用<code>Console.dir()</code>显示一个对象的所有属性和方法<br>\n在Chrome中<code>Console.dir()</code>和<code>Console.log()</code>效果相同</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291a9c426518731\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar CodeDeer = {\r\n    nema: 'CodeDeer',\r\n    blog: 'www.xluos.com',\r\n        \r\n}\r\nconsole.log(\"console.dir(CodeDeer)\");\r\nconsole.dir(CodeDeer);\r\n\r\nconsole.log(\"console.log(CodeDeer)\");\r\nconsole.log(CodeDeer);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a9c426518731-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a9c426518731-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a9c426518731-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a9c426518731-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a9c426518731-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a9c426518731-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a9c426518731-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a9c426518731-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291a9c426518731-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291a9c426518731-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291a9c426518731-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CodeDeer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a9c426518731-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">nema</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'CodeDeer'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a9c426518731-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">blog</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'www.xluos.com'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a9c426518731-4\"><span class=\"crayon-h\">        </span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a9c426518731-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a9c426518731-6\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"console.dir(CodeDeer)\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a9c426518731-7\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dir</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">CodeDeer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a9c426518731-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f291a9c426518731-9\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"console.log(CodeDeer)\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291a9c426518731-10\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">CodeDeer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/cf60a824288a810cc9b9841d9d4f45d9.png\"><img class=\"alignnone size-full wp-image-93886\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/cf60a824288a810cc9b9841d9d4f45d9.png\" alt=\"1460000012957212\"></a></p>\n<h1>查看节点</h1>\n<p>使用<code>Console.dirxml()</code>显示一个对象的所有属性和方法<br>\n在Chrome中<code>Console.dirxml()</code>和<code>Console.log()</code>效果相同</p>\n<p>百度首页logo的节点信息<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/b054ef1ab95bd8717a1a2e2456253df7.png\"><img class=\"alignnone size-full wp-image-93885\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/b054ef1ab95bd8717a1a2e2456253df7.png\" alt=\"1460000012957213\"></a></p>\n<h1>条件输出</h1>\n<p>利用<code>console.assert()</code>,可以进行条件输出。</p>\n<ul>\n<li>当第一个参数或返回值为真时，不输出内容</li>\n<li>当第一个参数或返回值为假时，输出后面的内容并抛出异常</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291aa0856693966\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconsole.assert(true, \"你永远看不见我\");\r\nconsole.assert((function() { return true;})(), \"你永远看不见我\");\r\n\r\nconsole.assert(false, \"你看得见我\");\r\nconsole.assert((function() { return false;})(), \"你看得见我\");</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa0856693966-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa0856693966-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa0856693966-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa0856693966-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa0856693966-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa0856693966-1\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">assert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"你永远看不见我\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa0856693966-2\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">assert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"你永远看不见我\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa0856693966-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa0856693966-4\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">assert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"你看得见我\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa0856693966-5\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">assert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"你看得见我\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/e303bd751f6d66abc20f35b2f9aec60f.png\"><img class=\"alignnone size-full wp-image-93884\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/e303bd751f6d66abc20f35b2f9aec60f.png\" alt=\"1460000012957214\"></a></p>\n<h1>计次输出</h1>\n<p>使用<code>Console.count()</code>输出内容和被调用的次数</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291aa4611773454\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n(function () {\r\n    for(var i = 0; i &lt; 3; i++){\r\n        console.count(\"运行次数：\");\r\n    }\r\n})()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa4611773454-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa4611773454-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa4611773454-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa4611773454-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa4611773454-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa4611773454-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa4611773454-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa4611773454-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"运行次数：\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa4611773454-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa4611773454-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/0d7975005c6ef301273e5a3703addb49.png\"><img class=\"alignnone size-full wp-image-93883\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/0d7975005c6ef301273e5a3703addb49.png\" alt=\"1460000012957215\"></a></p>\n<h1>追踪调用堆栈</h1>\n<p>使用<code>Console.trace()</code>来追踪函数被调用的过程，在复杂项目时调用过程非常多，用这个命令来帮你缕清。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291aa7389761062\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction add(a, b) {\r\n    console.trace(\"Add function\");\r\n    return a + b;\r\n}\r\n\r\nfunction add3(a, b) {\r\n    return add2(a, b);\r\n}\r\n\r\nfunction add2(a, b) {\r\n    return add1(a, b);\r\n}\r\n\r\nfunction add1(a, b) {\r\n    return add(a, b);\r\n}\r\n\r\nvar x = add3(1, 1);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aa7389761062-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aa7389761062-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">trace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Add function\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-6\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add3</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add2</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-10\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add2</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-12\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-14\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add1</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-16\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aa7389761062-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aa7389761062-18\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add3</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/3b1847dbfa2a1f0db0c27c57e05ac995.png\"><img class=\"alignnone size-full wp-image-93882\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/3b1847dbfa2a1f0db0c27c57e05ac995.png\" alt=\"1460000012957216\"></a></p>\n<h1>计时功能</h1>\n<p>使用<code>Console.time()</code>和<code>Console.timeEnd()</code>包裹需要计时的代码片段，输出运行这段代码的事件。</p>\n<ul>\n<li><code>Console.time()</code>中的参数作为计时器的标识，具有唯一性。</li>\n<li><code>Console.timeEnd()</code>中的参数来结束此标识的计时器，并以毫秒为单位返回运行时间。</li>\n<li>最多同时运行10000个计时器。</li>\n<li>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291aab804945861\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconsole.time(\"Chrome中循环1000次的时间\");\r\nfor(var i = 0; i &lt; 1000; i++)\r\n{\r\n\r\n}\r\nconsole.timeEnd(\"Chrome中循环1000次的时间\");</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aab804945861-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aab804945861-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aab804945861-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aab804945861-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aab804945861-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aab804945861-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291aab804945861-1\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">time</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Chrome中循环1000次的时间\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aab804945861-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aab804945861-3\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aab804945861-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f291aab804945861-5\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aab804945861-6\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">timeEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Chrome中循环1000次的时间\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</li>\n</ul>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/33b87f99602ab596ce54c233322af906.png\"><img class=\"alignnone size-full wp-image-93881\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/33b87f99602ab596ce54c233322af906.png\" alt=\"1460000012957217\"></a></p>\n<h1>性能分析</h1>\n<p>使用<code>Console.profile()</code>和<code>Console.profile()</code>进行性能分析，查看代码各部分运行消耗的时间，但是我在Chrome自带的调试工具中并没有找到在哪里查看这两个方法生成的分析报告。应该需要其他的调试工具。</p>\n<p>具体参考这里：<br>\n<a href=\"http://www.oschina.net/translate/performance-optimisation-with-timeline-profiles\">http://www.oschina.net/transl…</a></p>\n<h1>有趣的Console.log()</h1>\n<p>最后再来介绍一下强大的<code>Console.log()</code>,这个方法有很多的用法（其他输出方法的用法，如error()等，可以参照log()使用）。</p>\n<h2>一、提示输出</h2>\n<p>可以再输出的对象、变量前加上提示信息，增加辨识度</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291aaf920762464\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar ans = 12345;\r\nconsole.log(\"这是临时变量ans的值：\",ans);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291aaf920762464-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291aaf920762464-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291aaf920762464-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ans</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12345</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291aaf920762464-2\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"这是临时变量ans的值：\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">ans</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/bfdba2a798f49638c2b8babf3d5ac000.png\"><img class=\"alignnone size-full wp-image-93880\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/bfdba2a798f49638c2b8babf3d5ac000.png\" alt=\"1460000012957218\"></a></p>\n<h2>二、格式化输出</h2>\n<table>\n<thead>\n<tr>\n<th>占位符</th>\n<th>含义</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>%s</td>\n<td>字符串输出</td>\n</tr>\n<tr>\n<td>%d or %i</td>\n<td>整数输出</td>\n</tr>\n<tr>\n<td>%f</td>\n<td>浮点数输出</td>\n</tr>\n<tr>\n<td>%o</td>\n<td>打印javascript对象，可以是整数、字符串以及JSON数据</td>\n</tr>\n</tbody>\n</table>\n<p>样例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291ab2449979763\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar arr = [\"小明\", \"小红\"];\r\n\r\nconsole.log(\"欢迎%s和%s两位新同学\",arr[0],arr[1]);\r\n\r\nconsole.log(\"圆周率整数部分：%d，带上小数是：%f\",3.1415,3.1415);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291ab2449979763-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291ab2449979763-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291ab2449979763-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291ab2449979763-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291ab2449979763-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291ab2449979763-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"小明\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"小红\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291ab2449979763-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f291ab2449979763-3\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"欢迎%s和%s两位新同学\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">arr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">arr</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291ab2449979763-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f291ab2449979763-5\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"圆周率整数部分：%d，带上小数是：%f\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3.1415</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3.1415</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/5a6e28f58793cd4c498b79234dae1196.png\"><img class=\"alignnone size-full wp-image-93879\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/5a6e28f58793cd4c498b79234dae1196.png\" alt=\"1460000012957219\"></a></p>\n<h2>三、自定义样式</h2>\n<p>使用<code>%c</code>为打印内容定义样式,再输出信息前加上<code>%c</code>，后面写上标准的css样式，就可以为输出的信息添加样式了</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f291ab6204343322\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconsole.log(\"%cMy stylish message\", \"color: red; font-style: italic\");\r\n\r\nconsole.log(\"%c3D Text\", \" text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:5em\");\r\n\r\nconsole.log('%cRainbow Text ', 'background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:5em;');\r\n\r\nconsole.log('%cMy name is classicemi.', 'color: #fff; background: #f40; font-size: 24px;');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291ab6204343322-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291ab6204343322-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291ab6204343322-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291ab6204343322-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291ab6204343322-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f291ab6204343322-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f291ab6204343322-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f291ab6204343322-1\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%cMy stylish message\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"color: red; font-style: italic\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291ab6204343322-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f291ab6204343322-3\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%c3D Text\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\" text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:5em\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291ab6204343322-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f291ab6204343322-5\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'%cRainbow Text '</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:5em;'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f291ab6204343322-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f291ab6204343322-7\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'%cMy name is classicemi.'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'color: #fff; background: #f40; font-size: 24px;'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/f1a4b0c28dcf197dd9e8065db010600b.png\"><img class=\"alignnone size-full wp-image-93878\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/f1a4b0c28dcf197dd9e8065db010600b.png\" alt=\"1460000012957220\"></a></p>\n<h1>总结</h1>\n<p>Console的用法很多，有些再调试过程中非常实用，可以节省很多时间。当然我知道debug还是用断点调试的方法比较好，但是小问题用“printf大法”也是很好用的（滑稽脸）。</p>\n<h1>参考资料</h1>\n<blockquote>\n<ol>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Console\">https://developer.mozilla.org…</a></li>\n<li><a href=\"http://www.jb51.net/article/56504.htm\">http://www.jb51.net/article/5…</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000000481884\">https://segmentfault.com/a/11…</a></li>\n<li><a href=\"https://www.cnblogs.com/liyunhua/p/4529079.html#_label18\">https://www.cnblogs.com/liyun…</a></li>\n</ol>\n</blockquote>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93876\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93876votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93876\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 8 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "0be9519e4e07fbf970de2cb6057e0f89", "title": "(a ==1 && a== 2 && a==3) 有可能是 true 吗？", "url": "http://web.jobbole.com/93874/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/12/53877d4eaa0cade13f69c80d4547bcd0.png"], "praise_nums": "3", "comment_nums": "1", "fav_nums": "1", "tags": "JavaScript,运算符", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://stackoverflow.com/questions/48270127/can-a-1-a-2-a-3-ever-evaluate-to-true\">Dimpu Aravind Buddha</a>   译文出处：<a target=\"_blank\" href=\"http://elevenbeans.github.io/2018/01/23/nothing-is-impossible-for-javascript/\">elevenbeans</a>   </div><h2>一个有趣的问题：</h2>\n<p><strong>在 JavaScript 中， <code>(a ==1 &amp;&amp; a== 2 &amp;&amp; a==3)</code> 是否有可能为 <code>true</code> ？</strong></p>\n<p>这是一道我被某科技公司问到的面试题。发生在两周之前，我仍然在努力寻找答案。</p>\n<p>我知道我们从来不会在日常工作中写出这样的代码，但我对问题的答案仍然十分很好奇。</p>\n<h2 id=\"解法一：\">解法一：</h2>\n<p>利用松散相等运算符 <code>==</code> 的工作原理，你可以简单地创建一个带有自定义<code>toString</code>( 或者 <code>valueOf</code>)函数的对象，在每一次使用它时候改变它所的返回值，使其满足所有三个条件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e8a185bea968093334\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconst a = {\r\n  i: 1,\r\n  toString: function () {\r\n    return a.i++;\r\n  }\r\n}\r\nif(a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) {\r\n  console.log('Hello World!');\r\n}\r\n// Hello World!</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bea968093334-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bea968093334-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bea968093334-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bea968093334-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bea968093334-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bea968093334-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bea968093334-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bea968093334-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bea968093334-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bea968093334-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e8a185bea968093334-1\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bea968093334-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185bea968093334-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">toString</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bea968093334-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185bea968093334-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bea968093334-6\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185bea968093334-7\"><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bea968093334-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Hello World!'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185bea968093334-9\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bea968093334-10\"><span class=\"crayon-c\">// Hello World!</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>&gt;之所以会得到如此结果，是由于表达式中使用了松散相等的运算符 <code>==</code>。使用松散相等时，如果其中一个操作数与另一个类型不同，则 JS 引擎将尝试将一个操作转换为另一个类型。在左边对象、右边的数字的情况下，它会尝试将对象转换为一个数，首先通过调用 <code>valueOf</code> 如果是可调用的。否则，它会调用<code>toString</code>方法。我使用<code>toString</code>仅仅是因为它是我的第一反应，<code>valueOf</code> 会更合理。如果我不从<code>toString</code>返回一个字符串（而是返回数字），JS 引擎会尝试将字符串转换为一个数字，虽然有一个稍长的路径，但它仍然会给我们同样的结果。</p>\n<h2 id=\"解法二：\">解法二：</h2>\n<p>我不可否认——其他答案无疑是正确的，但你真的不能过错下面的代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e8a185bf5660275519\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar aﾠ = 1;\r\nvar a = 2;\r\nvar ﾠa = 3;\r\nif(aﾠ==1 &amp;&amp; a== 2 &amp;&amp;ﾠa==3) {\r\n    console.log(\"Why hello there!\")\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bf5660275519-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bf5660275519-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bf5660275519-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bf5660275519-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bf5660275519-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bf5660275519-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e8a185bf5660275519-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span>ﾠ<span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bf5660275519-2\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185bf5660275519-3\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span>ﾠ<span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bf5660275519-4\"><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">a</span>ﾠ<span class=\"crayon-o\">==</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span>ﾠ<span class=\"crayon-v\">a</span><span class=\"crayon-o\">==</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185bf5660275519-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Why hello there!\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bf5660275519-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>请注意<code>if</code> 语句中的奇怪间距。它是半宽度韩文=,=。这是一个 Unicode 空格字符，但是 ECMAScript 不将其解释为一个空格 —— 这意味着它是一个有效的标识符。因此有三个完全不同的变量，一个是<code>a</code>后加半宽度韩文，一个是<code>a</code>， 一个是<code>a</code>前加半宽度韩文。。。</p>\n<p>用下划线 <code>_</code> 替代半宽度韩文，增加可读性，相同的代码看起来像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e8a185bfc406994366\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar a_ = 1;\r\nvar a = 2;\r\nvar _a = 3;\r\nif(a_==1 &amp;&amp; a== 2 &amp;&amp;_a==3) {\r\n    console.log(\"Why hello there!\")\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bfc406994366-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bfc406994366-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bfc406994366-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bfc406994366-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185bfc406994366-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185bfc406994366-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e8a185bfc406994366-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a_</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bfc406994366-2\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185bfc406994366-3\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bfc406994366-4\"><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a_</span><span class=\"crayon-o\">==</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-v\">_a</span><span class=\"crayon-o\">==</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185bfc406994366-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Why hello there!\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185bfc406994366-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h2 id=\"解法三：\">解法三：</h2>\n<p>这是完全可能的！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e8a185c00082607110\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvar val = 0;\r\nObject.defineProperty(window, 'a', {\r\n  get: function() {\r\n    return ++val;\r\n  }\r\n});\r\nif (a == 1 &amp;&amp; a == 2 &amp;&amp; a == 3) {\r\n  console.log('yay');\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185c00082607110-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185c00082607110-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185c00082607110-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185c00082607110-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185c00082607110-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185c00082607110-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185c00082607110-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e8a185c00082607110-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74e8a185c00082607110-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e8a185c00082607110-1\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185c00082607110-2\"><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">defineProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">window</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185c00082607110-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185c00082607110-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185c00082607110-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185c00082607110-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185c00082607110-7\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e8a185c00082607110-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'yay'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e8a185c00082607110-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>使用一个<code>get</code>，让 <code>a</code> 的返回值为三个不同的值。然而这并不意味着我们应该在真正的代码中使用。。。</p>\n<h2 id=\"And-so-on-…\">And so on …</h2>\n<h2 id=\"总结\">总结</h2>\n<h3 id=\"1-利用松散相等运算符-的原理，自定义-toString-和-valueOf-返回对应值\">1. 利用松散相等运算符 <code>==</code> 的原理，自定义 <code>toString</code> 和 <code>valueOf</code> 返回对应值</h3>\n<h3 id=\"2-利用半宽度韩文等特殊字符，玩“障眼法”，本质上其实并没有做到题设\">2. 利用半宽度韩文等特殊字符，玩“障眼法”，本质上其实并没有做到题设</h3>\n<h3 id=\"3-劫持-JS-对象的-getter，不过这种方式对于严格相等-同样有效\">3. 劫持 JS 对象的 <code>getter</code>，不过这种方式对于严格相等 <code>===</code> 同样有效</h3>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93874\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93874votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93874\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "864d3a58771e75ebf09b5a4c05925647", "title": "H5游戏开发：套圈圈", "url": "http://web.jobbole.com/93870/", "create_date": "2018-02-03", "front_image_url": ["//misc.aotu.io/Chen-jj/waterful_1.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "HTML5,游戏", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://aotu.io/notes/2018/01/04/waterful/\">凹凸实验室</a>   </div><div>\n<p> </p>\n<h1 id=\"前言\">前言</h1>\n<p>虽然本文标题为介绍一个水压套圈h5游戏，但是窃以为仅仅如此对读者是没什么帮助的，毕竟读者们的工作生活很少会再写一个类似的游戏，更多的是面对需求的挑战。我更希望能举一反三，给大家在编写h5游戏上带来一些启发，无论是从整体流程的把控，对游戏框架、物理引擎的熟悉程度还是在某一个小难点上的思路突破等。因此本文将很少详细列举实现代码，取而代之的是以伪代码展现思路为主。</p>\n<p>游戏 demo 地址：<a href=\"http://jdc.jd.com/fd/demo/waterful/game.html\" target=\"_blank\" rel=\"external\">http://jdc.jd.com/fd/demo/waterful/game.html</a></p>\n<h4 id=\"希望能给诸位读者带来的启发\">希望能给诸位读者带来的启发</h4>\n<ol>\n<li>技术选型</li>\n<li>整体代码布局</li>\n<li>难点及解决思路</li>\n<li>优化点</li>\n</ol>\n<h1 id=\"技术选型\">技术选型</h1>\n<p>一个项目用什么技术来实现，权衡的因素有许多。其中时间是必须优先考虑的，毕竟效果可以减，但上线时间是死的。</p>\n<p>本项目预研时间一周，真正排期时间只有两周。虽然由项目特点来看比较适合走 3D 方案，但时间明显是不够的。最后保守起见，决定采用 2D 方案尽量逼近真实立体的游戏效果。</p>\n<p>从游戏复杂度来考虑，无须用到 Egret 或 Cocos 这些“牛刀”，而轻量、易上手、团队内部也有深厚沉淀的 <a href=\"https://createjs.com/\" target=\"_blank\" rel=\"external\">CreateJS</a> 则成为了渲染框架的首选。</p>\n<p>另外需要考虑的是是否需要引入物理引擎，这点需要从游戏的特点去考虑。本游戏涉及重力、碰撞、施力等因素，引入物理引擎对开发效率的提高要大于学习使用物理引擎的成本。因此权衡再三，我引入了同事们已经玩得挺溜的 <a href=\"http://brm.io/matter-js/\" target=\"_blank\" rel=\"external\">Matter.js</a>。（ Matter.js 文档清晰、案例丰富，是切入学习 web 游戏引擎的一个不错的框架）</p>\n<h1 id=\"整体代码布局\">整体代码布局</h1>\n<p>在代码组织上，我选择了面向对象的手法，对整个游戏做一个封装，抛出一些控制接口给其他逻辑层调用。</p>\n<p>伪代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b4b962324726\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;!-- index.html --&gt;\r\n&lt;!-- 游戏入口 canvas --&gt;\r\n&lt;canvas id=\"waterfulGameCanvas\" width=\"660\" height=\"570\"&gt;&lt;/canvas&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b4b962324726-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b4b962324726-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b4b962324726-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b4b962324726-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">html</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b4b962324726-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span>游戏入口<span class=\"crayon-h\"> </span><span class=\"crayon-v\">canvas</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b4b962324726-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">canvas </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"waterfulGameCanvas\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">width</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"660\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">height</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"570\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">canvas</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b56569184902\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// game.js\r\n/**\r\n * 游戏对象\r\n */\r\nclass Waterful {\r\n  // 初始化函数\r\n  init () {}\r\n  \r\n  // CreateJS Tick，游戏操作等事件的绑定放到游戏对象内\r\n  eventBinding () {}\r\n  \r\n  // 暴露的一些方法\r\n  score () {}\r\n  \r\n  restart () {}\r\n  \r\n  pause () {}\r\n  \r\n  resume () {}\r\n  \r\n  // 技能\r\n  skillX () {}\r\n}\r\n/**\r\n * 环对象\r\n */\r\nclass Ring {\r\n  // 于每一个 CreateJS Tick 都调用环自身的 update 函数\r\n  update () {}\r\n  \r\n  // 进针后的逻辑\r\n  afterCollision () {}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b56569184902-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b56569184902-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-1\"><span class=\"crayon-c\">// game.js</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-2\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-3\"><span class=\"crayon-c\"> * 游戏对象</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-4\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-5\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Waterful</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 初始化函数</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">init</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-8\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// CreateJS Tick，游戏操作等事件的绑定放到游戏对象内</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">eventBinding</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-11\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 暴露的一些方法</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">score</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-14\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">restart</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-16\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">pause</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-18\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-19\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">resume</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-20\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 技能</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">skillX</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-23\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-24\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-25\"><span class=\"crayon-c\"> * 环对象</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-26\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-27\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Ring</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-28\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 于每一个 CreateJS Tick 都调用环自身的 update 函数</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-29\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">update</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-30\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-31\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 进针后的逻辑</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b56569184902-32\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">afterCollision</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b56569184902-33\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b5a473212363\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// main.js\r\n// 根据业务逻辑初始化游戏，调用游戏的各种接口\r\nconst waterful = new Waterful()\r\nwaterful.init({...})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b5a473212363-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b5a473212363-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b5a473212363-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b5a473212363-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b5a473212363-1\"><span class=\"crayon-c\">// main.js</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b5a473212363-2\"><span class=\"crayon-c\">// 根据业务逻辑初始化游戏，调用游戏的各种接口</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b5a473212363-3\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">waterful</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Waterful</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b5a473212363-4\"><span class=\"crayon-v\">waterful</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h1 id=\"初始化\">初始化</h1>\n<p>游戏的初始化接口主要做了4件事情：</p>\n<ol>\n<li>参数初始化</li>\n<li>CreateJS 显示元素（display object）的布局</li>\n<li>Matter.js 刚体（rigid body）的布局</li>\n<li>事件的绑定</li>\n</ol>\n<p>下面主要聊聊游戏场景里各种元素的创建与布局，即第二、第三点。</p>\n<h3 id=\"一、CreateJS-结合-Matter-js\">一、CreateJS 结合 Matter.js</h3>\n<p>阅读 Matter.js 的 demo 案例，都是用其自带的渲染引擎 Matter.Render。但是由于某些原因（后面会说到），我们需要使用 CreateJS 去渲染每个环的贴图。</p>\n<p>不像 Laya 配有和 Matter.js 自身用法一致的 Render，CreateJS 需要单独创建一个贴图层，然后在每个 Tick 里把贴图层的坐标同步为 Matter.js 刚体的当前坐标。</p>\n<p>伪代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b5e271181475\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncreatejs.Ticker.addEventListener('tick', e =&gt; {\r\n  环贴图的坐标 = 环刚体的坐标\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b5e271181475-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b5e271181475-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b5e271181475-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b5e271181475-1\"><span class=\"crayon-v\">createjs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Ticker</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'tick'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b5e271181475-2\"><span class=\"crayon-h\">  </span>环贴图的坐标<span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span>环刚体的坐标</div><div class=\"crayon-line\" id=\"crayon-5a755dace7b5e271181475-3\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>使用 CreateJS 去渲染后，要单独调试 Matter.js 的刚体是非常不便的。建议写一个调试模式专门使用 Matter.js 的 Render 去渲染，以便跟踪刚体的运动轨迹。</p>\n<h3 id=\"二、环\">二、环</h3>\n<p>本游戏的难点是要以 2D 去模拟 3D，环是一点，进针的效果是一点，先说环。</p>\n<p>环由一个圆形的刚体，和半径稍大一些的贴图层所组成。如下图，蓝色部分为刚体：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_1.png\" alt=\"环\"></p>\n<p>伪代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b62051051583\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Ring {\r\n  constructor () {\r\n    // 贴图\r\n    this.texture = new createjs.Sprite(...)\r\n    // 刚体\r\n    this.body = Matter.Bodies.circle(...)\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b62051051583-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b62051051583-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b62051051583-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b62051051583-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b62051051583-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b62051051583-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b62051051583-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b62051051583-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b62051051583-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Ring</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b62051051583-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">constructor</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b62051051583-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 贴图</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b62051051583-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">texture</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">createjs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Sprite</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b62051051583-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 刚体</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b62051051583-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">body</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Matter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Bodies</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">circle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b62051051583-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b62051051583-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"三、刚体\">三、刚体</h3>\n<p>为什么把刚体半径做得稍小呢，这也是受这篇文章 <a href=\"https://aotu.io/notes/2017/11/06/coindozer/\">推金币</a> 里金币的做法所启发。推金币游戏中，为了达到金币间的堆叠效果，作者很聪明地把刚体做得比贴图小，这样当刚体挤在一起时，贴图间就会层叠起来。所以这样做是为了使环之间稍微有点重叠效果，更重要的也是当两个紧贴的环不会因翻转角度太接近而显得留白太多。如图：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_2.png\" alt=\"贴近的环\"></p>\n<p>为了模拟环在水中运动的效果，可以选择给环加一些空气摩擦力。另外在实物游戏里，环是塑料做成的，碰撞后动能消耗较大，因此可以把环的 restitution 值调得稍微小一些。</p>\n<p>需要注意 Matter.js 中因为各种物理参数都是没有单位的，一些物理公式很可能用不上，只能基于其默认值慢慢进行微调。下面的 frictionAir 和 restitution 值就是我慢慢凭感觉调整出来的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b66723452795\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nthis.body = Matter.Bodies.circle(x, y, r, {\r\n  frictionAir: 0.02,\r\n  restitution: 0.15\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b66723452795-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b66723452795-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b66723452795-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b66723452795-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b66723452795-1\"><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">body</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Matter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Bodies</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">circle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b66723452795-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">frictionAir</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b66723452795-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">restitution</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.15</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b66723452795-4\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h3 id=\"四、贴图\">四、贴图</h3>\n<p>环在现实世界中的旋转是三维的，而 CreateJS 只能控制元素在二维平面上的旋转。对于一个环来说，二维平面的旋转是没有任何意义的，无论如何旋转，都只会是同一个样子。</p>\n<p>想要达到环绕 x 轴旋转的效果，一开始想到的是使用 rotation + scaleY。虽然这样能在视觉上达到目的，但是 scaleY 会导致环有被压扁的感觉，图片会失真：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_3.gif\" width=\"50\"></p>\n<p>显然这样的效果是不能接受的，最后我采取了逐帧图的方式，最接近地还原了环的旋转姿态：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_4-0.png\" width=\"372\"></p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_4.gif\" width=\"50\"></p>\n<p>注意在每个 Tick 里需要去判断环是否静止，若非静止则继续播放，并将贴图的 rotation 值赋值为刚体的旋转角度。如果是停止状态，则暂停逐帧图的播放：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b6a119895316\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 贴图与刚体位置的小数点后几位有点不一样，需要降低精度\r\nconst x1 = Math.round(texture.x)\r\nconst x2 = Math.round(body.position.x)\r\nconst y1 = Math.round(texture.y)\r\nconst y2 = Math.round(body.position.y)\r\nif (x1 !== x2 || y1 !== y2) {\r\n  texture.paused &amp;&amp; texture.play()\r\n  texture.rotation = body.angle * 180 / Math.PI\r\n} else {\r\n  !texture.paused &amp;&amp; texture.stop()\r\n}\r\n  \r\ntexture.x = body.position.x\r\ntexture.y = body.position.y</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b6a119895316-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b6a119895316-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b6a119895316-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b6a119895316-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b6a119895316-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b6a119895316-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b6a119895316-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b6a119895316-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b6a119895316-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b6a119895316-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b6a119895316-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b6a119895316-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b6a119895316-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b6a119895316-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b6a119895316-1\"><span class=\"crayon-c\">// 贴图与刚体位置的小数点后几位有点不一样，需要降低精度</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b6a119895316-2\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">round</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b6a119895316-3\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">round</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">position</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b6a119895316-4\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">round</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b6a119895316-5\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">round</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">position</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b6a119895316-6\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b6a119895316-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">paused</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b6a119895316-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">angle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">PI</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b6a119895316-9\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b6a119895316-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">paused</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b6a119895316-11\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b6a119895316-12\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b6a119895316-13\"><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">position</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b6a119895316-14\"><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">position</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">y</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p></p>\n<h3 id=\"五、舞台\">五、舞台</h3>\n<p>舞台需要主要由物理世界、背景图，墙壁，针所组成。</p>\n<h4 id=\"1-物理世界\">1. 物理世界</h4>\n<p>为了模拟真实世界环在水中的向下加速度，可以把 y 方向的 g 值调小：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b6d585383896\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nengine.world.gravity.y = 0.2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b6d585383896-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b6d585383896-1\"><span class=\"crayon-v\">engine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">world</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gravity</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>左右重力感应对环的加速度影响同样可以通过改变 x 方向的 g 值达到：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b71281011141\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 最大倾斜角度为 70 度，让用户不需要过分倾斜手机\r\n// 0.4 为灵敏度值，根据具体情况调整\r\nwindow.addEventListener('deviceorientation', e =&gt; {\r\n  let gamma = e.gamma\r\n  if (gamma &lt; -70) gamma = -70\r\n  if (gamma &gt; 70) gamma = 70\r\n  this.engine.world.gravity.x = (e.gamma / 70) * 0.4\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b71281011141-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b71281011141-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b71281011141-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b71281011141-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b71281011141-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b71281011141-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b71281011141-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b71281011141-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b71281011141-1\"><span class=\"crayon-c\">// 最大倾斜角度为 70 度，让用户不需要过分倾斜手机</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b71281011141-2\"><span class=\"crayon-c\">// 0.4 为灵敏度值，根据具体情况调整</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b71281011141-3\"><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'deviceorientation'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b71281011141-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">gamma</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">gamma</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b71281011141-5\"><span class=\"crayon-e\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gamma</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">70</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gamma</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">70</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b71281011141-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">gamma</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">70</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gamma</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">70</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b71281011141-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">engine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">world</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gravity</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gamma</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">70</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b71281011141-8\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<h4 id=\"2-背景图\">2. 背景图</h4>\n<p>本游戏布景为游戏机及海底世界，两者可以作为父容器的背景图，把 canvas 的位置定位到游戏机内即可。canvas 覆盖范围为下图的蓝色蒙层：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_5.jpg\" width=\"375\"></p>\n<h4 id=\"3-墙壁\">3. 墙壁</h4>\n<p>因为环的刚体半径比贴图半径小，因此墙壁刚体需要有一些提前位移，环贴图才不会溢出，位移量为 R – r（下图红线为墙壁刚体的一部分）：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_6.png\" width=\"140\"></p>\n<h4 id=\"4-针\">4. 针</h4>\n<p>为了模拟针的边缘轮廓，针的刚体由一个矩形与一个圆形所组成。下图红线描绘了针的刚体：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_7.png\" width=\"66\"></p>\n<p>为什么针边缘没有像墙壁一样有一些提前量呢？这是因为进针效果要求针顶的平台区域尽量地窄。作为补偿，可以把环刚体的半径尽可能地调得更大，这样在视觉上环与针的重叠也就不那么明显了。</p>\n<h1 id=\"进针\">进针</h1>\n<p>进针是整个游戏的核心部分，也是最难模拟的地方。</p>\n<h3 id=\"进针后\">进针后</h3>\n<p>两个二维平面的物体交错是不能产生“穿过”效果的：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_8.gif\" width=\"66\"></p>\n<p>除非把环分成前后两部分，这样层级关系才能得到解决。但是由于环贴图是逐帧图，分两部分的做法并不合适。</p>\n<p>最后找到的解决办法是利用视觉错位来达到“穿过”效果：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_9.gif\" width=\"66\"></p>\n<p>具体做法是，当环被判定成功进针时，把环刚体去掉，环的逐帧图逐渐播放到<strong>平放</strong>的那一帧，rotation 值也逐渐变为 0。同时利用 CreateJS 的 Tween 动画把环平移到针底。</p>\n<p>进针后需要去掉环刚体，平移环贴图，这就是上文为什么环的贴图必须由 CreateJS 负责渲染的答案。</p>\n<p>伪代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b75057853456\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/ Object Ring\r\nafterCollision (waterful) {\r\n  // 平移到针底部\r\n  createjs.Tween.get(this.texture)\r\n    .to({y: y}, duration)\r\n  // 消去刚体\r\n  Matter.World.remove(waterful.engine.world, this.body)\r\n  this.body = null\r\n  // 接下来每一 Tick 的更新逻辑改变如下\r\n  this.update = function () {\r\n    const texture = this.texture\r\n    if 当前环贴图就是第 0 帧（环平放的那一帧）{\r\n      texture.gotoAndStop(0)\r\n    } else {\r\n      每 5 个 Tick 往前播放一帧（相隔多少 Tick 切换一帧可以凭感觉调整，主要是为了使切换到平放状态的过程不显得太突兀）\r\n    }\r\n    // 使针大概在环中央位置穿过\r\n    if (texture.x &lt; 200) ++texture.x\r\n    if (texture.x &gt; 213 &amp;&amp; texture.x &lt; 300) --texture.x\r\n    if (texture.x &gt; 462) --texture.x\r\n    if (texture.x &gt; 400 &amp;&amp; texture.x &lt; 448) ++texture.x\r\n    // 把环贴图尽快旋转到水平状态\r\n    let rotation = Math.round(texture.rotation) % 180\r\n    if (rotation &lt; 0) rotation += 180\r\n    if (rotation &gt; 0 &amp;&amp; rotation &lt;= 90) {\r\n      texture.rotation = rotation - 1\r\n    } else if (rotation &gt; 90 &amp;&amp; rotation &lt; 180) {\r\n      texture.rotation = rotation + 1\r\n    } else if (frame === 0) {\r\n      this.update = function () {}\r\n    }\r\n  }\r\n  // 调用得分回调函数\r\n  waterful.score()\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b75057853456-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b75057853456-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Object</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Ring</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-2\"><span class=\"crayon-e\">afterCollision</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">waterful</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 平移到针底部</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">createjs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">to</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 消去刚体</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">Matter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">World</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">remove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">waterful</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">engine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">world</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">body</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 接下来每一 Tick 的更新逻辑改变如下</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">update</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">texture</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-12\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span>当前环贴图就是第<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span>帧（环平放的那一帧）<span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-13\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">gotoAndStop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-15\"><span class=\"crayon-h\">      </span>每<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span>个<span class=\"crayon-h\"> </span><span class=\"crayon-i\">Tick</span><span class=\"crayon-h\"> </span>往前播放一帧（相隔多少<span class=\"crayon-h\"> </span><span class=\"crayon-i\">Tick</span><span class=\"crayon-h\"> </span>切换一帧可以凭感觉调整，主要是为了使切换到平放状态的过程不显得太突兀）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 使针大概在环中央位置穿过</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">213</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">300</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">462</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">448</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 把环贴图尽快旋转到水平状态</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">round</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rotation</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">90</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-26\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-28\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rotation</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-30\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">update</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-32\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-33\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 调用得分回调函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b75057853456-34\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">waterful</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">score</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b75057853456-35\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0083 seconds] -->\r\n<p></p>\n<h3 id=\"进针判断\">进针判断</h3>\n<h4 id=\"进针条件\">进针条件</h4>\n<h5 id=\"1-到达针顶\">1. 到达针顶</h5>\n<p>到达针顶是环进针成功的必要条件。</p>\n<h5 id=\"2-动画帧\">2. 动画帧</h5>\n<p>环必须垂直于针才能被顺利穿过，水平于针时应该是与针相碰后弹开。</p>\n<p>当然条件可以相对放宽一些，不需要完全垂直，下图红框内的6帧都被规定为符合条件：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_10.png\" width=\"372\"></p>\n<p>为了降低游戏难度，我规定超过针一半高度时，只循环播放前6帧：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b79118403083\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nthis.texture.on('animationend', e =&gt; {\r\n  if (e.target.y &lt; 400) {\r\n    e.target.gotoAndPlay('short')\r\n  } else {\r\n    e.target.gotoAndPlay('normal')\r\n  }\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b79118403083-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b79118403083-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b79118403083-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b79118403083-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b79118403083-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b79118403083-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b79118403083-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b79118403083-1\"><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">on</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'animationend'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b79118403083-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b79118403083-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">gotoAndPlay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'short'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b79118403083-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b79118403083-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">gotoAndPlay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'normal'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b79118403083-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b79118403083-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h5 id=\"3-rotation-值\">3. rotation 值</h5>\n<p>同理，为了使得环与针相垂直，rotation 值不能太接近 90 度。经试验后规定 0</p>\n<p>下图这种过大的倾角逻辑上是不能进针成功的：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_11.png\" width=\"50\"></p>\n<h4 id=\"初探\">初探</h4>\n<p>一开始我想的是把三维的进针做成二维的“圆球进桶”，进针的判断也就归到物理事件上面去，不需要再去考虑。</p>\n<p>具体做法如下图，红线为针壁，当环刚体（蓝球）掉入桶内且与 Sensor （绿线）相碰，则判断进针成功。为了使游戏难度不至于太大，环刚体必须设置得较小，而且针壁间距离要比环刚体直径稍大。</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_12.png\" width=\"66\"></p>\n<p>这种模拟其实已经能达到不错的效果了，但是一个技能打破了这种思路的可能性。</p>\n<p>产品那边想做一个放大技能，当用户使用此技能时环会放大，更容易套中。但是在桶口直径不变的情况下，只是环贴图变大并不能降低游戏难度。如果把环刚体变小，的确容易进了，但相近的环之间的贴图重叠范围会很大，这就显得很不合理了。</p>\n<h4 id=\"改进\">改进</h4>\n<p>“进桶”的思路走不通是因为不兼容放大技能，而放大技能改变的是环的直径。因此需要找到一种进针判断方法在环直径小时，进针难度大，直径大时，进针难度小。</p>\n<p>下面两图分别为普通环和放大环，其中红色虚线表示水平方向的内环直径：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_13.png\" width=\"50\"></p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_14.png\" width=\"100\"></p>\n<p>在针顶设置一小段探测线（下图红色虚线），当内环的水平直径与探测线相交时，证明进针成功，然后走进针后的逻辑。在环放大时，内环的水平直径变长，也就更容易与探测线相交。</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_15.png\" width=\"66\"></p>\n<p>伪代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b7e493830875\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// Object Ring\r\n// 每一 Tick 都去判断每个运动中的环是否与探测线相交\r\nupdate (waterful) {\r\n  const texture = this.texture\r\n  // 环当前中心点坐标\r\n  const x0 = texture.x\r\n  const y0 = texture.y\r\n  // 环的旋转弧度\r\n  const angle = texture.rotation\r\n  // 内环半径\r\n  const r = waterful.enlarging ? 16 * 1.5 : 16\r\n  // 根据旋转角度算出内环水平直径的开始和结束坐标\r\n  // 注意 Matter.js 拿到的是 rotation 值是弧度，需要转成角度\r\n  const startPoint = {\r\n    x: x0 - r * Math.cos(angle * (Math.PI / 180)),\r\n    y: y0 - r * Math.sin(angle * (Math.PI / 180))\r\n  }\r\n  const endPoint = {\r\n    x: x0 + r * Math.cos(-angle * (Math.PI / 180)),\r\n    y: y0 + r * Math.sin(angle * (Math.PI / 180))\r\n  }\r\n  // mn 为左侧探测线段的两点，uv 为右侧探测线段的两点\r\n  const m = {x: 206, y: 216}, n = {x: 206, y: 400},\r\n        u = {x: 455, y: 216}, v = {x: 455, y: 400}\r\n        \r\n  if (segmentsIntr(startPoint, endPoint, m, n) || segmentsIntr(startPoint, endPoint, u, v)) {\r\n    // 内环直径与 mn 或 uv 相交，证明进针成功\r\n    this.afterCollision(waterful)\r\n  }\r\n  \r\n  ...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b7e493830875-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b7e493830875-32\">32</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-1\"><span class=\"crayon-c\">// Object Ring</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-2\"><span class=\"crayon-c\">// 每一 Tick 都去判断每个运动中的环是否与探测线相交</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-3\"><span class=\"crayon-e\">update</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">waterful</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">texture</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 环当前中心点坐标</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 环的旋转弧度</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">angle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">texture</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rotation</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 内环半径</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">waterful</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">enlarging</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 根据旋转角度算出内环水平直径的开始和结束坐标</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 注意 Matter.js 拿到的是 rotation 值是弧度，需要转成角度</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startPoint</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">cos</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">angle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PI</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">angle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PI</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-18\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endPoint</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">cos</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">angle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PI</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">angle</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PI</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// mn 为左侧探测线段的两点，uv 为右侧探测线段的两点</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-23\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">206</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">206</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">455</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">216</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">455</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-25\"><span class=\"crayon-h\">        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-26\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">segmentsIntr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">startPoint</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endPoint</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">segmentsIntr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">startPoint</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endPoint</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 内环直径与 mn 或 uv 相交，证明进针成功</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">afterCollision</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">waterful</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-29\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-30\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b7e493830875-31\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b7e493830875-32\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0078 seconds] -->\r\n<p>判断线段是否相交的算法可以参考这篇文章：<a href=\"http://fins.iteye.com/blog/1522259\" target=\"_blank\" rel=\"external\">谈谈”求线段交点”的几种算法</a></p>\n<p>这种思路有两个不合常理的点：</p>\n<p>1.当环在针顶平台直到静止时，内环水平直径都没有和探测线相交，或者相交了但是 rotation 值不符合进针要求，视觉上给人的感受就是环在针顶上静止了：</p>\n<p><img src=\"//misc.aotu.io/Chen-jj/waterful_16.png\" width=\"66\"></p>\n<p>解决思路一是通过重力感应，因为设置了重力感应，只要用户稍微动一下手机环就会动起来。二是判断环刚体在针顶平台完全静止了，则给它施加一个力，让它往下掉。</p>\n<p>2.有可能环的运动轨迹是在针顶划过，但与探测线相交了，此时会给玩家一种环被吸下来的感觉。可以通过适当设置探测线的长度来减少这种情况发生的几率。</p>\n<h1 id=\"优化\">优化</h1>\n<h3 id=\"资源池\">资源池</h3>\n<p>资源回收复用，是游戏常用的优化手法，接下来通过讲解气泡动画的实现来简单介绍一下。</p>\n<p>气泡动画是逐帧图，用户点击按钮时，即创建一个 createjs.Sprite。在 animationend 时，把该 sprite 对象从 createjs.Stage 中 remove 掉。</p>\n<p>可想而知，当用户不停点击时，会不断的创建 createjs.Sprite 对象，非常耗费资源。如果能复用之前播放完被 remove 掉的 sprite 对象，就能解决此问题。</p>\n<p>具体做法是每当用户按下按钮时，先去资源池数组找有没有 sprite 对象。如果没有则创建，animationend 时把 sprite 对象从 stage 里 remove 掉，然后 push 进资源池。如果有，则从资源池取出并直接使用该对象。</p>\n<p>当然用户的点击操作事件需要节流处理，例如至少 300ms 后才能播放下一个气泡动画。</p>\n<p>伪代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b83103972204\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// Object Waterful\r\ngetBubble = throttle(function () {\r\n  // 存在空闲泡泡即返回\r\n  if (this._idleBubbles.length) return this._idleBubbles.shift()\r\n  // 不存在则创建\r\n  const bubble = new createjs.Sprite(...)\r\n  bubble.on('animationend', () =&gt; {\r\n    this._stage.removeChild(bubble)\r\n    this._idleBubbles.push(bubble)\r\n  })\r\n  return bubble\r\n}, 300)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b83103972204-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b83103972204-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b83103972204-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b83103972204-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b83103972204-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b83103972204-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b83103972204-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b83103972204-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b83103972204-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b83103972204-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b83103972204-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b83103972204-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b83103972204-1\"><span class=\"crayon-c\">// Object Waterful</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b83103972204-2\"><span class=\"crayon-v\">getBubble</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throttle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b83103972204-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 存在空闲泡泡即返回</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b83103972204-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_idleBubbles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_idleBubbles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">shift</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b83103972204-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 不存在则创建</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b83103972204-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bubble</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">createjs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Sprite</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b83103972204-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">bubble</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">on</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'animationend'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b83103972204-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_stage</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">removeChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bubble</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b83103972204-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_idleBubbles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bubble</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b83103972204-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b83103972204-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">bubble</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b83103972204-12\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">300</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<h3 id=\"环速度过快导致飞出边界\">环速度过快导致飞出边界</h3>\n<p>Matter.js 里由于没有实现持续碰撞检测算法（<a href=\"http://www.stencyl.com/help/view/continuous-collision-detection\" target=\"_blank\" rel=\"external\">CCD</a>），所以在物体速度过快的情况下，和其他物体的碰撞不会被检测出来。当环速度很快时，也就会出现飞出墙壁的 bug。</p>\n<p>正常情况下，每次按键给环施加的力都是很小的。当用户快速连续点击时，y 方向累积的力也不至于过大。但还是有玩家反应游戏过程中环不见了的问题。最后发现当手机卡顿时，Matter.js 的 Tick 没有及时触发，导致卡顿完后把卡顿时累积起来的力一次性应用到环刚体上，环瞬间获得很大的速度，也就飞出了游戏场景。</p>\n<p>解决方法有两个：</p>\n<ol>\n<li>给按钮节流，300ms才能施加一次力。</li>\n<li>每次按下按钮，只是把一个标志位设为 true。在每个 Matter.js 的 Tick 里判断该标志位是否为 true，是则施力。保证每个 Matter.js 的 Tick 里只对环施加一次力。</li>\n</ol>\n<p>伪代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a755dace7b87765069402\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbtn.addEventListener('touchstart', e =&gt; {\r\n  this.addForce = true\r\n})\r\nEvents.on(this._engine, 'beforeUpdate', e =&gt; {\r\n  if (!this.addForce) return\r\n  this.addForceLeft = false\r\n  // 施力\r\n  this._rings.forEach(ring =&gt; {\r\n    Matter.Body.applyForce(ring.body, {x: x, y: y}, {x: 0.02, y: -0.03})\r\n    Matter.Body.setAngularVelocity(ring.body, Math.PI/24)\r\n  })\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b87765069402-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b87765069402-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b87765069402-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b87765069402-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b87765069402-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b87765069402-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b87765069402-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b87765069402-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b87765069402-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b87765069402-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a755dace7b87765069402-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a755dace7b87765069402-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a755dace7b87765069402-1\"><span class=\"crayon-v\">btn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addEventListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'touchstart'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b87765069402-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addForce</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b87765069402-3\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b87765069402-4\"><span class=\"crayon-v\">Events</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">on</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_engine</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'beforeUpdate'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b87765069402-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addForce</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b87765069402-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">addForceLeft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b87765069402-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 施力</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b87765069402-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_rings</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ring</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b87765069402-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Matter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Body</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">applyForce</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ring</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b87765069402-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Matter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Body</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setAngularVelocity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ring</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PI</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a755dace7b87765069402-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a755dace7b87765069402-12\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p></p>\n<h1 id=\"结语\">结语</h1>\n<p>如果对「H5游戏开发」感兴趣，欢迎关注我们的<a href=\"https://zhuanlan.zhihu.com/snsgame\" target=\"_blank\" rel=\"external\">专栏</a></p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93870\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93870votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93870\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "cd5d9cf9ea78a88f9907211a46161372", "title": "2017 年度十大最受欢迎的浏览器：IE 落选，Edge 来挽尊", "url": "http://web.jobbole.com/93890/", "create_date": "2018-02-03", "front_image_url": ["https://static.oschina.net/uploads/space/2018/0122/005150_lmnM_3703517.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "2", "tags": "基础技术,浏览器", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://fossbytes.com/best-web-browsers-for-pc/\">fossbytes</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/news/92647/best-web-browsers-for-pc\">开源中国/周其</a>   </div><div>\n<p>人们总是希望他们的浏览器的速度可以达到最快，所以，一个好的浏览器应该可以扩展和有丰富的插件。这里总结了2018年最受欢迎的互联网浏览器。注意：不按照任何优先顺序排名。</p>\n<h3>1.谷歌浏览器</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/005150_lmnM_3703517.png\" alt=\"\"></p>\n<p>支持的平台：Windows，Linux，macOS，Android，iOS，Chrome OS</p>\n<p>当Google在2009年首次推出Chrome时，它迅速升上了受欢迎的浏览器排行榜，其市场份额超过60％，谷歌成为很好的浏览器的原因之一是支持跨设备。如果登录到Google帐户，则浏览器可以跨设备同步互联网历史记录，标签，书签，密码等。</p>\n<p><strong>2. Mozilla Firefox 浏览器</strong></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/005716_hvW0_3703517.jpg\" alt=\"\"></p>\n<p>支持的平台：Windows，Linux，macOS，Android，iOS，BSD（非官方端口）</p>\n<p>去年，Mozilla发布Firefox 57 ，让火狐浏览器快了一步不止，大家期待一下Firefox 58带来的不一样的体验吧。</p>\n<h3>3. Microsoft Edge</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/010027_xO5Z_3703517.jpg\" alt=\"\"><img src=\"https://static.oschina.net/uploads/space/2018/0122/011454_SiLp_3703517.jpg\" alt=\"\"></p>\n<p>支持的平台：Windows 10，Xbox One，Android，iOS</p>\n<p>每个人都知道，微软发布了Edge，以挽救他们的老牌浏览器Internet Explorer失去的尊严。现在看来，Edge无疑是最适合Windows 10的网络浏览器软件。这个浏览器比其他任何浏览器都更好地与Windows 10集成。而且速度快，响应速度快。</p>\n<h3>4. Opera</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/010354_jNXA_3703517.jpg\" alt=\"\"></p>\n<p>支持的平台：Windows，MacOS，Linux，Android，iOS，移动电话</p>\n<p>Opera可能是目前最老的网页浏览器，它通常被认为是最好的Firefox替代品。与其他网络浏览器应用程序一样，Opera还支持跨设备同步。不过，用户可以在Opera中安装Chrome扩展程序，因为浏览器已经开始使用与Chromium相同的引擎。</p>\n<h3>5. Chromium</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/011032_JPLg_3703517.png\" alt=\"\"></p>\n<p>支持的平台：Windows，Linux，macOS，Android，BSD</p>\n<p>Chromium的外观和感觉和功能与Chrome相同。您可以使用Gooogle帐户登录，同步数据，下载扩展程序等。如果您的系统上安装了两个浏览器，则可以通过查看蓝色徽标轻松找到Chromium。但是有一个显著地区别Chromium浏览器是开源的。</p>\n<h3>6. Vivaldi</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/011342_vxnd_3703517.jpg\" alt=\"\"></p>\n<p>支持的平台：Windows，macOS，Linux</p>\n<p>Vivaldi只有一岁，它是由Opera Software联合创始人Jon Stephenson von Tetzchner和Tatsuki Tomita创建的。作为一款以Chromium灵感的浏览器，它像Opera一样支持Chrome扩展。</p>\n<h3>7.Torch Browser</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/011859_Rz5Q_3703517.jpg\" alt=\"\"></p>\n<p>支持的平台：Windows</p>\n<p>它可能不像Chrome，Firefox或Edge那么受欢迎，但是它内置了Torrent下载器，还包括一个内置加速器。Torch浏览器几乎与Chrome浏览器相同，它类似于Chrome和Firefox的快速网络浏览器，不同之处在于，它基于较旧版本的Chromium。</p>\n<h3>8.Maxthon 浏览器</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/012223_LyEC_3703517.jpg\" alt=\"\"></p>\n<p>支持的平台：Windows，MacOS Linux，Android，iOS，Windows Phone</p>\n<p>自2002年以来，傲游主要作为Windows的网页浏览器开始使用，但后来又延伸到了其他平台。开发商已经将 Maxthon 推广为云端浏览器。然而，PR似乎不再是独家了，几乎所有的网络浏览器应用程序现在支持云上的数据同步。</p>\n<h3>9. Safari</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/012526_HIkK_3703517.png\" alt=\"\"></p>\n<p>支持的平台：MacOS，iOS</p>\n<p>对于 Google Chrome 和 Firefox 用户来说，这是一个很好的选择。早些时候，Safari可用于Windows，但是现在，这个浏览器现在只能被MacOS和iOS用户使用。</p>\n<h3>10. UC浏览器</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0122/012633_MZLz_3703517.jpg\" alt=\"\"></p>\n<p>支持的平台：Windows，Android，iOS，移动电话</p>\n<p>UC浏览器已经被列为Android最好的网络浏览器软件之一。它也可用于包括Microsoft Windows在内的其他平台。PC端的UC浏览器的外观和风格很吸引人。它的基本主题倾向于Microsoft Edge。</p>\n<p>来讲讲你更偏向于哪一个浏览器。</p>\n<p>来自：<a href=\"https://fossbytes.com/best-web-browsers-for-pc/\">fossbytes</a></p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93890\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93890votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93890\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "339ca228fc5cbcfa69f97981426152ad", "title": "H5游戏开发：消灭星星", "url": "http://web.jobbole.com/93872/", "create_date": "2018-02-03", "front_image_url": ["https://misc.aotu.io/leeenx/popstar/popstar.gif"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "HTML5,游戏", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://aotu.io/notes/2018/01/17/popstar/\">凹凸实验室</a>   </div><div>\n<p><a id=\"more\"></a>「消灭星星」是一款很经典的「消除类游戏」，它的玩法很简单：消除相连通的同色砖块。</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/popstar.gif\" alt=\"demo\"></p>\n<h2 id=\"1-游戏规则\">1. 游戏规则</h2>\n<p>「消灭星星」存在多个版本，不过它们的规则除了「关卡分值」有些出入外，其它的规则都是一样的。笔者介绍的版本的游戏规则整理如下：</p>\n<p><strong>1. 色砖分布</strong></p>\n<ul>\n<li>10 x 10 的表格</li>\n<li>5种颜色 —— 红、绿、蓝，黄，紫</li>\n<li>每类色砖个数在指定区间内随机</li>\n<li>5类色砖在 10 x 10 表格中随机分布</li>\n</ul>\n<p><strong>2. 消除规则</strong></p>\n<p>两个或两个以上同色砖块相连通即是可被消除的砖块。</p>\n<p><strong>3. 分值规则</strong></p>\n<ul>\n<li>消除总分值 = n * n * 5</li>\n<li>奖励总分值 = 2000 – n * n * 20</li>\n</ul>\n<p>「n」表示砖块数量。上面是「总」分值的规则，还有「单」个砖块的分值规则：</p>\n<ul>\n<li>消除砖块得分值 = 10 * i + 5</li>\n<li>剩余砖块扣分值 = 40 * i + 20</li>\n</ul>\n<p>「i」表示砖块的索引值（从 0 开始）。简单地说，单个砖块「得分值」和「扣分值」是一个等差数列。</p>\n<p><strong>4. 关卡分值</strong></p>\n<p>关卡分值 = 1000 + (level – 1) * 2000；「level」即当前关卡数。</p>\n<p><strong>5. 通关条件</strong></p>\n<ul>\n<li>可消除色块不存在</li>\n<li>累计分值 &gt;= 当前关卡分值</li>\n</ul>\n<p>上面两个条件同时成立游戏才可以通关。</p>\n<h2 id=\"2-MVC-设计模式\">2. MVC 设计模式</h2>\n<p>笔者这次又是使用了 MVC 模式来写「消灭星星」。星星「砖块」的数据结构与各种状态由 Model 实现，游戏的核心在 Model 中完成；View 映射 Model 的变化并做出对应的行为，它的任务主要是展示动画；用户与游戏的交互由 Control 完成。</p>\n<p>从逻辑规划上看，Model 很重而View 与 Control 很轻，不过，从代码量上看，View 很重而 Model 与 Control 相对很轻。</p>\n<h2 id=\"3-Model\">3. Model</h2>\n<p>10 x 10 的表格用长度为 100 的数组可完美映射游戏的星星「砖块」。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541a0427249987\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[\r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P, \r\n\tR, R, G, G, B, B, Y, Y, P, P\r\n]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541a0427249987-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541a0427249987-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541a0427249987-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541a0427249987-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541a0427249987-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541a0427249987-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541a0427249987-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541a0427249987-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541a0427249987-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541a0427249987-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541a0427249987-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541a0427249987-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541a0427249987-1\"><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541a0427249987-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541a0427249987-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541a0427249987-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541a0427249987-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541a0427249987-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541a0427249987-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541a0427249987-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541a0427249987-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541a0427249987-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541a0427249987-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">P</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">P</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541a0427249987-12\"><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0057 seconds] -->\r\n<p>R – 红色，G – 绿色，B – 蓝色，Y – 黄色，P – 紫色。Model 的核心任务是以下四个：</p>\n<ul>\n<li>生成砖墙</li>\n<li>消除砖块 （生成砖块分值）</li>\n<li>夯实砖墙</li>\n<li>清除残砖 （生成奖励分值）</li>\n</ul>\n<h3 id=\"3-1-生成砖墙\">3.1 生成砖墙</h3>\n<p>砖墙分两步生成：</p>\n<ul>\n<li>色砖数量分配</li>\n<li>打散色砖</li>\n</ul>\n<p>理论上，可以将 100 个格子可以均分到 5 类颜色，不过笔者玩过的「消灭星星」都不使用均分策略。通过分析几款「消灭星星」，其实可以发现一个规律 —— 「<strong>色砖之间的数量差在一个固定的区间内</strong>」。</p>\n<p>如果把传统意义上的均分称作「完全均分」，那么「消灭星星」的分配是一种在均分线上下波动的「不完全均分」。</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/2017-12-06-waveAverage.gif\" alt=\"正余弦波线图\"></p>\n<p>笔者把上面的「不完全均分」称作「波动均分」，算法的具体实现可以参见「<a href=\"https://aotu.io/notes/2018/01/11/waveaverage/\">波动均分算法</a>」。</p>\n<p>「打散色砖」其实就是将数组乱序的过程，笔者推荐使用「 <a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" target=\"_blank\" rel=\"external\">费雪耶兹乱序算法</a>」。</p>\n<p>以下是伪代码的实现：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541ab403091194\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 波动均分色砖\r\nwaveaverage(5, 4, 4).forEach(\r\n\t// tiles 即色墙数组\r\n\t(count, clr) =&gt; tiles.concat(generateTiles(count, clr)); \r\n); \r\n// 打散色砖\r\nshuffle(tiles);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ab403091194-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ab403091194-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ab403091194-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ab403091194-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ab403091194-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ab403091194-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ab403091194-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ab403091194-1\"><span class=\"crayon-c\">// 波动均分色砖</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ab403091194-2\"><span class=\"crayon-e\">waveaverage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ab403091194-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// tiles 即色墙数组</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ab403091194-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">clr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">concat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">generateTiles</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">clr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ab403091194-5\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ab403091194-6\"><span class=\"crayon-c\">// 打散色砖</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ab403091194-7\"><span class=\"crayon-e\">shuffle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tiles</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"3-2-消除砖块\">3.2 消除砖块</h3>\n<p>「消除砖块」的规则很简单 —— <strong>相邻相连通相同色即可以消除</strong>。</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/20180111-connection.png\" alt=\"连通图\"><br>\n前两个组合符合「相邻相连通相同色即可以消除」，所以它们可以被消除；第三个组合虽然「相邻相同色」但是不「相连通」所以它不能被消除。</p>\n<p>「消除砖块」的同时有一个重要的任务：生成砖块对应的分值。在「游戏规则」中，笔者已经提供了对应的数学公式：「消除砖块得分值 = 10 * i + 5」。</p>\n<p><strong>「消除砖块」算法实现如下：</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541af369814176\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction clean(tile) { \r\n\tlet count = 1; \r\n\tlet sameTiles = searchSameTiles(tile); \r\n\tif(sameTiles.length &gt; 0) { \r\n\t\tdeleteTile(tile); \r\n\t\twhile(true) {\r\n\t\t\tlet nextSameTiles = []; \r\n\t\t\tsameTiles.forEach(tile =&gt; { \r\n\t\t\t\tnextSameTiles.push(...searchSameTiles(tile)); \r\n\t\t\t\tmakeScore(++count * 10 + 5); // 标记当前分值 \r\n\t\t\t\tdeleteTile(tile); // 删除砖块\r\n\t\t\t}); \r\n\t\t\t// 清除完成，跳出循环\r\n\t\t\tif(nextSameTiles.length === 0) break; \r\n\t\t\telse {\r\n\t\t\t\tsameTiles = nextSameTiles; \r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541af369814176-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541af369814176-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">clean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">count</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">sameTiles</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">searchSameTiles</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sameTiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-5\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">deleteTile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-6\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-7\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">nextSameTiles</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-8\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">sameTiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-9\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-v\">nextSameTiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">searchSameTiles</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-10\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-e\">makeScore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">count</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 标记当前分值 </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-11\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-e\">deleteTile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 删除砖块</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-12\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-13\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// 清除完成，跳出循环</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-14\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nextSameTiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-15\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-16\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-v\">sameTiles</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nextSameTiles</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-17\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-18\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541af369814176-19\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541af369814176-20\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>清除的算法使用「递归」逻辑上会清晰一些，不过「递归」在浏览器上容易「栈溢出」，所以笔者没有使用「递归」实现。</p>\n<h3 id=\"3-3-夯实砖墙\">3.3 夯实砖墙</h3>\n<p>砖墙在消除了部分砖块后，会出现空洞，此时需要对墙体进行夯实：</p>\n<table>\n<thead>\n<tr>\n<th><img src=\"https://misc.aotu.io/leeenx/popstar/20180112-down.gif\" alt=\"向下夯实\"></th>\n<th><img src=\"https://misc.aotu.io/leeenx/popstar/20180112-left.gif\" alt=\"向左夯实\"></th>\n<th><img src=\"https://misc.aotu.io/leeenx/popstar/20180112-down-left.gif\" alt=\"先下再左夯实\"></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>向下夯实</strong></td>\n<td><strong>向左夯实</strong></td>\n<td><strong>向左下夯实</strong>（先下后左）</td>\n</tr>\n</tbody>\n</table>\n<p>一种快速的实现方案是，每次「消除砖块」后直接遍历砖墙数组（10×10数组）再把空洞夯实，伪代码表示如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541b4627155817\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor(let row = 0; row &lt; 10; ++row) {\r\n\tfor(let col = 0; col &lt; 10; ++col) { \r\n\t\tif(isEmpty(row, col)) {\r\n\t\t\t// 水平方向（向左）夯实\r\n\t\t\tif(isEmptyCol(col)) { \r\n\t\t\t\ttampRow(col); \r\n\t\t\t}\r\n\t\t\t// 垂直方向（向下）夯实\r\n\t\t\telse {\r\n\t\t\t\ttampCol(col); \r\n\t\t\t}\r\n\t\t\tbreak; \r\n\t\t}\r\n\t}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b4627155817-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b4627155817-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b4627155817-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b4627155817-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b4627155817-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b4627155817-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b4627155817-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b4627155817-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b4627155817-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b4627155817-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b4627155817-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b4627155817-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b4627155817-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b4627155817-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b4627155817-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b4627155817-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b4627155817-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">col</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">col</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b4627155817-3\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">isEmpty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b4627155817-4\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// 水平方向（向左）夯实</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b4627155817-5\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">isEmptyCol</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b4627155817-6\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-e\">tampRow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b4627155817-7\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b4627155817-8\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// 垂直方向（向下）夯实</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b4627155817-9\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b4627155817-10\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-e\">tampCol</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b4627155817-11\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b4627155817-12\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b4627155817-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b4627155817-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b4627155817-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>But… 为了夯实一个空洞对一张大数组进行全量遍历并不是一种高效的算法。在笔者看来影响「墙体夯实」效率的因素有：</p>\n<ol>\n<li>定位空洞</li>\n<li>砖块移动（夯实）</li>\n</ol>\n<p>扫描墙体数组的主要目的是「定位空洞」，但能否不扫描墙体数组直接「定位空洞」？</p>\n<p>墙体的「空洞」是由于「消除砖块」造成的，换种说法 —— <strong>被消除的砖块留下来的坑位就是墙体的空洞</strong>。在「消除砖块」的同时标记空洞的位置，这样就无须全量扫描墙体数组，伪代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541b8472945257\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction deleteTile(tile) { \r\n\t// 标记空洞\r\n\tmarkHollow(tile.index); \r\n\t// 删除砖块逻辑\r\n\t...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b8472945257-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b8472945257-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b8472945257-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b8472945257-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541b8472945257-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541b8472945257-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b8472945257-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">deleteTile</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b8472945257-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 标记空洞</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b8472945257-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">markHollow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b8472945257-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 删除砖块逻辑</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541b8472945257-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541b8472945257-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>在上面的夯实动图，其实可以看到它的夯实过程如下：</p>\n<ol>\n<li>空洞上方的砖块向下移动</li>\n<li>空列右侧的砖块向左移动</li>\n</ol>\n<p>墙体在「夯实」过程中，它的边界是实时在变化，如果「夯实」不按真实边界进行扫描，会产生多余的空白扫描：</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/20180116-clean.gif\" alt=\"对比\"></p>\n<p><strong>如何记录墙体的边界？</strong><br>\n把墙体拆分成一个个单独的列，那么列最顶部的空白格片段就是墙体的「空白」，而其余非顶部的空白格片段即墙体的「空洞」。</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/20180117-col.gif\" alt=\"列\"></p>\n<p>笔者使用一组「列集合」来描述墙体的边界并记录墙体的空洞，它的模型如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541bb741320133\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/*\r\n\t@ count - 列砖块数\r\n\t@ start - 顶部行索引\r\n\t@ end - 底部行索引\r\n\t@ pitCount - 坑数\r\n\t@ topPit - 最顶部的坑\r\n\t@ bottomPit - 最底部的坑\r\n*/ \r\nlet wall = [\r\n\t{count, start, end, pitCount, topPit, bottomPit}, \r\n\t{count, start, end, pitCount, topPit, bottomPit},\r\n\t...\r\n];</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bb741320133-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bb741320133-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bb741320133-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bb741320133-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bb741320133-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bb741320133-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bb741320133-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bb741320133-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bb741320133-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bb741320133-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bb741320133-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bb741320133-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bb741320133-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bb741320133-1\"><span class=\"crayon-c\">/*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bb741320133-2\"><span class=\"crayon-c\">\t@ count - 列砖块数</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bb741320133-3\"><span class=\"crayon-c\">\t@ start - 顶部行索引</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bb741320133-4\"><span class=\"crayon-c\">\t@ end - 底部行索引</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bb741320133-5\"><span class=\"crayon-c\">\t@ pitCount - 坑数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bb741320133-6\"><span class=\"crayon-c\">\t@ topPit - 最顶部的坑</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bb741320133-7\"><span class=\"crayon-c\">\t@ bottomPit - 最底部的坑</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bb741320133-8\"><span class=\"crayon-c\">*/</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bb741320133-9\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">wall</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bb741320133-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pitCount</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">topPit</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bottomPit</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bb741320133-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pitCount</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">topPit</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bottomPit</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bb741320133-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bb741320133-13\"><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这个模型可以描述墙体的三个细节：</p>\n<ul>\n<li>空列</li>\n<li>列的连续空洞</li>\n<li>列的非连续空洞<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541bf176680749\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 空列\r\nif(count === 0) { \r\n\t...\r\n}\r\n// 连续空洞\r\nelse if(bottomPit - topPit + 1 === pitCount) { \r\n\t...\r\n}\r\n// 非连续空洞\r\nelse {\r\n\t...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bf176680749-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bf176680749-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bf176680749-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bf176680749-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bf176680749-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bf176680749-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bf176680749-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bf176680749-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bf176680749-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bf176680749-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541bf176680749-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541bf176680749-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bf176680749-1\"><span class=\"crayon-c\">// 空列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bf176680749-2\"><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">count</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bf176680749-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bf176680749-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bf176680749-5\"><span class=\"crayon-c\">// 连续空洞</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bf176680749-6\"><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bottomPit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">topPit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pitCount</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bf176680749-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bf176680749-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bf176680749-9\"><span class=\"crayon-c\">// 非连续空洞</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bf176680749-10\"><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541bf176680749-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541bf176680749-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n\n</li>\n</ul>\n<p>砖块在消除后，映射到单个列上的空洞会有两种分布形态 —— 连续与非连续。</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/20180117-col2.gif\" alt=\"连续空格与非连续空格\"></p>\n<p>「连续空洞」与「非连续空洞」的夯实过程如下：</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/20180117-tamp.gif\" alt=\"空洞压缩\"></p>\n<p>其实「空列」放大于墙体上，也会有「空洞」类似的分布形态 —— 连续与非连续。<br>\n<img src=\"https://misc.aotu.io/leeenx/popstar/20180117-col3.gif\" alt=\"空洞压缩\"></p>\n<p>它的夯实过程与空洞类似，这里就不赘述了。</p>\n<h3 id=\"3-4-消除残砖\">3.4 消除残砖</h3>\n<p>上一小节提到了「描述墙体的边界并记录墙体的空洞」的「列集合」，笔者是直接使用这个「列集合」来消除残砖的，伪代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541c2258232083\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction clearAll() {\r\n\tlet count = 0; \r\n\tfor(let col = 0, len = this.wall.length;  col &lt; len; ++col) { \r\n\t\tlet colInfo = this.wall[col]; \r\n\t\tfor(let row = colInfo.start; row &lt;= colInfo.end; ++row) {\r\n\t\t\tlet tile = this.grid[row * this.col + col]; \r\n\t\t\ttile.score = -20 - 40 * count++; // 标记奖励分数\r\n\t\t\ttile.removed = true; \r\n\t\t}\r\n\t}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c2258232083-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c2258232083-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c2258232083-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c2258232083-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c2258232083-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c2258232083-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c2258232083-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c2258232083-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c2258232083-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c2258232083-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c2258232083-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c2258232083-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">clearAll</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c2258232083-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">count</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c2258232083-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">col</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">wall</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">col</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c2258232083-4\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">colInfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">wall</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c2258232083-5\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colInfo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colInfo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c2258232083-6\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">tile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">grid</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">col</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">col</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c2258232083-7\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">score</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 标记奖励分数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c2258232083-8\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">removed</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c2258232083-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c2258232083-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c2258232083-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p></p>\n<h2 id=\"4-View\">4. View</h2>\n<p>View 主要的功能有两个：</p>\n<ul>\n<li>UI 管理</li>\n<li>映射 Model 的变化（动画）</li>\n</ul>\n<p>UI 管理主要是指「界面绘制」与「资源加载管理」，这两项功能比较常见本文就直接略过了。View 的重头戏是「映射 Model 的变化」并完成对应的动画。动画是复杂的，而映射的原理是简单的，如下伪代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541c6450929024\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nupdate({originIndex, index, clr, removed, score}) { \r\n\t// 还没有 originIndex 或没有色值，直接不处理\r\n\tif(originIndex === undefined || clr === undefined) return ; \r\n\tlet tile = this.tiles[originIndex]; \r\n\t// tile 存在，判断颜色是否一样\r\n\tif(tile.clr !== clr) {\r\n\t\tthis.updateTileClr(tile, clr); \r\n\t}\r\n\t// 当前索引变化 ----- 表示位置也有变化 \r\n\tif(tile.index !== index) { \r\n\t\tthis.updateTileIndex(tile, index); \r\n\t}\r\n\t// 设置分数\r\n\tif(tile.score !== score) {\r\n\t\ttile.score = score; \r\n\t}\r\n\tif(tile.removed !== removed) { \r\n\t\t// 移除或添加当前节点\r\n\t\ttrue === removed ? this.bomb(tile) : this.area.addChild(tile.sprite); \r\n\t\ttile.removed = removed; \r\n\t}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541c6450929024-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541c6450929024-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-1\"><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">originIndex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">clr</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">removed</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 还没有 originIndex 或没有色值，直接不处理</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">originIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">undefined</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">clr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">undefined</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">let </span><span class=\"crayon-v\">tile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">tiles</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">originIndex</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// tile 存在，判断颜色是否一样</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">clr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">clr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-7\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">updateTileClr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">clr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 当前索引变化 ----- 表示位置也有变化 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-11\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">updateTileIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-13\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 设置分数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">score</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-15\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">score</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-17\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">removed</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">removed</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-18\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">// 移除或添加当前节点</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-19\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">true</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">removed</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bomb</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">area</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addChild</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sprite</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-20\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">removed</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">removed</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541c6450929024-21\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541c6450929024-22\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p>Model 的砖块每次数据的更改都会通知到 View 的砖块，View 会根据对应的变化做对应的动作（动画）。</p>\n<h2 id=\"5-Control\">5. Control</h2>\n<p>Control 要处理的事务比较多，如下：</p>\n<ul>\n<li>绑定 Model &amp; View</li>\n<li>生成通关分值</li>\n<li>判断通关条件</li>\n<li>对外事件</li>\n<li>用户交互</li>\n</ul>\n<p>初始化时，Control 把 Model 的砖块单向绑定到 View 的砖块了。如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75b2bd541ca270031163\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nObject.defineProperties(model.tile, {\r\n    originIndex: {\r\n        get() {...}, \r\n        set(){\r\n            ...\r\n            view.update({originIndex})\r\n        }\r\n    },  \r\n    index: {\r\n        get() {...}, \r\n        set() {\r\n            ...\r\n            view.update({index})\r\n        }\r\n    }, \r\n    clr: {\r\n        get() {...}, \r\n        set() {\r\n            ...\r\n            view.update({clr})\r\n        }\r\n    }, \r\n    removed: {\r\n        get() {...}, \r\n        set() {\r\n            ...\r\n            view.update({removed})\r\n        }\r\n    },  \r\n    score: {\r\n        get() {...}, \r\n        set() {\r\n            ...\r\n            view.update({score})\r\n        }\r\n    }\r\n})\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a75b2bd541ca270031163-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75b2bd541ca270031163-38\">38</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-1\"><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">defineProperties</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">tile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">originIndex</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">originIndex</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">clr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">clr</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">removed</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">removed</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">score</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-33\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">view</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">score</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75b2bd541ca270031163-37\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75b2bd541ca270031163-38\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>「通关分值」与「判断通关条件」这对逻辑在本文的「游戏规则」中有相关介绍，这里不再赘述。</p>\n<p>对外事件规划如下：</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>detail</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>pass</td>\n<td>通关</td>\n</tr>\n<tr>\n<td>pause</td>\n<td>暂停</td>\n</tr>\n<tr>\n<td>resume</td>\n<td>恢复</td>\n</tr>\n<tr>\n<td>gameover</td>\n<td>游戏结束</td>\n</tr>\n</tbody>\n</table>\n<p>用户交互 APIs 规划如下：</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>type</th>\n<th>deltail</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>init</td>\n<td>method</td>\n<td>初始化游戏</td>\n</tr>\n<tr>\n<td>next</td>\n<td>method</td>\n<td>进入下一关</td>\n</tr>\n<tr>\n<td>enter</td>\n<td>method</td>\n<td>进入指定关卡</td>\n</tr>\n<tr>\n<td>pause</td>\n<td>method</td>\n<td>暂停</td>\n</tr>\n<tr>\n<td>resume</td>\n<td>method</td>\n<td>恢复</td>\n</tr>\n<tr>\n<td>destroy</td>\n<td>method</td>\n<td>销毁游戏</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"6-问题\">6. 问题</h2>\n<p>在知乎有一个关于「消灭星星」的话题：<a href=\"https://www.zhihu.com/question/22530789\" target=\"_blank\" rel=\"external\">popstar关卡是如何设计的？</a></p>\n<p>这个话题在最后提出了一个问题 —— <strong>「无法消除和最大得分不满足过关条件的矩阵」</strong>。</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/qustion.jpg\" alt=\"两个问题\"></p>\n<p>「无法消除的矩阵」其实就是最大得分为0的矩阵，本质上是「最大得分不满足过关条件的矩阵」。</p>\n<p><strong>最大得分不满足过关条件的矩阵</strong><br>\n求「矩阵」的最大得分是一个 「<a href=\"https://baike.baidu.com/item/%E8%83%8C%E5%8C%85%E9%97%AE%E9%A2%98\" target=\"_blank\" rel=\"external\">背包问题</a>」，求解的算法不难：对当前矩阵用「递归」的形式把所有的消灭分支都执行一次，并取最高分值。但是 javascript 的「递归」极易「栈溢出」导致算法无法执行。</p>\n<p>其实在知乎的话题中提到一个解决方案：</p>\n<blockquote><p>网上查到有程序提出做个工具随机生成关卡，自动计算，把符合得分条件的关卡筛选出来</p></blockquote>\n<p>这个解决方案代价是昂贵的！笔者提供有源码并没有解决这个问题，而是用一个比较取巧的方法：<strong>进入游戏前检查是事为「无法消除矩阵」，如果是重新生成关卡矩阵</strong>。</p>\n<p>注意：笔者使用的取巧方案并没有解决问题。</p>\n<h2 id=\"7-结语\">7. 结语</h2>\n<p>下面是本文介绍的「消灭星星」的线上 DEMO 的二维码：</p>\n<p><img src=\"https://misc.aotu.io/leeenx/popstar/qr.jpg\" alt=\"二维码\"></p>\n<p>游戏的源码托管在：<a href=\"https://github.com/leeenx/popstar\" target=\"_blank\" rel=\"external\">https://github.com/leeenx/popstar</a></p>\n<p>感谢耐心阅读完本文章的读者。本文仅代表笔者的个人观点，如有不妥之处请不吝赐教。<br>\n如果对「H5游戏开发」感兴趣，欢迎关注我们的<a href=\"https://zhuanlan.zhihu.com/snsgame\" target=\"_blank\" rel=\"external\">专栏</a>。</p>\n<h2 id=\"参考资料\">参考资料</h2>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Knapsack_problem\" target=\"_blank\" rel=\"external\">Knapsack problem</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/NP-completeness\" target=\"_blank\" rel=\"external\">NP-completeness</a></li>\n<li><a href=\"https://www.zhihu.com/question/22530789\" target=\"_blank\" rel=\"external\">popstar关卡是如何设计的？</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\" target=\"_blank\" rel=\"external\">费雪耶兹乱序算法</a></li>\n<li><a href=\"https://aotu.io/notes/2018/01/11/waveaverage/\">波动均分算法</a></li>\n</ul>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93872\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93872votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93872\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "afc9552f6d6f0c426037adbc7bfeb9f6", "title": "如何继承 Date 对象？由一道题彻底弄懂 JS 继承", "url": "http://web.jobbole.com/93850/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,Date,继承", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000012841509\">撒网要见鱼</a>   </div><div>\n<h2>前言</h2>\n<p><strong>见解有限，如有描述不当之处，请帮忙及时指出，如有错误，会及时修正。</strong></p>\n<p><strong>———-长文+多图预警，需要花费一定时间———-</strong></p>\n<p>故事是从一次实际需求中开始的。。。</p>\n<p>某天，某人向我寻求了一次帮助，要协助写一个日期工具类，要求：</p>\n<ul>\n<li>此类继承自<code>Date</code>，拥有Date的所有属性和对象</li>\n<li>此类可以自由拓展方法</li>\n</ul>\n<p>形象点描述，就是要求可以这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269bf980533042\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 假设最终的类是 MyDate，有一个getTest拓展方法\r\nlet date = new MyDate();\r\n\r\n// 调用Date的方法，输出GMT绝对毫秒数\r\nconsole.log(date.getTime());\r\n// 调用拓展的方法，随便输出什么，譬如helloworld!\r\nconsole.log(date.getTest());</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269bf980533042-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269bf980533042-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269bf980533042-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269bf980533042-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269bf980533042-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269bf980533042-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269bf980533042-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269bf980533042-1\"><span class=\"crayon-c\">// 假设最终的类是 MyDate，有一个getTest拓展方法</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269bf980533042-2\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269bf980533042-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269bf980533042-4\"><span class=\"crayon-c\">// 调用Date的方法，输出GMT绝对毫秒数</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269bf980533042-5\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269bf980533042-6\"><span class=\"crayon-c\">// 调用拓展的方法，随便输出什么，譬如helloworld!</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269bf980533042-7\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>于是，随手用JS中经典的<strong>组合寄生法</strong>写了一个继承，然后，刚准备完美收工，一运行，却出现了以下的情景：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg\"><img class=\"alignnone size-full wp-image-93866\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg\" alt=\"1460000012841514\"></a></p>\n<p>但是的心情是这样的： <strong>😳囧</strong></p>\n<p>以前也没有遇到过类似的问题，然后自己尝试着用其它方法，多次尝试，均无果（不算暴力混合法的情况），其实回过头来看，是因为思路新奇，凭空想不到，并不是原理上有多难。。。</p>\n<p>于是，借助强大的搜素引擎，搜集资料，最后，再自己总结了一番，才有了本文。</p>\n<p><strong>———-正文开始前———-</strong></p>\n<p>正文开始前，各位看官可以先暂停往下读，尝试下，在不借助任何网络资料的情况下，是否能实现上面的需求？（就以<code>10分钟</code>为限吧）</p>\n<h2>大纲</h2>\n<ul>\n<li>先说说如何快速快速寻求解答\n<ul>\n<li>stackoverflow上早就有答案了！</li>\n<li>倘若用的是中文搜索。</li>\n</ul>\n</li>\n<li>分析问题的关键\n<ul>\n<li>经典的继承法有何问题</li>\n<li>为什么无法被继承？</li>\n</ul>\n</li>\n<li>该如何实现继承？\n<ul>\n<li>暴力混合法</li>\n<li>ES5黑魔法</li>\n<li>ES6大法</li>\n<li>ES6写法，然后babel打包</li>\n</ul>\n</li>\n<li>几种继承的细微区别</li>\n<li>ES6继承与ES5继承的区别</li>\n<li>构造函数与实例对象</li>\n<li>[[Class]]与Internal slot</li>\n<li>如何快速判断是否继承？</li>\n<li>写在最后的话</li>\n</ul>\n<h2>先说说如何快速快速寻求解答</h2>\n<p>遇到不会的问题，肯定第一目标就是如何快速寻求解决方案，答案是：</p>\n<ul>\n<li>先去stackoverflow上看看有没有类似的题。。。</li>\n</ul>\n<p>于是，借助搜索引擎搜索了下，第一条就符合条件，点开进去看描述</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/25e42265e6cb36d74e9c9f113992e3b8.jpg\"><img class=\"alignnone size-full wp-image-93865\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/25e42265e6cb36d74e9c9f113992e3b8.jpg\" alt=\"1460000012841515\"></a></p>\n<h3>stackoverflow上早就有答案了！</h3>\n<p>先说说结果，再浏览一番后，确实找到了解决方案，然后回过头来一看，惊到了，因为这个问题的提问时间是<code>6 years, 7 months ago</code>。<br>\n也就是说，<code>2011</code>年的时候就已经有人提出了。。。</p>\n<p>感觉自己落后了一个时代<strong>&gt;_。。。</strong></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/ca617bc6e8fdc277ab24908a81ed1a24.jpg\"><img class=\"alignnone size-full wp-image-93864\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/ca617bc6e8fdc277ab24908a81ed1a24.jpg\" alt=\"1460000012841516\"></a></p>\n<p>而且还发现了一个细节，那就是<code>viewed:10,606 times</code>，也就是说至今一共也才一万多次阅读而已，考虑到前端行业的从业人数，这个比例惊人的低。<br>\n以点见面，看来，遇到这个问题的人并不是很多。</p>\n<h3>倘若用的是中文搜索。</h3>\n<p>用中文搜索并不丢人（我遇到问题时的本能反应也是去百度）。结果是这样的：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/7011d69fdd5d40ca048429fe46b3f1ce.jpg\"><img class=\"alignnone size-full wp-image-93863\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/7011d69fdd5d40ca048429fe46b3f1ce.jpg\" alt=\"1460000012841517\"></a></p>\n<p>嗯，看来英文关键字搜索效果不错，第一条就是符合要求的。然后又试了试中文搜索。<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/db7f6383788d56404c33ca4ed7082d6c.jpg\"><img class=\"alignnone size-full wp-image-93862\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/db7f6383788d56404c33ca4ed7082d6c.jpg\" alt=\"1460000012841518\"></a></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/758a519a995b9f60c16cec8963bc1d62.jpg\"><img class=\"alignnone size-full wp-image-93861\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/758a519a995b9f60c16cec8963bc1d62.jpg\" alt=\"1460000012841519\"></a>效果不如人意，搜索前几页，唯一有一条看起来比较相近的（<code>segmentfault</code>上的那条），点进去看</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/f209120991a835987931f4c6e9a7ca83.jpg\"><img class=\"alignnone size-full wp-image-93860\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/f209120991a835987931f4c6e9a7ca83.jpg\" alt=\"1460000012841520\"></a><br>\n<img src=\"https://segmentfault.com/img/remote/1460000012841521?w=990&amp;h=499\"></p>\n<p>怎么说呢。。。这个问题关注度不高，浏览器数较少，而且上面的问题描述和预期的有点区别，仍然是有人回答的。<br>\n不过，虽然说问题在一定程度上得到了解决，但是回答者绕过了无法继承这个问题，有点未竟全功的意思。。。</p>\n<h2>分析问题的关键</h2>\n<p>借助stackoverflow上的回答</p>\n<h3>经典的继承法有何问题</h3>\n<p>先看看本文最开始时提到的经典继承法实现，如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269cb428166184\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/**\r\n * 经典的js组合寄生继承\r\n */\r\nfunction MyDate() {\r\n    Date.apply(this, arguments);\r\n    this.abc = 1;\r\n}\r\n\r\nfunction inherits(subClass, superClass) {\r\n    function Inner() {}\r\n    \r\n    Inner.prototype = superClass.prototype;\r\n    subClass.prototype = new Inner();\r\n    subClass.prototype.constructor = subClass;\r\n}\r\n\r\ninherits(MyDate, Date);\r\n\r\nMyDate.prototype.getTest = function() {\r\n    return this.getTime();\r\n};\r\n\r\n\r\nlet date = new MyDate();\r\n\r\nconsole.log(date.getTest());</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269cb428166184-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269cb428166184-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-1\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-2\"><span class=\"crayon-c\"> * 经典的js组合寄生继承</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-3\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-4\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">abc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-9\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">inherits</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">subClass</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">superClass</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Inner</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-11\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Inner</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">superClass</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">subClass</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Inner</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">subClass</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">constructor</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">subClass</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-15\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-16\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-17\"><span class=\"crayon-e\">inherits</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">MyDate</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-18\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-19\"><span class=\"crayon-v\">MyDate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">getTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-21\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-22\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-24\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269cb428166184-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269cb428166184-26\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>就是这段代码⬆，这也是JavaScript高程（红宝书）中推荐的一种，一直用，从未失手，结果现在马失前蹄。。。</p>\n<p>我们再回顾下它的报错：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg\"><img class=\"alignnone size-full wp-image-93866\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg\" alt=\"1460000012841514\"></a></p>\n<p>再打印它的原型看看：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/2f413360379098aeea5bc19871579d3f.jpg\"><img class=\"alignnone size-full wp-image-93858\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/2f413360379098aeea5bc19871579d3f.jpg\" alt=\"1460000012841522\"></a></p>\n<p>怎么看都没问题，因为按照原型链回溯规则，<code>Date</code>的所有原型方法都可以通过<code>MyDate</code>对象的原型链往上回溯到。<br>\n再仔细看看，发现它的关键并不是找不到方法，而是<code>this is not a Date object.</code></p>\n<p>嗯哼，也就是说，关键是：<strong>由于调用的对象不是Date的实例，所以不允许调用，就算是自己通过原型继承的也不行</strong></p>\n<h3>为什么无法被继承？</h3>\n<p>首先，看看<code>MDN</code>上的解释，上面有提到，JavaScript的日期对象只能通过<code>JavaScript Date</code>作为构造函数来实例化。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/d69508487ea7b60d0b1fc710dbaa4be4.jpg\"><img class=\"alignnone size-full wp-image-93867\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/d69508487ea7b60d0b1fc710dbaa4be4.jpg\" alt=\"1460000012841523\"></a></p>\n<p>然后再看看stackoverflow上的回答：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/d0b781b7631626cdaafea944363e1fb3.jpg\"><img class=\"alignnone size-full wp-image-93857\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/d0b781b7631626cdaafea944363e1fb3.jpg\" alt=\"1460000012841524\"></a></p>\n<p>有提到，<code>v8</code>引擎底层代码中有限制，如果调用对象的<code>[[Class]]</code>不是<code>Date</code>，则抛出错误。</p>\n<p>总的来说，结合这两点，可以得出一个结论：</p>\n<p><strong>要调用Date上方法的实例对象必须通过Date构造出来，否则不允许调用Date的方法</strong></p>\n<h2>该如何实现继承？</h2>\n<p>虽然原因找到了，但是问题仍然要解决啊，真的就没办法了么？当然不是，事实上还是有不少实现的方法的。</p>\n<h3>暴力混合法</h3>\n<p>首先，说说说下暴力的混合法，它是下面这样子的：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/e84e1ce6ff78f426180c00647f188f6c.jpg\"><img class=\"alignnone size-full wp-image-93856\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/e84e1ce6ff78f426180c00647f188f6c.jpg\" alt=\"1460000012841525\"></a></p>\n<p>说到底就是：内部生成一个<code>Date</code>对象，然后此类暴露的方法中，把原有<code>Date</code>中所有的方法都代理一遍，而且严格来说，这根本算不上继承（都没有原型链回溯）。</p>\n<h3>ES5黑魔法</h3>\n<p>然后，再看看ES5中如何实现？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269d2501968085\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 需要考虑polyfill情况\r\nObject.setPrototypeOf = Object.setPrototypeOf ||\r\nfunction(obj, proto) {\r\n    obj.__proto__ = proto;\r\n\r\n    return obj;\r\n};\r\n\r\n/**\r\n * 用了点技巧的继承，实际上返回的是Date对象\r\n */\r\nfunction MyDate() {\r\n    // bind属于Function.prototype，接收的参数是：object, param1, params2...\r\n    var dateInst = new(Function.prototype.bind.apply(Date, [Date].concat(Array.prototype.slice.call(arguments))))();\r\n\r\n    // 更改原型指向，否则无法调用MyDate原型上的方法\r\n    // ES6方案中，这里就是[[prototype]]这个隐式原型对象，在没有标准以前就是__proto__\r\n    Object.setPrototypeOf(dateInst, MyDate.prototype);\r\n\r\n    dateInst.abc = 1;\r\n\r\n    return dateInst;\r\n}\r\n\r\n// 原型重新指回Date，否则根本无法算是继承\r\nObject.setPrototypeOf(MyDate.prototype, Date.prototype);\r\n\r\nMyDate.prototype.getTest = function getTest() {\r\n    return this.getTime();\r\n};\r\n\r\nlet date = new MyDate();\r\n\r\n// 正常输出，譬如1515638988725\r\nconsole.log(date.getTest());</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d2501968085-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d2501968085-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-1\"><span class=\"crayon-c\">// 需要考虑polyfill情况</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-2\"><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">setPrototypeOf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">setPrototypeOf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-3\"><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">obj</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proto</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">obj</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__proto__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proto</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">obj</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-9\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-10\"><span class=\"crayon-c\"> * 用了点技巧的继承，实际上返回的是Date对象</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-11\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-12\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// bind属于Function.prototype，接收的参数是：object, param1, params2...</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dateInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Function</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bind</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">concat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">slice</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 更改原型指向，否则无法调用MyDate原型上的方法</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// ES6方案中，这里就是[[prototype]]这个隐式原型对象，在没有标准以前就是__proto__</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setPrototypeOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dateInst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MyDate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dateInst</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">abc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dateInst</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-23\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-24\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-25\"><span class=\"crayon-c\">// 原型重新指回Date，否则根本无法算是继承</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-26\"><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setPrototypeOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">MyDate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-28\"><span class=\"crayon-v\">MyDate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">getTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-30\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-32\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d2501968085-34\"><span class=\"crayon-c\">// 正常输出，譬如1515638988725</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d2501968085-35\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p>一眼看上去不知所措？没关系，先看下图来理解：（原型链关系一目了然）</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/a6caf166d6406104056f013da8bf45f8.png\"><img class=\"alignnone size-full wp-image-93855\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/a6caf166d6406104056f013da8bf45f8.png\" alt=\"1460000012841526\"></a></p>\n<p>可以看到，用的是非常巧妙的一种做法：</p>\n<ul>\n<li>正常继承的情况如下：\n<ul>\n<li><code>new MyDate()</code>返回实例对象<code>date</code>是由<code>MyDate</code>构造的</li>\n<li>原型链回溯是: <code>date(MyDate对象)-&gt;date.__proto__-&gt;MyDate.prototype-&gt;MyDate.prototype.__proto__-&gt;Date.prototype</code></li>\n</ul>\n</li>\n<li>这种做法的继承的情况如下：\n<ul>\n<li><code>new MyDate()</code>返回实例对象<code>date</code>是由<code>Date</code>构造的</li>\n<li>原型链回溯是: <code>date(Date对象)-&gt;date.__proto__-&gt;MyDate.prototype-&gt;MyDate.prototype.__proto__-&gt;Date.prototype</code></li>\n</ul>\n</li>\n</ul>\n<p>可以看出，关键点在于：</p>\n<ul>\n<li>构造函数里返回了一个真正的<code>Date</code>对象（由<code>Date</code>构造，所以有这些内部类中的关键<code>[[Class]]</code>标志），所以它有调用<code>Date</code>原型上方法的权利</li>\n<li>构造函数里的Date对象的<code>[[ptototype]]</code>（对外，浏览器中可通过<code>__proto__</code>访问）指向<code>MyDate.prototype</code>，然后<code>MyDate.prototype</code>再指向<code>Date.prototype</code>。</li>\n</ul>\n<p>所以最终的实例对象仍然能进行正常的原型链回溯，回溯到原本Date的所有原型方法</p>\n<ul>\n<li>这样通过一个巧妙的欺骗技巧，就实现了完美的Date继承。不过补充一点，<code>MDN</code>上有提到<strong>尽量不要修改对象的<code>[[Prototype]]</code></strong>，因为这样可能会干涉到浏览器本身的优化。</li>\n</ul>\n<p><strong>如果你关心性能，你就不应该在一个对象中修改它的 [[Prototype]]</strong></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/8d13fefa81f89617d039bf042dd04663.jpg\"><img class=\"alignnone size-full wp-image-93854\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/8d13fefa81f89617d039bf042dd04663.jpg\" alt=\"1460000012841527\"></a></p>\n<h3>ES6大法</h3>\n<p>当然，除了上述的ES5实现，ES6中也可以直接继承（自带支持继承<code>Date</code>），而且更为简单：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269d8885708080\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyDate extends Date {\r\n    constructor() {\r\n        super();\r\n        this.abc = 1;\r\n    }\r\n    getTest() {\r\n        return this.getTime();\r\n    }\r\n}\r\n\r\nlet date = new MyDate();\r\n\r\n// 正常输出，譬如1515638988725\r\nconsole.log(date.getTest());</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d8885708080-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d8885708080-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d8885708080-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d8885708080-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d8885708080-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d8885708080-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d8885708080-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d8885708080-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d8885708080-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d8885708080-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d8885708080-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d8885708080-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269d8885708080-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269d8885708080-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269d8885708080-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d8885708080-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">constructor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d8885708080-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d8885708080-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">abc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d8885708080-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d8885708080-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">getTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d8885708080-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d8885708080-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d8885708080-9\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d8885708080-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d8885708080-11\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d8885708080-12\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269d8885708080-13\"><span class=\"crayon-c\">// 正常输出，譬如1515638988725</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269d8885708080-14\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTest</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>对比下ES5中的实现，这个真的是简单的不行，直接使用ES6的Class语法就行了。</p>\n<p>而且，也可以正常输出。</p>\n<p>注意：<strong>这里的正常输出环境是直接用ES6运行，不经过babel打包，打包后实质上是转化成ES5的，所以效果完全不一样</strong></p>\n<h3>ES6写法，然后Babel打包</h3>\n<p>虽然说上述ES6大法是可以直接继承Date的，但是，考虑到实质上大部分的生产环境是：<code>ES6 + Babel</code></p>\n<p><strong>直接这样用ES6 + Babel是会出问题的</strong></p>\n<p>不信的话，可以自行尝试下，Babel打包成ES5后代码大致是这样的：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/698002793c04a66679b3be46acf2a0f3.jpg\"><img class=\"alignnone size-full wp-image-93853\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/698002793c04a66679b3be46acf2a0f3.jpg\" alt=\"1460000012841528\"></a></p>\n<p>然后当信心满满的开始用时，会发现：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg\"><img class=\"alignnone size-full wp-image-93866\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg\" alt=\"1460000012841514\"></a></p>\n<p>对，又出现了这个问题，也许这时候是这样的<strong>⊙?⊙</strong></p>\n<p>因为转译后的ES5源码中，<strong>仍然是通过<code>MyDate</code>来构造</strong>，<br>\n而<code>MyDate</code>的构造中又无法修改属于<code>Date</code>内部的<code>[[Class]]</code>之类的私有标志，<br>\n因此构造出的对象仍然不允许调用<code>Date</code>方法（调用时，被引擎底层代码识别为<code>[[Class]]</code>标志不符合，不允许调用，抛出错误）</p>\n<p>由此可见，ES6继承的内部实现和Babel打包编译出来的实现是有区别的。<br>\n（虽说Babel的polyfill一般会按照定义的规范去实现的，但也不要过度迷信）。</p>\n<h2>几种继承的细微区别</h2>\n<p>虽然上述提到的三种方法都可以达到继承<code>Date</code>的目的-混合法严格说不能算继承，只不过是另类实现。</p>\n<p>于是，将所有能打印的主要信息都打印出来，分析几种继承的区别，大致场景是这样的：</p>\n<p>可以参考：（ 请进入调试模式）<a href=\"https://dailc.github.io/fe-interview/demo/extends_date.html\">https://dailc.github.io/fe-interview/demo/extends_date.html</a></p>\n<p>从上往下，<code>1, 2, 3, 4</code>四种继承实现分别是：（排出了混合法）</p>\n<ul>\n<li>ES6的Class大法</li>\n<li>经典组合寄生继承法</li>\n<li>本文中的取巧做法，Date构造实例，然后更改<code>__proto__</code>的那种</li>\n<li>ES6的Class大法，Babel打包后的实现（无法正常调用的）</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269dd728925849\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n~~~~以下是MyDate们的prototype~~~~~~~~~\r\nDate {constructor: ƒ, getTest: ƒ}\r\nDate {constructor: ƒ, getTest: ƒ}\r\nDate {getTest: ƒ, constructor: ƒ}\r\nDate {constructor: ƒ, getTest: ƒ}\r\n\r\n~~~~以下是new出的对象~~~~~~~~~\r\nSat Jan 13 2018 21:58:55 GMT+0800 (CST)\r\nMyDate2 {abc: 1}\r\nSat Jan 13 2018 21:58:55 GMT+0800 (CST)\r\nMyDate {abc: 1}\r\n\r\n~~~~以下是new出的对象的Object.prototype.toString.call~~~~~~~~~\r\n[object Date]\r\n[object Object]\r\n[object Date]\r\n[object Object]\r\n\r\n~~~~以下是MyDate们的__proto__~~~~~~~~~\r\nƒ Date() { [native code] }\r\nƒ () { [native code] }\r\nƒ () { [native code] }\r\nƒ Date() { [native code] }\r\n\r\n~~~~以下是new出的对象的__proto__~~~~~~~~~\r\nDate {constructor: ƒ, getTest: ƒ}\r\nDate {constructor: ƒ, getTest: ƒ}\r\nDate {getTest: ƒ, constructor: ƒ}\r\nDate {constructor: ƒ, getTest: ƒ}\r\n\r\n~~~~以下是对象的__proto__与MyDate们的prototype比较~~~~~~~~~\r\ntrue\r\ntrue\r\ntrue\r\ntrue</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269dd728925849-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269dd728925849-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-1\"><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span>以下是<span class=\"crayon-e\">MyDate</span>们的<span class=\"crayon-e\">prototype</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-2\"><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">constructor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">getTest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-3\"><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">constructor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">getTest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-4\"><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">getTest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">constructor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-5\"><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">constructor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">getTest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-7\"><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span>以下是<span class=\"crayon-r\">new</span>出的对象<span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-8\"><span class=\"crayon-e\">Sat </span><span class=\"crayon-i\">Jan</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">GMT</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0800</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">CST</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-9\"><span class=\"crayon-e\">MyDate2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">abc</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-10\"><span class=\"crayon-e\">Sat </span><span class=\"crayon-i\">Jan</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">GMT</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0800</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">CST</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-11\"><span class=\"crayon-e\">MyDate</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">abc</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-12\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-13\"><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span>以下是<span class=\"crayon-r\">new</span>出的对象的<span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">toString</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">call</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-14\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-15\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-16\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-17\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-18\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-19\"><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span>以下是<span class=\"crayon-i\">MyDate</span>们的<span class=\"crayon-v\">__proto__</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-20\">ƒ<span class=\"crayon-h\"> </span><span class=\"crayon-e\">Date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-m\">native</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">code</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-21\">ƒ<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-m\">native</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">code</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-22\">ƒ<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-m\">native</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">code</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-23\">ƒ<span class=\"crayon-h\"> </span><span class=\"crayon-e\">Date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-m\">native</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">code</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-24\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-25\"><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span>以下是<span class=\"crayon-r\">new</span>出的对象的<span class=\"crayon-e\">__proto__</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-26\"><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">constructor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">getTest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-27\"><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">constructor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">getTest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-28\"><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">getTest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">constructor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-29\"><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">constructor</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">getTest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span>ƒ<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-30\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-31\"><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span>以下是对象的<span class=\"crayon-v\">__proto_</span><span class=\"crayon-sy\">_</span>与<span class=\"crayon-i\">MyDate</span>们的<span class=\"crayon-i\">prototype</span>比较<span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">~</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-32\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-33\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269dd728925849-34\"><span class=\"crayon-t\">true</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269dd728925849-35\"><span class=\"crayon-t\">true</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0064 seconds] -->\r\n<p>看出，主要差别有几点：</p>\n<ol>\n<li>MyDate们的__proto__指向不一样</li>\n<li>Object.prototype.toString.call的输出不一样</li>\n<li>对象本质不一样，可以正常调用的<code>1, 3</code>都是<code>Date</code>构造出的，而其它的则是<code>MyDate</code>构造出的</li>\n</ol>\n<p>我们上文中得出的一个结论是：<strong>由于调用的对象不是由Date构造出的实例，所以不允许调用，就算是自己的原型链上有Date.prototype也不行</strong></p>\n<p>但是这里有两个变量：<strong>分别是底层构造实例的方法不一样，以及对象的<code>Object.prototype.toString.call</code>的输出不一样</strong>。<br>\n（另一个<code>MyDate.__proto__</code>可以排除，因为原型链回溯肯定与它无关）</p>\n<p>万一它的判断是根据<code>Object.prototype.toString.call</code>来的呢？那这样结论不就有误差了？</p>\n<p>于是，根据ES6中的，<code>Symbol.toStringTag</code>，使用黑魔法，动态的修改下它，排除下干扰：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269e3379864002\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 分别可以给date2，date3设置\r\nObject.defineProperty(date2, Symbol.toStringTag, {\r\n    get: function() {\r\n        return \"Date\";\r\n    }\r\n});</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269e3379864002-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269e3379864002-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269e3379864002-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269e3379864002-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269e3379864002-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269e3379864002-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269e3379864002-1\"><span class=\"crayon-c\">// 分别可以给date2，date3设置</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269e3379864002-2\"><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">defineProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Symbol</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">toStringTag</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269e3379864002-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269e3379864002-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Date\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269e3379864002-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269e3379864002-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>然后在打印下看看，变成这样了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269e6911941177\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[object Date]\r\n[object Date]\r\n[object Date]\r\n[object Object]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269e6911941177-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269e6911941177-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269e6911941177-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269e6911941177-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269e6911941177-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269e6911941177-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269e6911941177-3\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269e6911941177-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-t\">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>可以看到，第二个的<code>MyDate2</code>构造出的实例，虽然打印出来是<code>[object Date]</code>，但是调用Date方法仍然是有错误</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg\"><img class=\"alignnone size-full wp-image-93866\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/732b9ee4bab15c5dba42c8e94a168015.jpg\" alt=\"1460000012841514\"></a></p>\n<p>此时我们可以更加准确一点的确认：<strong>由于调用的对象不是由Date构造出的实例，所以不允许调用</strong></p>\n<p>而且我们可以看到，就算通过黑魔法修改<code>Object.prototype.toString.call</code>，内部的<code>[[Class]]</code>标识位也是无法修改的。<br>\n（这块知识点大概是Object.prototype.toString.call可以输出内部的[[Class]]，但无法改变它，由于不是重点，这里不赘述）。</p>\n<h2>ES6继承与ES5继承的区别</h2>\n<p>从上午中的分析可以看到一点：ES6的Class写法继承是没问题的。但是换成ES5写法就不行了。</p>\n<p>所以ES6的继承大法和ES5肯定是有区别的，那么究竟是哪里不同呢？（主要是结合的本文继承Date来说）</p>\n<p>区别：（以<code>SubClass</code>，<code>SuperClass</code>，<code>instance</code>为例）</p>\n<ul>\n<li>ES5中继承的实质是：（那种经典组合寄生继承法）\n<ul>\n<li>先由子类（<code>SubClass</code>）构造出实例对象this</li>\n<li>然后在子类的构造函数中，将父类（<code>SuperClass</code>）的属性添加到<code>this</code>上，<code>SuperClass.apply(this, arguments)</code></li>\n<li>子类原型（<code>SubClass.prototype</code>）指向父类原型（<code>SuperClass.prototype</code>）</li>\n<li>所以<code>instance</code>是子类（<code>SubClass</code>）构造出的（所以没有父类的<code>[[Class]]</code>关键标志）</li>\n<li>所以，<code>instance</code>有<code>SubClass</code>和<code>SuperClass</code>的所有实例属性，以及可以通过原型链回溯，获取<code>SubClass</code>和<code>SuperClass</code>原型上的方法</li>\n</ul>\n</li>\n<li>ES6中继承的实质是：\n<ul>\n<li>先由父类（<code>SuperClass</code>）构造出实例对象this，这也是为什么必须先调用父类的<code>super()</code>方法（子类没有自己的this对象，需先由父类构造）</li>\n<li>然后在子类的构造函数中，修改this（进行加工），譬如让它指向子类原型（<code>SubClass.prototype</code>），这一步很关键，否则无法找到子类原型（<em>注，子类构造中加工这一步的实际做法是推测出的，从最终效果来推测</em>）</li>\n<li>然后同样，子类原型（<code>SubClass.prototype</code>）指向父类原型（<code>SuperClass.prototype</code>）</li>\n<li>所以<code>instance</code>是父类（<code>SuperClass</code>）构造出的（所以有着父类的<code>[[Class]]</code>关键标志）</li>\n<li>所以，<code>instance</code>有<code>SubClass</code>和<code>SuperClass</code>的所有实例属性，以及可以通过原型链回溯，获取<code>SubClass</code>和<code>SuperClass</code>原型上的方法</li>\n</ul>\n</li>\n</ul>\n<p>以上⬆就列举了些重要信息，其它的如静态方法的继承没有赘述。（静态方法继承实质上只需要更改下<code>SubClass.__proto__</code>到<code>SuperClass</code>即可）</p>\n<p>可以看着这张图快速理解：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/a621a7229dadde6d274d0de2dedb9b4f.png\"><img class=\"alignnone size-full wp-image-93852\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/a621a7229dadde6d274d0de2dedb9b4f.png\" alt=\"1460000012841529\"></a></p>\n<p>有没有发现呢：<strong>ES6中的步骤和本文中取巧继承Date的方法一模一样，不同的是ES6是语言底层的做法，有它的底层优化之处，而本文中的直接修改__proto__容易影响性能</strong></p>\n<p><strong>ES6中在super中构建this的好处？</strong></p>\n<p>因为ES6中允许我们继承内置的类，如Date，Array，Error等。如果this先被创建出来，在传给Array等系统内置类的构造函数，这些内置类的构造函数是不认这个this的。<br>\n所以需要现在super中构建出来，这样才能有着super中关键的<code>[[Class]]</code>标志，才能被允许调用。（否则就算继承了，也无法调用这些内置类的方法）</p>\n<h2>构造函数与实例对象</h2>\n<p>看到这里，不知道是否对上午中频繁提到的<strong>构造函数</strong>，<strong>实例对象</strong>有所混淆与困惑呢？这里稍微描述下：</p>\n<p>要弄懂这一点，需要先知道<code>new</code>一个对象到底发生了什么？先形象点说：</p>\n<h3>new MyClass()中，都做了些什么工作</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269ed306674557\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction MyClass() {\r\n    this.abc = 1;\r\n}\r\n\r\nMyClass.prototype.print = function() {\r\n    console.log('this.abc:' + this.abc);\r\n};\r\n\r\nlet instance = new MyClass();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269ed306674557-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269ed306674557-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269ed306674557-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269ed306674557-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269ed306674557-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269ed306674557-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269ed306674557-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269ed306674557-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269ed306674557-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269ed306674557-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyClass</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269ed306674557-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">abc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269ed306674557-3\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269ed306674557-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269ed306674557-5\"><span class=\"crayon-v\">MyClass</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269ed306674557-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'this.abc:'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">abc</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269ed306674557-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269ed306674557-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269ed306674557-9\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">instance</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyClass</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>譬如，上述就是一个标准的实例对象生成，都发生了什么呢？</p>\n<p>步骤简述如下：（<strong>参考MDN</strong>，还有部分关于底层的描述略去-如[[Class]]标识位等）</p>\n<ol>\n<li>构造函数内部，创建一个新的对象，它继承自<code>MyClass.prototype</code>，<code>let instance = Object.create(MyClass.prototype);</code></li>\n<li>使用指定的参数调用构造函数<code>MyClass</code>，并将 this绑定到新创建的对象，<code>MyClass.call(instance);</code>，执行后拥有所有实例属性</li>\n<li>如果构造函数返回了一个“对象”，那么这个对象会取代整个<code>new</code>出来的结果。如果构造函数没有返回对象，那么new出来的结果为步骤1创建的对象。</li>\n</ol>\n<p>（一般情况下构造函数不返回任何值，不过用户如果想覆盖这个返回值，可以自己选择返回一个普通对象来覆盖。当然，返回数组也会覆盖，因为数组也是对象。）</p>\n<p>结合上述的描述，大概可以还原成以下代码：（简单还原，不考虑各种其它逻辑）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269f1637018392\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlet instance = Object.create(MyClass.prototype);\r\nlet innerConstructReturn = MyClass.call(instance);\r\nlet innerConstructReturnIsObj = typeof innerConstructReturn === 'object' || typeof innerConstructReturn === 'function';\r\n\r\nreturn innerConstructReturnIsObj ? innerConstructReturn : instance;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f1637018392-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269f1637018392-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f1637018392-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269f1637018392-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f1637018392-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269f1637018392-1\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">instance</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">MyClass</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269f1637018392-2\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">innerConstructReturn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MyClass</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">instance</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269f1637018392-3\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">innerConstructReturnIsObj</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">typeof </span><span class=\"crayon-v\">innerConstructReturn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'object'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">typeof </span><span class=\"crayon-v\">innerConstructReturn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'function'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269f1637018392-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269f1637018392-5\"><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">innerConstructReturnIsObj</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">innerConstructReturn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instance</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p>\n<ul>\n<li>注意⚠️：\n<ul>\n<li>普通的函数构建，可以简单的认为就是上述步骤</li>\n<li>实际上对于一些内置类（如Date等），并没有这么简单，还有一些自己的隐藏逻辑，譬如<code>[[Class]]</code>标识位等一些重要私有属性。\n<ul>\n<li>譬如可以在MDN上看到，以常规函数调用Date（即不加 new 操作符）将会返回一个字符串，而不是一个日期对象，如果这样模拟的话会无效</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>觉得看起来比较繁琐？可以看下图梳理：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/34b2cb7a275f398b1343b88b036cd38a.png\"><img class=\"alignnone size-full wp-image-93851\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/34b2cb7a275f398b1343b88b036cd38a.png\" alt=\"1460000012841530\"></a></p>\n<p>那现在再回头看看。</p>\n<p><strong>什么是构造函数？</strong></p>\n<p>如上述中的<code>MyClass</code>就是一个构造函数，在内部它构造出了<code>instance</code>对象</p>\n<p><strong>什么是实例对象？</strong></p>\n<p><code>instance</code>就是一个实例对象，它是通过<code>new</code>出来的？</p>\n<p><strong>实例与构造的关系</strong></p>\n<p>有时候浅显点，可以认为构造函数是xxx就是xxx的实例。即：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269f5924722268\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlet instance = new MyClass();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f5924722268-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269f5924722268-1\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">instance</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyClass</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>此时我们就可以认为<code>instance</code>是<code>MyClass</code>的实例，因为它的构造函数就是它</p>\n<h3>实例就一定是由对应的构造函数构造出的么？</h3>\n<p><strong>不一定</strong>，我们那ES5黑魔法来做示例</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269f8877020344\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction MyDate() {\r\n    // bind属于Function.prototype，接收的参数是：object, param1, params2...\r\n    var dateInst = new(Function.prototype.bind.apply(Date, [Date].concat(Array.prototype.slice.call(arguments))))();\r\n\r\n    // 更改原型指向，否则无法调用MyDate原型上的方法\r\n    // ES6方案中，这里就是[[prototype]]这个隐式原型对象，在没有标准以前就是__proto__\r\n    Object.setPrototypeOf(dateInst, MyDate.prototype);\r\n\r\n    dateInst.abc = 1;\r\n\r\n    return dateInst;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f8877020344-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269f8877020344-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f8877020344-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269f8877020344-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f8877020344-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269f8877020344-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f8877020344-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269f8877020344-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f8877020344-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269f8877020344-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269f8877020344-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269f8877020344-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269f8877020344-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269f8877020344-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// bind属于Function.prototype，接收的参数是：object, param1, params2...</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269f8877020344-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dateInst</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Function</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bind</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">concat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">slice</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269f8877020344-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269f8877020344-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 更改原型指向，否则无法调用MyDate原型上的方法</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269f8877020344-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// ES6方案中，这里就是[[prototype]]这个隐式原型对象，在没有标准以前就是__proto__</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269f8877020344-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setPrototypeOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dateInst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MyDate</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prototype</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269f8877020344-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269f8877020344-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">dateInst</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">abc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269f8877020344-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb05269f8877020344-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dateInst</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269f8877020344-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>我们可以看到<code>instance</code>的最终指向的原型是<code>MyDate.prototype</code>，而<code>MyDate.prototype</code>的构造函数是<code>MyDate</code>，<br>\n因此可以认为<code>instance</code>是<code>MyDate</code>的实例。</p>\n<p>但是，<strong>实际上，<code>instance</code>却是由<code>Date</code>构造的</strong></p>\n<p>我们可以继续用<code>ES6</code>中的<code>new.target</code>来验证。</p>\n<p><strong>注意⚠️</strong></p>\n<p>关于<code>new.target</code>，<code>MDN</code>中的定义是：<strong>new.target返回一个指向构造方法或函数的引用</strong>。</p>\n<p>嗯哼，也就是说，返回的是构造函数。</p>\n<p>我们可以在相应的构造中测试打印：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb05269fc215383867\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyDate extends Date {\r\n    constructor() {\r\n        super();\r\n        this.abc = 1;\r\n        console.log('~~~new.target.name:MyDate~~~~');\r\n        console.log(new.target.name);\r\n    }\r\n}\r\n\r\n// new操作时的打印结果是：\r\n// ~~~new.target.name:MyDate~~~~\r\n// MyDate</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269fc215383867-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269fc215383867-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269fc215383867-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269fc215383867-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269fc215383867-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269fc215383867-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269fc215383867-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269fc215383867-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269fc215383867-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269fc215383867-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb05269fc215383867-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb05269fc215383867-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb05269fc215383867-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyDate</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">extends</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Date</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269fc215383867-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">constructor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269fc215383867-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269fc215383867-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">abc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269fc215383867-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'~~~new.target.name:MyDate~~~~'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269fc215383867-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269fc215383867-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269fc215383867-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269fc215383867-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269fc215383867-10\"><span class=\"crayon-c\">// new操作时的打印结果是：</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb05269fc215383867-11\"><span class=\"crayon-c\">// ~~~new.target.name:MyDate~~~~</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb05269fc215383867-12\"><span class=\"crayon-c\">// MyDate</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>然后，可以在上面的示例中看到，就算是ES6的Class继承，<code>MyDate</code>构造中打印<code>new.target</code>也显示<code>MyDate</code>，<br>\n但实际上它是由<code>Date</code>来构造（有着<code>Date</code>关键的<code>[[Class]]</code>标志，因为如果不是Date构造（如没有标志）是无法调用Date的方法的）。<br>\n<strong>这也算是一次小小的勘误吧。</strong></p>\n<p>所以，实际上<strong>用<code>new.target</code>是无法判断实例对象到底是由哪一个构造构造的（这里指的是判断底层真正的<code>[[Class]]</code>标志来源的构造）</strong></p>\n<p>再回到结论：<strong>实例对象不一定就是由它的原型上的构造函数构造的，有可能构造函数内部有着寄生等逻辑，偷偷的用另一个函数来构造了下</strong>,<br>\n当然，简单情况下，我们直接说实例对象由对应构造函数构造也没错（不过，在涉及到这种Date之类的分析时，我们还是得明白）。</p>\n<h2>[[Class]]与Internal slot</h2>\n<p><strong>这一部分为补充内容。</strong></p>\n<p>前文中一直提到一个概念：<strong>Date内部的<code>[[Class]]</code>标识</strong></p>\n<p>其实，严格来说，不能这样泛而称之（前文中只是用这个概念是为了降低复杂度，便于理解），它可以分为以下两部分：</p>\n<ul>\n<li>在ES5中，每种内置对象都定义了 [[Class]] 内部属性的值，[[Class]] 内部属性的值用于内部区分对象的种类\n<ul>\n<li><code>Object.prototype.toString</code>访问的就是这个[[Class]]</li>\n<li>规范中除了通过<code>Object.prototype.toString</code>，没有提供任何手段使程序访问此值。</li>\n<li>而且Object.prototype.toString输出无法被修改</li>\n</ul>\n</li>\n<li>而在ES5中，之前的 [[Class]] 不再使用，取而代之的是一系列的<code>internal slot</code>\n<ul>\n<li>Internal slot 对应于与对象相关联并由各种ECMAScript规范算法使用的内部状态，它们没有对象属性，也不能被继承</li>\n<li>根据具体的 Internal slot 规范，这种状态可以由任何ECMAScript语言类型或特定ECMAScript规范类型值的值组成</li>\n<li>通过<code>Object.prototype.toString</code>，仍然可以输出Internal slot值</li>\n<li><strong>简单点理解（简化理解）</strong>，Object.prototype.toString的流程是：如果是基本数据类型（除去Object以外的几大类型），则返回原本的slot，如果是Object类型（包括内置对象以及自己写的对象），则调用<code>Symbol.toStringTag</code></li>\n<li><code>Symbol.toStringTag</code>方法的默认实现就是返回对象的Internal slot，这个方法<strong>可以被重写</strong></li>\n</ul>\n</li>\n</ul>\n<p>这两点是有所差异的，需要区分（不过简单点可以统一理解为内置对象内部都有一个特殊标识，用来区分对应类型-不符合类型就不给调用）。</p>\n<p>JS内置对象是这些：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb0526a03365298185\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\"Arguments\", \"Array\", \"Boolean\", \"Date\", \"Error\", \"Function\", \"JSON\", \"Math\", \"Number\", \"Object\", \"RegExp\", \"String\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb0526a03365298185-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb0526a03365298185-1\"><span class=\"crayon-s\">\"Arguments\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Array\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Boolean\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Date\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Error\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Function\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"JSON\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Math\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Number\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Object\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"RegExp\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"String\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>ES6新增的一些，这里未提到：（如Promise对象可以输出<code>[object Promise]</code>）</p>\n<p>而前文中提到的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb0526a06516348341\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nObject.defineProperty(date, Symbol.toStringTag, {\r\n    get: function() {\r\n        return \"Date\";\r\n    }\r\n});</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb0526a06516348341-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb0526a06516348341-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb0526a06516348341-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb0526a06516348341-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb0526a06516348341-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb0526a06516348341-1\"><span class=\"crayon-t\">Object</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">defineProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Symbol</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">toStringTag</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb0526a06516348341-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb0526a06516348341-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Date\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb0526a06516348341-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb0526a06516348341-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>它的作用是重写Symbol.toStringTag，截取date（虽然是内置对象，但是仍然属于Object）的<code>Object.prototype.toString</code>的输出，让这个对象输出自己修改后的<code>[object Date]</code>。</p>\n<p><strong>但是，仅仅是做到输出的时候变成了Date，实际上内部的<code>internal slot</code>值并没有被改变</strong>，因此仍然不被认为是Date</p>\n<h2>如何快速判断是否继承？</h2>\n<p>其实，在判断继承时，没有那么多的技巧，就只有关键的一点：<strong><code>[[prototype]]</code>（<code>__ptoto__</code>）的指向关系</strong></p>\n<p>譬如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb0526a0a430584164\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconsole.log(instance instanceof SubClass);\r\nconsole.log(instance instanceof SuperClass);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb0526a0a430584164-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb0526a0a430584164-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb0526a0a430584164-1\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">instance </span><span class=\"crayon-r\">instanceof</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SubClass</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb0526a0a430584164-2\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">instance </span><span class=\"crayon-r\">instanceof</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SuperClass</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>实质上就是：</p>\n<ul>\n<li><code>SubClass.prototype</code>是否出现在<code>instance</code>的原型链上</li>\n<li><code>SuperClass.prototype</code>是否出现在<code>instance</code>的原型链上</li>\n</ul>\n<p>然后，对照本文中列举的一些图，一目了然就可以看清关系。有时候，完全没有必要弄的太复杂。</p>\n<h2>写在最后的话</h2>\n<p>由于继承的介绍在网上已经多不胜数，因此本文没有再重复描述，而是由一道Date继承题引发，展开。（关键就是原型链）</p>\n<p>不知道看到这里，各位看官是否都已经弄懂了JS中的继承呢？</p>\n<p>另外，遇到问题时，多想一想，有时候你会发现，其实你知道的并不是那么多，然后再想一想，又会发现其实并没有这么复杂。。。</p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93850\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93850votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93850\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "fab7c1ad22d6ddf057242a7f3951f6b6", "title": "从0到1，开发一个动画库(1)", "url": "http://web.jobbole.com/93905/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/12/76e5ce354a022f8b988c4094cbcb4854.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,动画库", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000012923589\">jshao</a>   </div><div>\n<p>传送门：<a href=\"https://segmentfault.com/a/1190000013010057\">从0到1，开发一个动画库(2)</a></p>\n<p>如今市面上关于动画的开源库多得数不胜数，有关于CSS、js甚至是canvas渲染的，百花齐放，效果炫酷。但你是否曾想过，自己亲手去实现（封装）一个简单的动画库？</p>\n<p>本文将从零开始，讲授如何搭建一个简单的动画库，它将具备以下几个特征：</p>\n<ul>\n<li>从实际动画中抽象出来，根据给定的动画速度曲线，完成“由帧到值”的计算过程，而实际渲染则交给开发者决定，更具拓展性</li>\n<li>支持基本的事件监听，如<code>onPlay</code>、<code>onStop</code>、<code>onReset </code>、<code>onEnd</code>，及相应的回调函数</li>\n<li>支持手动式触发动画的各种状态，如<code>play</code>、<code>stop</code>、<code>reset</code>、<code>end</code></li>\n<li>支持自定义路径动画</li>\n<li>支持多组动画的链式触发</li>\n</ul>\n<p>完整的项目在这里：<a href=\"https://github.com/JS-Hao/timeline\">点赞行为高尚！</a>，欢迎各种吐槽和指正^_^</p>\n<p>OK，话不多说，现在正式开始。</p>\n<p>作为开篇，本节将介绍的是最基本、最核心的步骤——构建“帧-值”对应的函数关系，完成“由帧到值”的计算过程。</p>\n<h3>目录结构</h3>\n<p>首先介绍下我们的项目目录结构：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74f79fb6456764828995\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/timeline\r\n    /index..js\r\n    /core.js\r\n    /tween.js</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6456764828995-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6456764828995-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6456764828995-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6456764828995-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74f79fb6456764828995-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">timeline</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6456764828995-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">js</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6456764828995-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">core</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">js</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6456764828995-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tween</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">js</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><code>/timeline</code>是本项目的根目录，各文件的作用分别如下：</p>\n<ul>\n<li><code>index.js</code> 项目入口文件</li>\n<li><code>core.js</code> 动画核心文件</li>\n<li><code>easing.js</code> 存放基本缓动函数</li>\n</ul>\n<h3>引入缓动函数</h3>\n<p>所谓动画，简单来说，就是在一段时间内不断改变目标某些状态的结果。<strong>这些状态值在运动过程中，随着时间不断发生变化，状态值与时间存在一一对应的关系，这就是所谓的“帧-值”对应关系，常说的<a href=\"http://easings.net/zh-cn\">动画缓动函数</a>也是相同的道理。</strong></p>\n<p>有了这种函数关系，给定任意一个时间点，我们都能计算出对应的状态值。OK，那如何在动画中引入缓动函数呢？不说废话，直接上代码：</p>\n<p>首先我们在core.js中创建了一个<code>Core</code>类：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74f79fb645f741731273\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Core {\r\n  constructor(opt) {\r\n    // 初始化，并将实例当前状态设置为'init'\r\n    this._init(opt);\r\n    this.state = 'init';\r\n  }\r\n  \r\n  _init(opt) {\r\n    this._initValue(opt.value);\r\n    // 保存动画总时长、缓动函数以及渲染函数\r\n    this.duration = opt.duration || 1000;\r\n    this.timingFunction = opt.timingFunction || 'linear';\r\n    this.renderFunction = opt.render || this._defaultFunc;\r\n\r\n    // 未来会用到的事件函数\r\n    this.onPlay = opt.onPlay;\r\n    this.onEnd = opt.onEnd;\r\n    this.onStop = opt.onStop;\r\n    this.onReset = opt.onReset;\r\n  }\r\n\r\n  _initValue(value) {\r\n    // 初始化运动值\r\n      this.value = [];\r\n      value.forEach(item =&gt; {\r\n        this.value.push({\r\n          start: parseFloat(item[0]),\r\n          end: parseFloat(item[1]),\r\n        });\r\n      });\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb645f741731273-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb645f741731273-32\">32</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Core</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">constructor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 初始化，并将实例当前状态设置为'init'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-7\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_initValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 保存动画总时长、缓动函数以及渲染函数</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">renderFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">render</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_defaultFunc</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 未来会用到的事件函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onReset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onReset</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_initValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 初始化运动值</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-24\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-25\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-27\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">start</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseFloat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-28\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">end</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseFloat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-30\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb645f741731273-31\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb645f741731273-32\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p>我们在构造函数中对实例调用<code>_init</code>函数，对其初始化：将传入的参数保存在实例属性中。</p>\n<p>当你看到<code>_initValue</code>的时候可能不大明白：外界传入的<code>value</code>到底是啥？其实<code>value</code>是一个数组，<strong>它的每一个元素都保存着独立动画的起始与结束两种状态。</strong>这样说好像有点乱，举个栗子好了：假设我们要创建一个动画，让页面上的div同时往右、左分别平移300px、500px，此外还同时把自己放大1.5倍。在这个看似复杂的动画过程中，其实可以拆解成三个独立的动画，每一动画都有自己的起始与终止值：</p>\n<ul>\n<li>对于往右平移，就是把css属性的<code>translateX</code>的0px变成了300px</li>\n<li>同理，往下平移，就是把<code>tranlateY</code>的0px变成500px</li>\n<li>放大1.5倍，也就是把<code>`scale</code>从1变成1.5</li>\n</ul>\n<p>因此传入的value应该长成这样：<code>[[0, 300], [0, 500], [1, 1.5]]</code> 。我们将数组的每一个元素依次保存在实例的value属性中。</p>\n<p>此外，<code>renderFunction</code>是由外界提供的渲染函数，即<code>opt.render</code>，它的作用是：</p>\n<p>动画运动的每一帧，都会调用一次该函数，并把计算好的当前状态值以参数形式传入，有了当前状态值，我们就可以自由地选择渲染动画的方式啦。</p>\n<p>接下来我们给Core类添加一个循环函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74f79fb6465830670851\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n_loop() {\r\n  const t = Date.now() - this.beginTime,\r\n        d = this.duration,\r\n        func = Tween[this.timingFunction] || Tween['linear'];\r\n\r\n  if (t &gt;= d) {\r\n    this.state = 'end';\r\n    this._renderFunction(d, d, func);\r\n  } else {\r\n    this._renderFunction(t, d, func);\r\n    window.requestAnimationFrame(this._loop.bind(this));\r\n  }\r\n}\r\n\r\n_renderFunction(t, d, func) {\r\n  const values = this.value.map(value =&gt; func(t, value.start, value.end - value.start, d));\r\n  this.renderFunction.apply(this, values);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6465830670851-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6465830670851-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-1\"><span class=\"crayon-e\">_loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beginTime</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'end'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">requestAnimationFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_loop</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-13\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-15\"><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-16\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">values</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6465830670851-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">renderFunction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">values</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6465830670851-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p><code>_loop</code>的作用是：倘若当前时间进度<code>t</code>还未到终点，则根据当前时间进度计算出目标现在的状态值，并以参数的形式传给即将调用的渲染函数，即<code>renderFunction</code>，并继续循环。如果大于<code>duration</code>，则将目标的运动终止值传给<code>renderFunction</code>，运动结束，将状态设为<code>end</code>。</p>\n<p>代码中的<code>Tween</code>是从tween.js文件引入的缓动函数，tween.js的代码如下（网上搜搜基本都差不多= =）:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74f79fb646a978007546\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/*\r\n * t: current time（当前时间）；\r\n * b: beginning value（初始值）；\r\n * c: change in value（变化量）；\r\n * d: duration（持续时间）。\r\n * Get effect on 'http://easings.net/zh-cn'\r\n */\r\n\r\nconst Tween = {\r\n    linear: function (t, b, c, d) {\r\n        return c * t / d + b;\r\n    },\r\n    // Quad\r\n    easeIn: function (t, b, c, d) {\r\n        return c * (t /= d) * t + b;\r\n    },\r\n    easeOut: function (t, b, c, d) {\r\n        return -c * (t /= d) * (t - 2) + b;\r\n    },\r\n    easeInOut: function (t, b, c, d) {\r\n        if ((t /= d / 2)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646a978007546-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646a978007546-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-1\"><span class=\"crayon-c\">/*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-2\"><span class=\"crayon-c\"> * t: current time（当前时间）；</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-3\"><span class=\"crayon-c\"> * b: beginning value（初始值）；</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-4\"><span class=\"crayon-c\"> * c: change in value（变化量）；</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-5\"><span class=\"crayon-c\"> * d: duration（持续时间）。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-6\"><span class=\"crayon-c\"> * Get effect on 'http://easings.net/zh-cn'</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-7\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-9\"><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">linear</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">c *</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// Quad</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">easeIn</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">c *</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">easeOut</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e \">c *</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646a978007546-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">easeInOut</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646a978007546-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p>最后，给<code>Core</code>类增加<code>play</code>方法：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74f79fb646d088566325\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n_play() {\r\n  this.state = 'play';\r\n  this.beginTime = Date.now();\r\n  // 执行动画循环\r\n  const loop = this._loop.bind(this);\r\n  window.requestAnimationFrame(loop);\r\n}\r\n\r\nplay() {\r\n  this._play();\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646d088566325-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646d088566325-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646d088566325-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646d088566325-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646d088566325-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646d088566325-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646d088566325-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646d088566325-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646d088566325-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb646d088566325-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb646d088566325-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74f79fb646d088566325-1\"><span class=\"crayon-e\">_play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646d088566325-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646d088566325-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beginTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646d088566325-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">// 执行动画循环</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646d088566325-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">loop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_loop</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646d088566325-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">requestAnimationFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">loop</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646d088566325-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646d088566325-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646d088566325-9\"><span class=\"crayon-e\">play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb646d088566325-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb646d088566325-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>core.js的完整代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74f79fb6471457659594\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport Tween from './tween';\r\n\r\nclass Core {\r\n    constructor(opt) {\r\n        this._init(opt);\r\n        this.state = 'init';\r\n    }\r\n\r\n    _init(opt) {\r\n    this._initValue(opt.value);\r\n    this.duration = opt.duration || 1000;\r\n    this.timingFunction = opt.timingFunction || 'linear';\r\n    this.renderFunction = opt.render || this._defaultFunc;\r\n\r\n    /* Events */\r\n    this.onPlay = opt.onPlay;\r\n    this.onEnd = opt.onEnd;\r\n    this.onStop = opt.onStop;\r\n    this.onReset = opt.onReset;\r\n  }\r\n\r\n  _initValue(value) {\r\n      this.value = [];\r\n      value.forEach(item =&gt; {\r\n          this.value.push({\r\n              start: parseFloat(item[0]),\r\n              end: parseFloat(item[1]),\r\n          });\r\n      })\r\n  }\r\n\r\n  _loop() {\r\n      const t = Date.now() - this.beginTime,\r\n          d = this.duration,\r\n          func = Tween[this.timingFunction] || Tween['linear'];\r\n\r\n    if (t &gt;= d) {\r\n        this.state = 'end';\r\n        this._renderFunction(d, d, func);\r\n    } else {\r\n        this._renderFunction(t, d, func);\r\n        window.requestAnimationFrame(this._loop.bind(this));\r\n    }\r\n  }\r\n\r\n  _renderFunction(t, d, func) {\r\n      const values = this.value.map(value =&gt; func(t, value.start, value.end - value.start, d));\r\n      this.renderFunction.apply(this, values);\r\n  }\r\n\r\n  _play() {\r\n      this.state = 'play';\r\n      this.beginTime = Date.now();\r\n      const loop = this._loop.bind(this);\r\n    window.requestAnimationFrame(loop);\r\n  }\r\n\r\n  play() {\r\n      this._play();\r\n  }\r\n}\r\n\r\nwindow.Timeline = Core;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6471457659594-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6471457659594-63\">63</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">Tween </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'./tween'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-3\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Core</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">constructor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">_init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_initValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">renderFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">render</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_defaultFunc</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* Events */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onReset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onReset</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_initValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-23\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-24\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-25\"><span class=\"crayon-h\">          </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-26\"><span class=\"crayon-h\">              </span><span class=\"crayon-v\">start</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseFloat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-27\"><span class=\"crayon-h\">              </span><span class=\"crayon-st\">end</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseFloat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-28\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-29\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-30\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-32\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-33\"><span class=\"crayon-h\">      </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beginTime</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-34\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-35\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-36\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'end'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-42\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">requestAnimationFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_loop</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-44\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-45\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-46\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-47\"><span class=\"crayon-h\">      </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">values</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-48\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">renderFunction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">values</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-49\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-50\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-51\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-52\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-53\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beginTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-54\"><span class=\"crayon-h\">      </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">loop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_loop</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">requestAnimationFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">loop</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-56\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-57\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-58\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-59\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-60\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-61\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6471457659594-62\"> </div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6471457659594-63\"><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Timeline</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Core</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0094 seconds] -->\r\n<p>在html中引入它后就可以愉快地调用啦^ _ ^</p>\n<p>PS：该项目是用webpack打包并以timeline.min.js作为输出文件，由于暂时没用到index.js文件，因此暂时以core.js作为打包入口啦~</p>\n<div id=\"box\">\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74f79fb6475489959658\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n    &lt;title&gt;&lt;/title&gt;\r\n    &lt;style type=\"text/css\"&gt;\r\n        #box {\r\n            width: 100px;\r\n            height: 100px;\r\n            background: green;\r\n        }\r\n    &lt;/style&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div id=\"box\"&gt;&lt;/div&gt;\r\n&lt;script type=\"text/javascript\" src=\"timeline.js\"&gt;&lt;/script&gt;\r\n&lt;script type=\"text/javascript\"&gt;\r\n    const box = document.querySelector('#box');\r\n    const timeline = new Timeline({\r\n        duration: 3000,\r\n        value: [[0, 400], [0, 600]],\r\n        render: function(value1, value2) {\r\n            box.style.transform = `translate(${ value1 }px, ${ value2 }px)`;\r\n        },\r\n        timingFunction: 'easeOut',\r\n    })\r\n    timeline.play();\r\n&lt;/script&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74f79fb6475489959658-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a74f79fb6475489959658-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">DOCTYPE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">title</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">title</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-ta\">&lt;style </span><span class=\"crayon-e \">type</span><span class=\"crayon-k \">=\"text/css\"&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-6\"><span class=\"crayon-k \">        #box </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-e \">width</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">100px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-e \">height</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">100px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-e \">background</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">green</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-ta\">&lt;/style&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-12\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-13\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-14\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-e \">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"box\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-15\"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/javascript\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"timeline.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-16\"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/javascript\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">box</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">querySelector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'#box'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeline</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Timeline</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">duration</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3000</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">600</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">render</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">box</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">style</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">transform</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">translate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">value1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">px</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">value2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">px</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'easeOut'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">timeline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-27\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74f79fb6475489959658-28\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74f79fb6475489959658-29\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0057 seconds] -->\r\n\n</div>\n<p>看到这里，本文就差不多结束了，下节将介绍如何在项目中加入各类事件监听及触发方式。</p>\n<p>本系列文章将会继续不定期更新，欢迎各位大大指正^_^</p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93905\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93905votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93905\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "732dbf3c46e11475e94f9e2386b2d190", "title": "如何构建你的第一个 Vue.js 组件", "url": "http://web.jobbole.com/93895/", "create_date": "2018-02-03", "front_image_url": ["https://static.oschina.net/uploads/space/2018/0119/114752_k7sk_2896879.gif"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "1", "tags": "JavaScript,Vue", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/build-your-first-vue-js-component-2dc204bca514\">Sarah Dayan</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/build-your-first-vue-js-component\">开源中国 - 凉凉</a>   </div><div>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0119/114752_k7sk_2896879.gif\"></p>\n<p>记得当那天使用 CakePHP 开发的时候，我很喜欢它简易入门的特性。其文档不仅结构严密，详尽，而且对用户友好。多年以后，我在 Vue.js 上找到了同样的感觉。然而，与 Cake 相比，Vue 文档还有一个缺点：（缺乏）真实的项目教程。</p>\n<p>不管框架的文档有多好，对与所有人来说都是不够的。阅读有关的概念并不是总能帮助你了解更多东西，也不能帮助你理解如何使用它们来实际做出某些事情。如果你和我一样，你会在实践过程中学到更多，在你编码的时候参考文档，因为你需要它们。</p>\n<p>在本教程中，我们将构建一个星级评分系统组件。我们将在需要时介绍几个 Vue.js 概念，并介绍为什么要使用它们。</p>\n<p>TL;DR: 这篇文章详细的介绍了如何使用 vue.js 和为什么使用 vue.js 。它旨在帮助掌握 Vue.js 的一些核心概念，并教你如何为未来的项目做出设计决策。如果你想了解整个思维过程，请继续阅读。否则，你可以直接查看 <em><a href=\"https://codesandbox.io/s/38k1y8x375\" target=\"_blank\" rel=\"nofollow\">CodeSandbox</a> </em>上的最终代码。</p>\n<p><strong>入门指南</strong></p>\n<p>Vue.js（正确地）以一个简单的脚本引入足以开始运行，但是当你想使用<a href=\"https://vuejs.org/v2/guide/single-file-components.html\" target=\"_blank\" rel=\"nofollow\">single-file components</a>，情况会有所不同。 现在，你不必这样构建组件。 你可以很容易地用 Vue.component 定义一个全局组件。</p>\n<p>问题在于，这样做需要权衡使用字符串模板，没有 CSS 支持，也没有构建步骤（所以没有预处理器）。 然而，我们想要更深入地学习如何构建一个真正的在项目中使用的实际组件。出于这些原因，我们将使用由 Webpack 提供支持的实际设置。</p>\n<p>为了保持简单并减少配置时间，我们将使用 <a href=\"https://github.com/vuejs/vue-cli\" target=\"_blank\" rel=\"nofollow\">vue-cli</a> 和简单的 <a href=\"https://github.com/vuejs-templates/webpack-simple\" target=\"_blank\" rel=\"nofollow\">webpack-simple</a> Vue.js模板。</p>\n<p>首先，你需要全局安装 vue-cli。启动你的终端并键入以下内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb55f8213975291\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnpm install -g vue-cli</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb55f8213975291-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb55f8213975291-1\"><span class=\"crayon-e\">npm </span><span class=\"crayon-v\">install</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">g</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vue</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cli</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>你现在可以通过几个按键生成随时可用的 Vue.js 样板。然后继续输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5603578930440\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvue init webpack-simple path/to/my-project</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5603578930440-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5603578930440-1\"><span class=\"crayon-e\">vue </span><span class=\"crayon-e\">init </span><span class=\"crayon-v\">webpack</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">simple </span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">my</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">project</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>你会碰到几个问题。 选择除“使用sass”之外的所有默认值，你应该回答 yes(y)。然后，vue-cli 将初始化项目并创建 package.json 文件。完成后，可以导航到项目目录，安装依赖关系，然后运行项目：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5607081967068\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncd path/to/my-project npm install npm run dev</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5607081967068-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5607081967068-1\"><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">my</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">project </span><span class=\"crayon-e\">npm </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">npm </span><span class=\"crayon-e\">run </span><span class=\"crayon-v\">dev</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>就这么简单！Webpack 将开始在端口 8080（如果可用）上为你的项目提供服务并在浏览器中启动它。如果一切顺利，你应该看到这样的欢迎页面。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0119/114240_8uXP_2896879.png\"></p>\n<p><strong>我们做到了吗？</strong></p>\n<p>可以说我们做到了！为了正确调试你的Vue.js组件，你需要正确的工具。 继续并安装Vue.js devtools浏览器扩展(<a href=\"https://addons.mozilla.org/en-US/firefox/addon/vue-js-devtools\" target=\"_blank\" rel=\"nofollow\">Firefox</a>/<a href=\"https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd\" target=\"_blank\" rel=\"nofollow\">Chrome</a>/<a href=\"https://github.com/vuejs/vue-devtools/blob/master/docs/workaround-for-safari.md\" target=\"_blank\" rel=\"nofollow\">Safari</a>)。</p>\n<p><strong>你的第一个组件</strong></p>\n<p>Vue.js最好的功能之一是single-file components（SFC）。 它们允许您在一个文件中定义组件的结构，样式和行为，而不存在混合HTML，CSS和JavaScript的常见缺陷。</p>\n<p>SFC以.vue扩展名结尾，并具有以下结构：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb560c562210264\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;template&gt;\r\n\r\n    &lt;!-- Your HTML goes here --&gt;\r\n\r\n&lt;/template&gt;\r\n\r\n\r\n&lt;script&gt;\r\n\r\n   /* Your JS goes here */\r\n\r\n&lt;/script&gt;\r\n\r\n\r\n&lt;style&gt;\r\n\r\n   /* Your CSS goes here */\r\n\r\n&lt;/style&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560c562210264-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560c562210264-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">template</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Your</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HTML</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">goes</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">here</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-5\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">template</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-8\"><span class=\"crayon-ta\">&lt;script&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-10\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">/* Your JS goes here */</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-12\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-15\"><span class=\"crayon-ta\">&lt;style&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-16\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-17\"><span class=\"crayon-h\">   </span><span class=\"crayon-c\">/* Your CSS goes here */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560c562210264-18\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c5beb560c562210264-19\"><span class=\"crayon-ta\">&lt;/style&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>让我们开始创建我们的第一个组件：在/src/components中创建一个Rating.vue文件，然后复制/粘贴上面的代码片段。然后，打开/src/main.js并调整现有的代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb560f661100066\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport Vue from 'vue'\r\nimport Rating from './components/Rating'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb560f661100066-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb560f661100066-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb560f661100066-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">Vue </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'vue'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb560f661100066-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">Rating </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'./components/Rating'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p> </p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5612774917872\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnew Vue({\r\n  el: '#app',\r\n  template: '',\r\n  components: { Rating }\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5612774917872-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5612774917872-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5612774917872-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5612774917872-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5612774917872-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5612774917872-1\"><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Vue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5612774917872-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">el</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'#app'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5612774917872-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5612774917872-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">components</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Rating</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5612774917872-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>最后，添加一些HTML代码到你的Rating.vue文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5615119078859\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;template&gt;\r\n  &lt;ul&gt;\r\n    &lt;li&gt;One&lt;/li&gt;\r\n    &lt;li&gt;Two&lt;/li&gt;\r\n    &lt;li&gt;Three&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n&lt;/template&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5615119078859-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5615119078859-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5615119078859-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5615119078859-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5615119078859-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5615119078859-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5615119078859-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5615119078859-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5615119078859-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5615119078859-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">One</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5615119078859-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">Two</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5615119078859-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">Three</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5615119078859-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5615119078859-7\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>现在看看你的浏览器中的页面，你应该看到列表。Vue.js会将您的组件附加到index.html中的#app元素。如果检查HTML，则应该看不到#app元素的符号：Vue.js将其替换为组件。</p>\n<p>旁注：你有没有注意到你甚至不需要重新加载页面？这是因为Webpack的<a href=\"https://github.com/vuejs/vue-loader\" target=\"_blank\" rel=\"nofollow\">vue-loader</a>带有一个热加载功能。与实时重新加载或浏览器同步相反，每次更改文件时，热重新加载都不会刷新页面。而是监视组件更改，只刷新它们，保持状态不变。</p>\n<p>现在，我们已经花了一些时间来设置，是时候真正写出有意义的代码了。</p>\n<p><strong>模板</strong></p>\n<p>我们将使用 <a href=\"https://www.npmjs.com/package/vue-awesome\" target=\"_blank\" rel=\"nofollow\">vue-awesome</a>，一个用 <a href=\"http://fontawesome.io/\" target=\"_blank\" rel=\"nofollow\">Font Awesome icons</a> 构建的 Vue.js 的 SVG 图标组件。我们可以只加载我们需要的图标，使用 npm（或 Yarn）进行安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5619922546574\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnpm install vue-awesome</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5619922546574-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5619922546574-1\"><span class=\"crayon-e\">npm </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">vue</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">awesome</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p> </p>\n<p>然后编辑你的组件，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb561c475186002\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;template&gt;\r\n  &lt;div&gt;\r\n    &lt;ul&gt;\r\n      &lt;li&gt;&lt;icon name=\"star\"/&gt;&lt;/li&gt;\r\n      &lt;li&gt;&lt;icon name=\"star\"/&gt;&lt;/li&gt;\r\n      &lt;li&gt;&lt;icon name=\"star\"/&gt;&lt;/li&gt;\r\n      &lt;li&gt;&lt;icon name=\"star-o\"/&gt;&lt;/li&gt;\r\n      &lt;li&gt;&lt;icon name=\"star-o\"/&gt;&lt;/li&gt;\r\n    &lt;/ul&gt;\r\n    &lt;span&gt;3 of 5&lt;/span&gt;\r\n  &lt;/div&gt;\r\n&lt;/template&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb561c475186002-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb561c475186002-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb561c475186002-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb561c475186002-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb561c475186002-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb561c475186002-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb561c475186002-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb561c475186002-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb561c475186002-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb561c475186002-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb561c475186002-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb561c475186002-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb561c475186002-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb561c475186002-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb561c475186002-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">ul</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb561c475186002-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb561c475186002-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb561c475186002-6\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb561c475186002-7\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star-o\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb561c475186002-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star-o\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb561c475186002-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-c \">/ul&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb561c475186002-10\"><span class=\"crayon-c \">    &lt;span&gt;3 of 5&lt;/s</span><span class=\"crayon-v\">pan</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb561c475186002-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb561c475186002-12\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5620941487985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;script&gt;\r\nimport 'vue-awesome/icons/star'\r\nimport 'vue-awesome/icons/star-o'\r\nimport Icon from 'vue-awesome/components/Icon'\r\nexport default {\r\n  components: { Icon }\r\n}\r\n&lt;/script&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5620941487985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5620941487985-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5620941487985-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5620941487985-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5620941487985-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5620941487985-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5620941487985-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5620941487985-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5620941487985-1\"><span class=\"crayon-ta\">&lt;script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5620941487985-2\"><span class=\"crayon-i\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'vue-awesome/icons/star'</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5620941487985-3\"><span class=\"crayon-i\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'vue-awesome/icons/star-o'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5620941487985-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">Icon </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'vue-awesome/components/Icon'</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5620941487985-5\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5620941487985-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">components</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Icon</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5620941487985-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5620941487985-8\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>好吧，让我们慢一点，解释一下。</p>\n<p>Vue.js 使用原生 ES6 模块来处理依赖和导出组件。</p>\n<p>图标是一个 Vue.js SFC，就像我们正在构建的这一个。如果你打开这个文件，你会发现它和我们的结构完全一样。</p>\n<p>export default 模块将对象文字导出为我们组件的视图模型。我们在组件属性中注册了 Icon 组件，所以我们可以在本地使用它。</p>\n<p>最后，我们在 HTML 中使用了 Icon，并传递了一个 name 属性来定义我们想要的图标。通过将组件转换为 kebab-case（例如：MyComponent 变成 ），可以将组件用作自定义 HTML 标记。我们不需要在组件内嵌入任何东西，所以我们使用了一个自闭合标签。</p>\n<p><strong>旁注：</strong>你有没有注意到我们在 HTML 中添加了一个</p>\n<div>标签？这是因为我们还在根级别的中添加了一个计数器，Vue.js 中的组件模板只接受一个根元素。如果你不遵守，会得到一个编译错误。<br>\n<strong>样式</strong>如果你已经使用过 CSS，你应该知道一个主要的挑战就是要处理它的全局性。嵌套一直被认为是解决这个问题的方法。但现在我们知道它很快就会导致特殊性问题，使得样式难以覆盖，不能被重用，并且这将是一个难以衡量的噩梦。于是发明了像 <a href=\"http://getbem.com/\" target=\"_blank\" rel=\"nofollow\">BEM </a>这样的方法来绕过这个问题，并且通过命名空间类来保持低的特异性。有一段时间，这是编写干净和可扩展的 CSS 的理想方法。然后，像 Vue.js 或 React 这样的框架和库就出现了，并将 scoped styling 引入表中。React 具有样式化的组件，Vue.js 具有 scoped styling CSS。它可以让你编写特定组件的 CSS，而不必拿出一些技巧来保持它的包含结构。您使用“普通”类名编写常规 CSS，Vue.js 通过将数据属性分配给 HTML 元素并将其附加到编译样式来处理范围限定。\n<p>让我们在组件上添加一些简单的类：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5624805702885\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;template&gt;\r\n  &lt;div class=\"rating\"&gt;\r\n    &lt;ul class=\"list\"&gt;\r\n      &lt;li class=\"star active\"&gt;&lt;icon name=\"star\"/&gt;&lt;/li&gt;\r\n      &lt;li class=\"star active\"&gt;&lt;icon name=\"star\"/&gt;&lt;/li&gt;\r\n      &lt;li class=\"star active\"&gt;&lt;icon name=\"star\"/&gt;&lt;/li&gt;\r\n      &lt;li class=\"star\"&gt;&lt;icon name=\"star-o\"/&gt;&lt;/li&gt;\r\n      &lt;li class=\"star\"&gt;&lt;icon name=\"star-o\"/&gt;&lt;/li&gt;\r\n    &lt;/ul&gt;\r\n    &lt;span&gt;3 of 5&lt;/span&gt;\r\n  &lt;/div&gt;\r\n&lt;/template&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5624805702885-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5624805702885-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5624805702885-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5624805702885-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5624805702885-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5624805702885-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5624805702885-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5624805702885-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5624805702885-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5624805702885-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5624805702885-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5624805702885-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5624805702885-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5624805702885-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"rating\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5624805702885-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">ul </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"list\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5624805702885-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star active\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5624805702885-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star active\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5624805702885-6\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star active\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5624805702885-7\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star-o\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5624805702885-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">li </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">icon </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star-o\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5624805702885-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-c \">/ul&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5624805702885-10\"><span class=\"crayon-c \">    &lt;span&gt;3 of 5&lt;/s</span><span class=\"crayon-v\">pan</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5624805702885-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5624805702885-12\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p>和 css 样式：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5627393190697\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;style scoped&gt;\r\n  .rating {\r\n    font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n    font-size: 14px;\r\n    color: #a7a8a8;\r\n  }\r\n  .list {\r\n    margin: 0 0 5px 0;\r\n    padding: 0;\r\n    list-style-type: none;\r\n  }\r\n  .list:hover .star {\r\n    color: #f3d23e;\r\n  }\r\n  .star {\r\n    display: inline-block;\r\n    cursor: pointer;\r\n  }\r\n  .star:hover ~ .star:not(.active) {\r\n    color: inherit;\r\n  }\r\n  .active {\r\n    color: #f3d23e;\r\n  }\r\n&lt;/style&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5627393190697-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5627393190697-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-1\"><span class=\"crayon-ta\">&lt;style </span><span class=\"crayon-k \">scoped&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-2\"><span class=\"crayon-k \">  .rating </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">font-family</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Avenir'</span><span class=\"crayon-i \">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">Helvetica,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">Arial,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">sans-serif</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">font-size</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">14px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">color</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">#a7a8a8</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-k \">.list </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">margin</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">5px</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">padding</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">list-style-type</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">none</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-k \">.list:hover .star </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">color</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">#f3d23e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-k \">.star </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">display</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">inline-block</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">cursor</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">pointer</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-18\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-19\"><span class=\"crayon-h\">  </span><span class=\"crayon-k \">.star:hover ~ .star:not(.active) </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">color</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">inherit</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-k \">.active </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">color</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">#f3d23e</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5627393190697-24\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5627393190697-25\"><span class=\"crayon-ta\">&lt;/style&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>看到那个<em>scoped</em>属性了吗？ 这是告诉 Vue.js 去范围化样式，所以他们作用范围不会涵盖到其他地方。 如果您在 index.html 中正确地复制/粘贴 HTML 代码，您将注意到您的样式不适用：这是因为它们的作用域是组件。</p>\n<p><strong>那么预处理器呢？</strong></p>\n<p>Vue.js 使得从简单的 CSS 切换到您最喜欢的预处理器变得轻而易举。你所需要的只是适当的 Webpack 加载器和</p>\n<p>现在我们可以使用 Sass 编写组件级样式，导入变量，颜色定义或混合等部分。如果您更喜欢缩进语法（或“sass”符号），只需在 lang 属性中将 scss 切换 sass 即可。</p>\n<p><strong>行为</strong></p>\n<p>现在我们的组件看起来不错，现在是时候让它开始工作了。目前，我们有一个硬编码的模板。让我们设置一些初始的模拟状态，并调整模板，使其显示出来：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb562b762819480\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;script&gt;\r\n  ...\r\n  export default {\r\n    components: { Icon },\r\n    data() {\r\n      return {\r\n        stars: 3,\r\n        maxStars: 5\r\n      }\r\n    }\r\n  }\r\n&lt;/script&gt;\r\n/* ... */\r\n&lt;template&gt;\r\n  &lt;div class=\"rating\"&gt;\r\n    &lt;ul class=\"list\"&gt;\r\n      &lt;li v-for=\"star in maxStars\" :class=\"{ 'active': star &lt;= stars }\" class=\"star\"&gt;\r\n        &lt;icon :name=\"star &lt;= stars ? 'star' : 'star-o'\"/&gt;\r\n      &lt;/li&gt;\r\n    &lt;/ul&gt;\r\n    &lt;span&gt;3 of 5&lt;/span&gt;\r\n  &lt;/div&gt;\r\n&lt;/template&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb562b762819480-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb562b762819480-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-1\"><span class=\"crayon-ta\">&lt;script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">components</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Icon</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">data</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-6\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">stars</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">maxStars</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-12\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-13\"><span class=\"crayon-c\">/* ... */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-14\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"rating\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">ul </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"list\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-17\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">li</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">v-for</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star in maxStars\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"{ 'active': star &lt;= stars }\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">icon</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-e \">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"star &lt;= stars ? 'star' : 'star-o'\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-19\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">li</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-c \">/ul&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-21\"><span class=\"crayon-c \">    &lt;span&gt;3 of 5&lt;/s</span><span class=\"crayon-v\">pan</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb562b762819480-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb562b762819480-23\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>我们在这里所做的是使用 Vue 的数据来设置组件状态。你在 data 中定义的每个属性都是<strong>有响应性的</strong>：如果它发生变化，它将反映在视图中。</p>\n<p>我们正在创建一个可重用的组件，因此 data 需要成为工厂函数而不是对象文字。这样我们就得到了一个新的对象，而不是一个可以跨几个组件共享的现有对象。</p>\n<p>我们的 data 工厂返回两个属性：stars，当前“活动”的 star 数和 maxStars，还有一个就是组件中 star 的总数。因为我们会适配我们的模板规则，所以它反映了组件的实际状态。Vue.js 带有一堆指令，可以让您将演示逻辑添加到模板中，而无需将其与纯 JavaScript 代码混合。v-fordirective 遍历任何可迭代的对象（数组，对象文字，映射等）。它也可以把一个数字作为一个范围重复 x 次、这就是我们用 v-for=”star in maxStars” 所做的，所以我们对组件中的每个星星都有一个&lt;li&gt;。<br>\n您可能已经注意到一些属性以冒号为前缀，这是 v-bind 指令的缩写，它将属性动态绑定到表达式。我们可以把它写成长的形式，v-bind:class。当 star 处于活动状态时，我们需要在&lt;li&gt;元素上添加 active 类。在我们的项目下，这意味着每个&lt;li&gt;的索引小于 stars 应该有 active 类。我们在 :class 指令中使用了一个表达式，当当前 star 小于总 star 数时，才会追加 active。同样条件下我们使用三元运算符来定义 Icon 组件使用的什么样的图标：star 或 star-o。<strong>那计数器呢？</strong>现在我们的 star 列表是绑定到实际的数据，现在我们是时候对计数器也执行相同的操作。最简单的方法是使用带有 mustache 语法的文本插值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5630425595176\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;span&gt;{{ stars }} of {{ maxStars }}&lt;/span&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5630425595176-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5630425595176-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">span</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stars</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">maxStars</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">span</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>很简单，不是吗？ 现在在这种况下，这是诀窍。 但是，如果我们需要一个更复杂的 JavaScript 表达式，最好将其抽象到一个<strong>计算属性</strong>中。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5633942701675\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexport default {\r\n  ...\r\n  computed: {\r\n    counter() {\r\n      return `${this.stars} of ${this.maxStars}`\r\n    }\r\n  }\r\n}\r\n/* ... */\r\n{{ counter }}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5633942701675-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5633942701675-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5633942701675-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5633942701675-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5633942701675-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5633942701675-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5633942701675-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5633942701675-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5633942701675-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5633942701675-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5633942701675-1\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5633942701675-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5633942701675-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">computed</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5633942701675-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">counter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5633942701675-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stars</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">maxStars</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5633942701675-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5633942701675-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5633942701675-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5633942701675-9\"><span class=\"crayon-c\">/* ... */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5633942701675-10\"><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">counter</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>在这里，这是<strong>矫枉过正</strong>。 我们可以避开模板内表达式，并保持可读性。然而，当你不得不处理更复杂的逻辑时，记住计算的属性。</p>\n<p>另一件我们需要做的是提供一种方法来隐藏计数器，如果我们不需要它的时候。 最简单的方法是使用带有布尔值的 v-if 指令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5636090504185\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;span v-if=\"hasCounter\"&gt;{{ stars }} of {{ maxStars }}&lt;/span&gt;\r\n/* ... */\r\nexport default {\r\n  ...\r\n  data() {\r\n    return {\r\n      stars: 3,\r\n      maxStars: 5,\r\n      hasCounter: true\r\n    }\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5636090504185-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5636090504185-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5636090504185-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5636090504185-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5636090504185-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5636090504185-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5636090504185-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5636090504185-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5636090504185-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5636090504185-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5636090504185-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5636090504185-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5636090504185-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">span</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">v-if</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"hasCounter\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stars</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">maxStars</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">span</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5636090504185-2\"><span class=\"crayon-c\">/* ... */</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5636090504185-3\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5636090504185-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5636090504185-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">data</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5636090504185-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5636090504185-7\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">stars</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5636090504185-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">maxStars</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5636090504185-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">hasCounter</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5636090504185-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5636090504185-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5636090504185-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p><strong>交互</strong></p>\n<p>我们差不多完成了，但是我们仍然需要实现组件中最有趣的部分：<strong>响应性</strong>。我们将使用 v-on，这是处理事件和方法的 Vue.js 指令，可以附加所有方法的 Vue.js 属性</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5639954538098\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;template&gt;\r\n  ...\r\n  &lt;li @click=\"rate(star)\" ...&gt;\r\n  ...\r\n&lt;/template&gt;\r\n/* ... */\r\nexport default {\r\n  ...\r\n  methods: {\r\n    rate(star) {\r\n      // do stuff\r\n    }\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5639954538098-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5639954538098-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5639954538098-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5639954538098-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5639954538098-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5639954538098-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5639954538098-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5639954538098-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5639954538098-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5639954538098-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5639954538098-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5639954538098-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5639954538098-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5639954538098-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5639954538098-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5639954538098-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5639954538098-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">li</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e \">click</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"rate(star)\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5639954538098-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5639954538098-5\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5639954538098-6\"><span class=\"crayon-c\">/* ... */</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5639954538098-7\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5639954538098-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5639954538098-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">methods</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5639954538098-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">rate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">star</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5639954538098-11\"><span class=\"crayon-h\">      </span><span class=\"crayon-c\">// do stuff</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5639954538098-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5639954538098-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5639954538098-14\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>我们在&lt;li&gt;上添加了 <a href=\"http://www.jobbole.com/members/pjclick\">@click</a> 属性，这是 v-on:click 的简写。该指令包含对我们在组件的 methods 属性中定义的 rate 方法的调用。<br>\n<em><strong>“等一下…这看起来非常像熟悉的 HTML 的 onclick 属性。在 HTML 中使用内联 JavaScript 不是一个过时和不好的做法吗？“</strong></em>确实如此，但是即使语法看起来很像 onclick，但比较两者是一个错误。当你构建一个 Vue.js 组件时，你不应该把它看作是分离的 HTML/CSS/JS，而应该是一个使用多种语言的组件。当项目在浏览器中开启服务或编译生产时，所有的 HTML 和指令都被编译成普通的 JavaScript。如果您检查已渲染的 HTML，您将看不到您的指令的任何标志，也没有任何 onclick 属性。Vue.js 会编译好你的组件并创建合适的绑定。</p>\n<p>这也是为什么您可以从模板访问组件的上下文的原因：因为指令绑定到视图模型。与具有单独 HTML 的传统项目相反，模板是组件的组成部分。</p>\n<p>回到我们的 rate 方法。我们需要将 stars 变为 clicked 元素的索引，所以我们通过 <a href=\"http://www.jobbole.com/members/pjclick\">@click</a> 指令的索引，可以做到以下几点：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb563d846687462\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexport default {\r\n  ...\r\n  methods: {\r\n    rate(star) {\r\n      this.stars = star\r\n    }\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb563d846687462-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb563d846687462-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb563d846687462-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb563d846687462-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb563d846687462-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb563d846687462-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb563d846687462-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb563d846687462-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb563d846687462-1\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb563d846687462-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb563d846687462-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">methods</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb563d846687462-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">rate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">star</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb563d846687462-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stars</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">star</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb563d846687462-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb563d846687462-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb563d846687462-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>去查看您的浏览器页面，并尝试点击 star：<strong>它运行成功了</strong>！</p>\n<p>如果你打开浏览器开发者工具栏中的 Vue 面板并选择 组件，当你点击 star 时，你会看到数据的变化。这表明你的 star 属性是<strong>响应性的</strong>：当你改变它的时候，它会把它的改变指派给视图。 这个概念被称为<strong>数据绑定</strong>，如果您使用过 Backbone.js 或 Knockout 之类的框架，您应该熟悉这个概念。 不同之处在于，Vue.js 和 React 一样，<strong>只能在一个方向上进行</strong>：这就是所谓的<strong>单向数据绑定</strong>。不过这个话题值得写一篇单独的文章。</p>\n<p>在这一点上，我们可以认为已完成 —— 但我们可以做更多的工作来改善用户体验。</p>\n<p>现在，我们实际上不能给出 0 的等级，因为点击一个 star 会将它的比率设置为它的索引。更好的方案是重新点击同一颗 star，并切换至其当前状态，而不是保持 active 状态。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5641043997934\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexport default {\r\n  ...\r\n  methods: {\r\n    rate(star) {\r\n      this.stars = this.stars === star ? star - 1 : star\r\n    }\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5641043997934-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5641043997934-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5641043997934-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5641043997934-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5641043997934-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5641043997934-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5641043997934-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5641043997934-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5641043997934-1\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5641043997934-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5641043997934-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">methods</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5641043997934-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">rate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">star</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5641043997934-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stars</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stars</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">star</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">star</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">star</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5641043997934-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5641043997934-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5641043997934-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>现在，如果点击的 star 的索引等于 star 当前值，我们就减少它的值。 否则，我们给它分配 star 值。</p>\n<p>如果我们想要彻底解决，我们还应该添加一个控制层，以确保 star 从来没有被赋予一个没有意义的值。我们需要确保 star 永远不会小于 0，也绝不会比 maxStars 更大，而且它是一个合适的数字。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5644925391152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexport default {\r\n  ...\r\n  methods: {\r\n    rate(star) {\r\n      if (typeof star === 'number' &amp;&amp; star = 0) {\r\n        this.stars = this.stars === star ? star - 1 : star\r\n      }\r\n    }\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5644925391152-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5644925391152-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5644925391152-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5644925391152-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5644925391152-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5644925391152-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5644925391152-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5644925391152-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5644925391152-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5644925391152-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5644925391152-1\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5644925391152-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5644925391152-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">methods</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5644925391152-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">rate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">star</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5644925391152-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">typeof </span><span class=\"crayon-v\">star</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'number'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">star</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5644925391152-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stars</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stars</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">star</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">star</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">star</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5644925391152-7\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5644925391152-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5644925391152-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5644925391152-10\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p><strong>传递 props 属性</strong></p>\n<p>现在，组件的数据在数据属性中被硬编码。如果我们希望我们的组件实际上是可用的，我们需要能够从其实例传递自定义数据。在 Vue.js 中，我们用 <strong>props </strong>做到这一点。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5648668207706\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexport default {\r\n  props: ['grade', 'maxStars', 'hasCounter'],\r\n  data() {\r\n    return {\r\n      stars: this.grade\r\n    }\r\n  },\r\n  ...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5648668207706-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5648668207706-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5648668207706-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5648668207706-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5648668207706-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5648668207706-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5648668207706-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb5648668207706-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5648668207706-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5648668207706-1\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5648668207706-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">props</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'grade'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'maxStars'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'hasCounter'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5648668207706-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">data</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5648668207706-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5648668207706-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">stars</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">grade</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5648668207706-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5648668207706-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb5648668207706-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb5648668207706-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>和在 main.js 文件里：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb564b102534995\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnew Vue({\r\n  el: '#app',\r\n  template: '',\r\n  components: { Rating }\r\n})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564b102534995-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564b102534995-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564b102534995-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564b102534995-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564b102534995-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb564b102534995-1\"><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Vue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564b102534995-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">el</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'#app'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564b102534995-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">template</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564b102534995-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">components</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Rating</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564b102534995-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这里有三件事要注意：</p>\n<p>首先，我们使用 v-bind 简写从组件实例传递 props 属性：这就是 Vue.js 所谓的<strong>动态语法。</strong>当你想要传递一个字符串值时，你不需要知道它的具体值，为此，字面值语法（没有 v-bind 的普通属性）将起作用。但对我们而言，由于我们正在传递数字和布尔值，所以这很重要。</p>\n<p>props 和数据属性在编译时被合并，所以我们不需要改变在视图模型或模板中调用属性的方式。出于同样的原因，我们不能在 props 数据属性中使用相同的名称。</p>\n<p>最后，我们定义了一个级别属性，并将其作为 star 数值属性中的值传递给它。我们之所以这样做，不是直接使用级别属性，而是因为级别改变，值会发生变化。在 Vue.js 中，props 从父级传递给子级，而不是反过来传递，所以你不会改变父级的状态。这将违背 <a href=\"https://vuejs.org/v2/guide/components.html#One-Way-Data-Flow\" target=\"_blank\" rel=\"nofollow\">单向数据流</a> 的原则，使事情难以调试。这就是为什么你<strong>不应该</strong>试图改变子组件内的 prop。相反，定义一个使用 props 的初始值作为自声的本地数据属性。</p>\n<p><strong>最后的润色</strong></p>\n<p>在这一天马上过去之前，我们应该了解 Vue.js 最后一个惊奇的地方：<strong>prop 的验证。</strong></p>\n<p>Vue.js 允许你在传递给组件之前控制 prop。您可以执行四个主要的事情：<strong>检查类型，要求定义一个 prop 属性，设置默认值，并执行自定义验证</strong>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb564f143122357\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexport default {\r\n  props: {\r\n    grade: {\r\n      type: Number,\r\n      required: true\r\n    },\r\n    maxStars: {\r\n      type: Number,\r\n      default: 5\r\n    },\r\n    hasCounter: {\r\n      type: Boolean,\r\n      default: true\r\n    }\r\n  },\r\n  ...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564f143122357-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564f143122357-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564f143122357-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564f143122357-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564f143122357-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564f143122357-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564f143122357-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c5beb564f143122357-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb564f143122357-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-1\"><span class=\"crayon-e\">export</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564f143122357-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">props</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">grade</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564f143122357-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Number</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">required</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564f143122357-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">maxStars</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564f143122357-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Number</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">default</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564f143122357-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">hasCounter</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564f143122357-12\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Boolean</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-13\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">default</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564f143122357-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c5beb564f143122357-16\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c5beb564f143122357-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>我们使用类型检查来确保将正确类型的数据传递给组件。这将对我们忘记使用动态语法来传递非字符串值的错误特别有用。我们也确保通过要求它填写 grade 属性。对于其他 props 属性，我们定义了默认值，所以即使没有传递自定义数据，组件也能正常工作。</p>\n<p>现在我们可以简单地通过执行以下操作来实例化组件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c5beb5652097467459\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;Rating :grade=\"3\"/&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c5beb5652097467459-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c5beb5652097467459-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Rating</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-e \">grade</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"3\"</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>就是这样！您刚刚创建了第一个 Vue.js 组件，并探索了许多概念，包括使用 <a href=\"https://github.com/vuejs/vue-cli\" target=\"_blank\" rel=\"nofollow\">vue-cli</a>、<a href=\"https://vuejs.org/v2/guide/single-file-components.html\" target=\"_blank\" rel=\"nofollow\">single-file components</a> 生成样板程序，导入组件， <a href=\"https://vuejs.org/v2/guide/comparison.html#Component-Scoped-CSS\" target=\"_blank\" rel=\"nofollow\">scoped styling</a>, <a href=\"https://vuejs.org/v2/guide/syntax.html#Directives\" target=\"_blank\" rel=\"nofollow\">directives</a>, <a href=\"https://vuejs.org/v2/guide/events.html#Method-Event-Handlers\" target=\"_blank\" rel=\"nofollow\">event handlers</a>, <a href=\"https://vuejs.org/v2/guide/computed.html#Computed-Properties\" target=\"_blank\" rel=\"nofollow\">computed properties</a>, <a href=\"https://vuejs.org/v2/guide/instance.html#Data-and-Methods\" target=\"_blank\" rel=\"nofollow\">custom methods</a>, <a href=\"https://vuejs.org/v2/guide/components.html#One-Way-Data-Flow\" target=\"_blank\" rel=\"nofollow\">one-way data flow</a>, <a href=\"https://vuejs.org/v2/guide/components.html#Props\" target=\"_blank\" rel=\"nofollow\">props</a> 和 <a href=\"https://vuejs.org/v2/guide/components.html#Prop-Validation\" target=\"_blank\" rel=\"nofollow\">prop validation</a>。这都是 Vue.js 所提供的表层特性！</p>\n<p>这是一个非常详细的教程，所以碰到不明白的地方，建议再次阅读，在部分章节之间暂停和探索和，并<a href=\"https://codesandbox.io/s/38k1y8x375\" target=\"_blank\" rel=\"nofollow\">尝试摆弄下 CodeSandbox 上的源码</a>。</p>\n</div>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93895\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93895votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93895\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "a4f237413f643bff17c43fd58075ce29", "title": "2017 年里学习 JavaScript 感觉如何？", "url": "http://web.jobbole.com/93760/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/12/ab6878fb1aa424f9e1cad62832de5837.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,Javascript", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://web.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/dimple11\">dimple11</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.com/front-end-hacking/how-it-feels-to-learn-javascript-in-2017-a934b801fbe\">Bruce Lewis</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>写给还没开始阅读本文的读者，本文是对《<a href=\"http://web.jobbole.com/88298/\" target=\"_blank\">2016 年里做前端是怎样一种体验</a>》的回复。和其他人的回复不同，这篇文章包含了一款app 的完整代码，这款 app 与之前问到的那款类似。</p>\n<p>问：</p>\n<blockquote><p>嗨，我拿到了一个新的web项目，但是老实说，我已经有几年没怎么敲过web代码了，而且我读了些文章，发现这几年web开发好像光景大变。你是走在最前面的web开发人员，对吧？</p></blockquote>\n<p>答：</p>\n<blockquote><p>我觉得可以这么说。</p></blockquote>\n<p>问：</p>\n<blockquote><p>很酷啊。我需要创建一个能够反映用户最新活动的页面，所以我仅需从REST终端获取数据，然后在某种过滤表中进行展示，并且当服务器发生变化时及时更新数据即可。我在想是不是可以用jQuery来获取和展示数据呢？我知道有更新的框架，但是这些框架我越了解反而越困惑。</p></blockquote>\n<p>答：</p>\n<blockquote><p>jQuery难道不是几年前导致你不做web开发的原因吗？</p></blockquote>\n<p>问：</p>\n<blockquote><p>嗯，我觉得自己没做对，搞不清楚为什么自己的app总是状态诡异，也许你能帮我更好地梳理组织jQuery代码，这样就不会总是麻烦重重了。</p></blockquote>\n<p>答：</p>\n<blockquote><p>谁都会遇到这种事，为了应对变化多端的事件，用jQuery时会改变DOM结构，有的时候事件的处理顺序与我们所想的大不相同，所以对于如何进入一种特定的状态，你绝对会感到大惑不解。</p></blockquote>\n<p>问：</p>\n<blockquote><p>你不会想说服我，让我重返web开发之路吧。</p></blockquote>\n<p>答：</p>\n<blockquote><p>等一等，听我说完。有了现代web框架，你的代码仅需反映数据状态是如何映射到web网页的，这就一下子没那么难懂了。</p></blockquote>\n<p>问：</p>\n<blockquote><p>好的让我来考虑一下……难道不是每次数据一发生变化就重绘一次网页吗？我猜这样也能讲得通，我的用户都呈现在桌面上，所以这没什么大不了的，但是听上去这样会导致移动浏览器运行速度极慢。</p></blockquote>\n<p>答：</p>\n<blockquote><p>并不需每次都重绘网页，现代框架非常智能，它能够理清DOM哪一部分发生了变化，然后只处理这一部分。</p></blockquote>\n<p>问：</p>\n<blockquote><p>这挺有意思的。那我应该选用哪一种框架呢?使用的重头是React, Angular and Ember，对吧?</p></blockquote>\n<p>答：</p>\n<blockquote><p>它们都很好用，如果你想在Handlebars写前端逻辑，用Ember；如果你想用HTML属性写前端逻辑，用Angular或Vue；如果你想用Javascript写前端逻辑，用React，Mithril or Inferno。</p></blockquote>\n<p>问：</p>\n<blockquote><p>我猜一般会用Javascript，但是难道React不用其他的吗……像JSX？</p></blockquote>\n<p>答：</p>\n<blockquote><p>JSX仅是Javascript的一种语法扩展，它可以让你使用HTML标签，从而免于因为写代码而生成DOM元素。</p></blockquote>\n<p>问：</p>\n<blockquote><p>只用JavaScript开发有什么问题呢？</p></blockquote>\n<p>答：</p>\n<blockquote><p>其实没什么大不了的问题，实际上Mithril的文件都是Javascript，我也才发现给一直做HTML/CSS的人提供JSX代码时，获得的反馈要比给他们纯Javascript代码时要好得多。</p></blockquote>\n<p>问：</p>\n<blockquote><p>纯Javascript？我很高兴我并不是唯一一个对JSX没有完全适应的人。你说的都让我想试一下Mithril了，Mithril很流行吗？</p></blockquote>\n<p>答：</p>\n<blockquote><p>它太流行了，不会突然消逝，但是和更大的框架相比，它的流行程度还相差甚远。我最近实际上正在用Ember写一个非常霸气带感的web app。但是考虑到Ember隐藏了一些特定的、我希望你在加速开发的过程中能够直接看见的东西，所以我会很高兴向你展示如何使用Mithril来运行app。</p></blockquote>\n<p>问：</p>\n<blockquote><p>太好了！几小时后我们建立的时候，你能给我展示一下如何建立所有的库、scaffolding和boilerplate代码吗？现在哪种模块打包工具更好用呢，webpack还是browserify？我不得不承认，安装过程是现代web开发当中最让我有压力的。</p></blockquote>\n<p>答：</p>\n<blockquote><p>目前这些你都可以全部跳过，一旦你对现代web开发的主体有了一定的认识和感觉，你仅仅复制一下我做的就可以了，除了babel和rollup之外也没什么了。搭建系统真的只是设计一个现代web app工程中很小的一部分。</p></blockquote>\n<p>问：</p>\n<blockquote><p>全部跳过？但我想让我的web app实际正常运行。</p></blockquote>\n<p>答：</p>\n<blockquote><p>你可以让它正常运行，我向你展示一下。我们现在用Mithril写你的app代码，你说它是一张过滤表，对吧？我们来把<a style=\"color: #000000;\" href=\"https://github.com/brlewis/brlewis.github.io/blob/master/2017/planets.html\">planets.html</a>做成一张planets的过滤表。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e078da545349465618\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">XHTML</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n  &lt;body&gt;\r\n    &lt;div id=\"app\"&gt;Loading...&lt;/div&gt;\r\n    &lt;script src=\"https://unpkg.com/mithril/mithril.js\"&gt;&lt;/script&gt;\r\n    &lt;script src=\"https://unpkg.com/babel-standalone@6/babel.min.js\"&gt;&lt;/script&gt;\r\n    &lt;script type=\"text/jsx\" src=\"planets.jsx\"&gt;&lt;/script&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e078da545349465618-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da545349465618-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da545349465618-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da545349465618-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da545349465618-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da545349465618-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da545349465618-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da545349465618-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da545349465618-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e078da545349465618-1\"><span class=\"crayon-n\">&lt;!DOCTYPE html&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da545349465618-2\"><span class=\"crayon-r \">&lt;html&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da545349465618-3\"><span class=\"crayon-i \">  </span><span class=\"crayon-r \">&lt;body&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da545349465618-4\"><span class=\"crayon-i \">    </span><span class=\"crayon-r \">&lt;div </span><span class=\"crayon-e \">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s \">\"app\"</span><span class=\"crayon-r \">&gt;</span><span class=\"crayon-i \">Loading...</span><span class=\"crayon-r \">&lt;/div&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da545349465618-5\"><span class=\"crayon-i \">    <span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://unpkg.com/mithril/mithril.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da545349465618-6\"><span class=\"crayon-i \">    <span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://unpkg.com/babel-standalone@6/babel.min.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da545349465618-7\"><span class=\"crayon-i \">    <span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/jsx\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"planets.jsx\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da545349465618-8\"><span class=\"crayon-i \">  </span><span class=\"crayon-r \">&lt;/body&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da545349465618-9\"><span class=\"crayon-r \">&lt;/html&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>问：</p>\n<blockquote><p>好吧，你来告诉我Mithril 是什么。另一个库？Babel是什么？</p></blockquote>\n<p>答：</p>\n<blockquote><p>Babel让你使用一些浏览器不支持的现代Javascript语法，你不是非用它不可，但它能让你不用去管浏览器不支持什么，只管敲代码。</p></blockquote>\n<p>问：</p>\n<blockquote><p>哦等等，实际上我读到过这些内容，在浏览器中运行转译器不是不好吗？</p></blockquote>\n<p>答：</p>\n<blockquote><p>是不好，转译器会增加显著的延迟，但是为了学习，用转译器有什么不行的呢？过后是很容易再改的。现在我们通过建立app的状态，开始写planets.jsx文件。</p></blockquote>\n<p>问：</p>\n<blockquote><p>要告诉你的是，我20分钟后要去开会，从我所读到的来看，你一开始说“状态”，那么事情就要变复杂了。也许我们下次可以应该探讨Redux、Flux等。</p></blockquote>\n<p>答：</p>\n<blockquote><p>你写app用到它们的时候，我们可以聊聊。对于这个app，你只需要两个变量：planets数组和一个过滤函数。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e078da54f733966221\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n'use strict';\r\n\r\n/** @jsx m */\r\n\r\nlet planets;\r\nlet planetFilter = planet =&gt; true;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e078da54f733966221-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da54f733966221-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da54f733966221-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da54f733966221-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da54f733966221-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da54f733966221-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e078da54f733966221-1\"><span class=\"crayon-s\">'use strict'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da54f733966221-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a74e078da54f733966221-3\"><span class=\"crayon-c\">/** @jsx m */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da54f733966221-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a74e078da54f733966221-5\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">planets</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da54f733966221-6\"><span class=\"crayon-e\">let </span><span class=\"crayon-v\">planetFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">planet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>问：</p>\n<blockquote><p>等等，变量不是应该设为var，并且不能设为let吗？</p></blockquote>\n<p>答：</p>\n<blockquote><p>它们是一样的，除非let像C或Java中的变量一样有块级作用域，没有什么hoisting。</p></blockquote>\n<p>问：</p>\n<blockquote><p>这样确实已经有一段时间了，我都已经忘了hoisting了。</p></blockquote>\n<p>答：</p>\n<blockquote><p>你可以继续进行，也不用管它，给可能需要再指定的变量定义为let，给其余的定义为const就行了。</p></blockquote>\n<p>问：</p>\n<blockquote><p>你说第二个是过滤函数，箭头是否只是老式函数声明的一种简写呢？</p></blockquote>\n<p>答：</p>\n<blockquote><p>是的，箭头函数和老式带bind（this）函数的语法几乎一样。</p></blockquote>\n<p>问：</p>\n<blockquote><p>哦是的，我记得你曾经过添加bind（this）帮我通查找并修复过漏洞，我想我会喜欢这些箭头函数的。</p></blockquote>\n<p>答：</p>\n<blockquote><p>我打赌你会的，现在我们写一下你app的顶层组件。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e078da554234597138\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass PlanetApp {\r\n  view() {\r\n    return (\r\n      &lt;section&gt;\r\n        &lt;PlanetFilters /&gt;\r\n        &lt;PlanetTable planets={planets} /&gt;\r\n      &lt;/section&gt;\r\n    );\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e078da554234597138-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da554234597138-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da554234597138-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da554234597138-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da554234597138-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da554234597138-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da554234597138-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da554234597138-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da554234597138-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da554234597138-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e078da554234597138-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PlanetApp</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da554234597138-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">view</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da554234597138-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da554234597138-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">section</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da554234597138-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">PlanetFilters</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da554234597138-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">PlanetTable </span><span class=\"crayon-v\">planets</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">planets</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-c \">/&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da554234597138-7\"><span class=\"crayon-c \">      &lt;/s</span><span class=\"crayon-v\">ection</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da554234597138-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da554234597138-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da554234597138-10\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>问：</p>\n<blockquote><p>那个一定是新的ES6类语法，我喜欢它的外观形式，但我不确定HTML和Javascript混在一起会怎么样。</p></blockquote>\n<p>答：</p>\n<blockquote><p>不要将JSX看作混杂进Javascript的HTML，它和hyperscript，也就是创建HTML元素的Javascript是等价的。有很重要的一点要理解：它所编译的Javascript不会生成字符串；它产生的是元素的实际结构，比如说如果你的标签是不平衡的，就不会进行编译。</p></blockquote>\n<p>问：</p>\n<blockquote><p>好吧，我需要点时间来看看我是否会喜欢它。接下来，你能给我展示一下PlanetTable组件吗？</p></blockquote>\n<p>答：</p>\n<blockquote><p>当然，这个的确是你app的核心。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e078da558001019115\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass PlanetTable {\r\n  view() {\r\n    return (\r\n      &lt;table&gt;\r\n        &lt;tr&gt;\r\n          &lt;th&gt;Name&lt;/th&gt;\r\n          &lt;th&gt;Composition&lt;/th&gt;\r\n          &lt;th&gt;Moons&lt;/th&gt;\r\n        &lt;/tr&gt;\r\n            {planets.filter(planetFilter).map(planet =&gt; &lt;PlanetRow planet={planet} /&gt;)}\r\n      &lt;/table&gt;\r\n    );\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e078da558001019115-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da558001019115-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da558001019115-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da558001019115-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da558001019115-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da558001019115-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da558001019115-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da558001019115-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da558001019115-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da558001019115-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da558001019115-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da558001019115-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da558001019115-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da558001019115-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e078da558001019115-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PlanetTable</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da558001019115-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">view</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da558001019115-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da558001019115-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">table</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da558001019115-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">tr</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da558001019115-6\"><span class=\"crayon-h\">          </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">th</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Name</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">th</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da558001019115-7\"><span class=\"crayon-h\">          </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">th</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Composition</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">th</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da558001019115-8\"><span class=\"crayon-h\">          </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">th</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">Moons</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">th</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da558001019115-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">tr</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da558001019115-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">planets</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">filter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">planetFilter</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">planet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">PlanetRow </span><span class=\"crayon-v\">planet</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">planet</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da558001019115-11\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">table</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da558001019115-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da558001019115-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da558001019115-14\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<blockquote><p>多数情况下它的内容只是静态的，但你写的这一行简洁地描述了你app要干的事，要用到planets的一个数组，进行过滤，仅显示应该显示的，而且被过滤的数组会映射到HTML表中的行上。</p></blockquote>\n<p>问：</p>\n<blockquote><p>哦，我想我现在搞懂了！JSX语法只是Javascript的一种表现形式，所以我可以随心所欲地操控它，我猜PlanetRow 组件会变得非常简单，对吗？</p></blockquote>\n<p>答：</p>\n<blockquote><p>是的，多亏了解构赋值，它可能会比你想象的更加简单。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e078da55c558401960\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass PlanetRow {\r\n  view(vnode) {\r\n    const { composition, name, moons } = vnode.attrs.planet;\r\n    return (\r\n      &lt;tr&gt;\r\n        &lt;td&gt;{name}&lt;/td&gt;\r\n        &lt;td&gt;{composition}&lt;/td&gt;\r\n        &lt;td&gt;{moons}&lt;/td&gt;\r\n      &lt;/tr&gt;\r\n    );\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e078da55c558401960-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da55c558401960-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da55c558401960-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da55c558401960-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da55c558401960-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da55c558401960-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da55c558401960-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da55c558401960-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da55c558401960-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da55c558401960-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da55c558401960-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da55c558401960-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e078da55c558401960-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PlanetRow</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da55c558401960-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">view</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">vnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da55c558401960-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">composition</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">moons</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vnode</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">attrs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">planet</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da55c558401960-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da55c558401960-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">tr</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da55c558401960-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">td</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-r\">name</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">td</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da55c558401960-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">td</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">composition</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">td</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da55c558401960-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">td</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">moons</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">td</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da55c558401960-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tr</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da55c558401960-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da55c558401960-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da55c558401960-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>问：</p>\n<blockquote><p>OK，所以我猜你就是用vnode.attrs.planet来获取传入的planet属性的，只需写一行，带个等号，就行了，所以一定……哇，解构赋值，这么长时间你都跑哪儿去了？</p></blockquote>\n<p>答：</p>\n<blockquote><p>我给你说，Javascript要比过去变得有意思得多啦。我在这给你展示一下，甚至当你仅考虑简洁性这一点时，箭头函数都非常好用。</p></blockquote>\n<p>问：</p>\n<blockquote><p>好的，我知道你讲的情况了，它们都是过滤函数，但我打赌所牵扯的事件处理器不可能那么简洁。</p></blockquote>\n<p>答：</p>\n<blockquote><p>就那么简洁，就是有点抽象。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e078da560492751458\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass PlanetFilter {\r\n  view(vnode) {\r\n    const { key, func } = vnode.attrs;\r\n    return (\r\n      &lt;label&gt;\r\n        &lt;input type=\"radio\" name=\"filter\" \r\n               onchange={filterHandler(func)} /&gt; {key}\r\n      &lt;/label&gt;\r\n    );\r\n  }\r\n}\r\n\r\nfunction filterHandler(filterFunction) {\r\n  return function(event) {\r\n    if (event.target.checked) {\r\n      planetFilter = filterFunction;\r\n    }\r\n  };\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da560492751458-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da560492751458-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PlanetFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">view</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">vnode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vnode</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">attrs</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">input </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"radio\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"filter\"</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-7\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">onchange</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-e\">filterHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-11\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-12\"> </div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-13\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">filterHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filterFunction</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">checked</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-16\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">planetFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filterFunction</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da560492751458-18\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da560492751458-19\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>答：</p>\n<blockquote><p>但你需要去开会，又想看它的效果。既然你提到，你需要从服务器中获取数据，那我来把一些数据扔到一个单独的planets.json文件中去。而且现在我们只要通过代码就能获取数据，然后把它们存到方便app获取的地方，进而积累组成顶级组件。瞧，能用了。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a74e078da563562901598\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nm.request({url: 'planets.json'}).then(data =&gt; {\r\n  planets = data;\r\n  m.mount(document.getElementById('app'), PlanetApp);\r\n});</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a74e078da563562901598-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da563562901598-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a74e078da563562901598-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a74e078da563562901598-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a74e078da563562901598-1\"><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">request</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">url</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'planets.json'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">then</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da563562901598-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">planets</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a74e078da563562901598-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getElementById</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'app'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PlanetApp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a74e078da563562901598-4\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>问：</p>\n<blockquote><p>真的吗，这就完了？哇，去年的时候还感觉难得让人望而却步！我得赶紧跑着撤了，但我确实真的对重拾Javascript充满期待，太感谢啦！</p></blockquote>\n<p>答：</p>\n<blockquote><p>当然，任何时候都欢迎找我探讨！</p></blockquote>\n<p>衷心感谢Biagio Azzarelli, Ben Chauvette, Garrick Cheung and Patrik Johnson对这篇文章的草稿给予的反馈意见。</p>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93760\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93760votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93760\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">dimple11</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/28db3e36f17643a752be4b798d5ceabc.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/dimple11\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://web.jobbole.com/author/dimple11/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "e0411b74faf192829ec267265496e370", "title": "JS 在微信、微博、QQ、Safari 唤起 App 的解决方案", "url": "http://web.jobbole.com/93899/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/440e6d5e4452f7dd954a5031f04a58ee.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,app", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000012940046\">会说话的鱼</a>   </div><div>\n<h3>背景</h3>\n<p>最近在做微信、QQ、微博中使用js唤起App，之前也做过类似的功能，不过比较粗糙，考虑的情况不太全，而且那已经是很久之前的事情了，很多技术都已过时，现在有体验更好，功能更加完善的唤起技术，之前的很多的方案，到了现在都已是不太必要了，现在通过这篇文章分享给大家一个全面的、最新的唤起方案，希望对大家有帮忙。</p>\n<h3>最终实现的效果</h3>\n<p>用户点击H5页面的打开App或者下载按钮（这个按钮可能在一个下载入口页、各种分享页面的吸顶或吸底的banner），如果用户已经安装了App，则根据业务跳转到相应的Native页面；如果用户没有安装该应用，则跳到AppStore或者应用市场去下载我们的App。</p>\n<h3>应用流程</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/440e6d5e4452f7dd954a5031f04a58ee.png\"><img class=\"alignnone size-full wp-image-93907\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/440e6d5e4452f7dd954a5031f04a58ee.png\" alt=\"bV2slX\"></a></p>\n<p>首先所有的下载/唤起入口都是一个直接跳转，应该是这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcda9185052364\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;a href=\"https://applink-party.mtime.cn/mtlf\"&gt;下载&lt;/a&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcda9185052364-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcda9185052364-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"https://applink-party.mtime.cn/mtlf\"</span><span class=\"crayon-o\">&gt;</span>下载<span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>或者这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcdb1852225121\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwindow.location.href = 'https://applink-party.mtime.cn/mtlf'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcdb1852225121-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcdb1852225121-1\"><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">location</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">href</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://applink-party.mtime.cn/mtlf'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>所有的业务判断都是<code>mtlf</code>这个页面里面来做，这样有两个好处：</p>\n<ul>\n<li>多业务共用代码。在一个团队中，每个人的业务都可能有一个banner下载，没有比location到一个url更简单的调用方式了</li>\n<li>能够利用<code>universal link</code></li>\n</ul>\n<h3>简单说下<code>universal link</code></h3>\n<h4><code>universal link</code>的优势</h4>\n<p>在iOS9之前，唤起方式和现在安卓是一个的，都是使用<code>scheme</code>进行唤起，这种方式有个小问题，每次唤起，都会给个提示：是否打开xx应用，这样从体验上来讲，又让用户多一步操作。<code>universal link</code>会直接跳转，不会在页面做停留，条件就是在我们项目的根目录，增一个<code>apple-app-site-association.json</code>文件，里面的内容大致是这样：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/25ee238bca0e0b6191af79718e0af53a.png\"><img class=\"alignnone size-full wp-image-93909\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/25ee238bca0e0b6191af79718e0af53a.png\" alt=\"bV2rx8\"></a></p>\n<p>然后iOS的App后台再配置一下，就可以实现直接唤起了！</p>\n<h4><code>universal link</code>配置</h4>\n<p>在H5端怎么才算配置成功了呢？只要我们某一个url在浏览器打开（不管是cdn地址，还是路由转发），看到json文件的内容，H5这边就算配置成功。然后把这个地址，给<code>iOS</code>老司机，和他们一说什么事，他们立刻就知道做什么，就这么简单！</p>\n<h3>微信、微博、QQ、Safari在各平台的唤起方案</h3>\n<h4>唤起流程图</h4>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/28f6f8cbb2852f33dcf711383a73adb9.png\"><img class=\"alignnone size-full wp-image-93908\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/28f6f8cbb2852f33dcf711383a73adb9.png\" alt=\"bV2p56\"></a><br>\n经过长时间的实验，总结了这张在各种情况下，唤起成功/唤起失败的解决方案，我们接下来一个一个的说。</p>\n<h4>微信</h4>\n<p>微信是最重要的一种分享渠道，但是我们能够做的，却不多。之前，<code>iOS</code>下的微信支持<code>universal link</code>这种唤起方式，但是从2018年1月8日之后，<strong>微信把这个给屏蔽了</strong>！！！不管微信基于什么原因，把<code>iOS</code>下这种最便捷的唤起方式屏蔽，我们能做的只能是适应了。so，现在不管是iOS还是android，我们的处理方式是一样的：<strong>都是直接跳到应用宝</strong>。iOS的应用宝会引导找开<code>AppStore</code>，android的应用宝会直接打开App（前提是你已经下载）<br>\n<strong>注</strong>：微信把<code>itunes</code>链接也屏蔽了，所以也没办法直接跳转<code>AppStore</code>，只能借助应用宝来搭这个桥。</p>\n<h4>微博</h4>\n<p>微博目前还支持<code>universal link</code>唤起，我们只需要考虑未下载的情况。</p>\n<ul>\n<li>在<code>iOS</code>下，微博是不支持打开应用宝的链接，所以我们需要引导用户使用<code>Safari</code>打开，像这样：</li>\n</ul>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/391b949b6eb8c31c086d08bcc2184c2f.png\"><img class=\"alignnone size-full wp-image-93904\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/391b949b6eb8c31c086d08bcc2184c2f.png\" alt=\"bV2sbA\"></a></p>\n<ul>\n<li>在<code>android</code>平台下，<strong>使用<code>scheme</code>这种方式是唤不起App的</strong>，但是有特例，同样是<code>scheme</code>，大人点评和网易云音乐就可以唤起，有空大家可以自己试试，所以我们可以推断出，安卓平台下的微博，也有类似微信一样的白名单，在白名单内的，就可以使用<code>scheme</code>唤起，就像微信之于京东，京东在微信里面就是通过<code>scheme</code>方式唤起的。</li>\n</ul>\n<p>so，不管是<code>iOS</code>还是<code>android</code>，我们的方案是：<strong>直接引导用户使用本地浏览器打开</strong>。</p>\n<h4>QQ</h4>\n<ul>\n<li><code>iOS</code>平台下，QQ目前还支持<code>universal link</code>唤起，要是没有安装，QQ下也支持直接打开<code>itunes</code>链接，比较其他应用，QQ支持是最好的。</li>\n<li><code>android</code>平台下，QQ也支持<code>scheme</code>方式唤起，但是<strong>在一些老机型下，QQ会有一定的概率唤起失败</strong>，具体的现象是：第一次打开页面，唤起失败，再次打开，唤起成功。根据现象，我们可以推测出，在QQ的<code>webview</code>中，会对<code>scheme</code>的唤起方式做一些加载时间上的限制，经测试，大约在500ms，超过这个时间值，就会出现唤起失败的情况。为什么第二次打开，唤起成功的概率会大，是因为第一次加载时，已缓存了文件，第二次打开直接加载，这样时间在限制之内。</li>\n</ul>\n<h4>Safari</h4>\n<p>Safari这种情况比较简单，支持<code>universal link</code>，也支持直接打开<code>itunes</code>，so，如图处理就可以了。</p>\n<h4>踩坑</h4>\n<ul>\n<li>\n<ul>\n<li>在<code>iOS9</code>中，<code>Safari</code>不支持直接跳转<code>itunes</code>，so，这种情况需要做兼容处理，可以直接跳到应用宝</li>\n<li>之前看唤起是不是成功了，需要自己来计算时间，因为要是唤起成功了，<code>setInterval</code>的时间就会变慢，经我测试，已经用不到这种方法了，只需要使用<code>document.hidden || document.webkitHidden</code>就可以，兼容性还不错</li>\n<li>判断是不是<code>Safari</code>浏览器时，一般判断都是UA中有没有这个字符串，经测试发现，安卓的UA中，也包含<code>Safari</code>这个字符串（如下UA展示），所以需要加上操作系统的判断</li>\n</ul>\n</li>\n<li>关于<code>Scheme</code>唤起，之前有很多方案，比如：使用<code>iframe</code>、<code><a>标签点击</a></code>、<code>window.location</code>…经测试，只要使用a标签点击，这样兼容性最好，代码大约长这样：</li>\n</ul>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/56750df2a7881aa81a68658adca9ef7f.png\"><img class=\"alignnone size-full wp-image-93902\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/56750df2a7881aa81a68658adca9ef7f.png\" alt=\"bV2syU\"></a></p>\n<h3>关于测试</h3>\n<p>两个平台，这么多情况，要一个一个测试吗？当然要一个一个的验证，但是在开发期间，没有必要改一行，在手机上测试一下，这样效率太低了，尤其是像一样，选了一个安卓4.4的手机，绝对可以磨练你的耐心。为了提高效率，我把我常用到的UA分享给大家，这样在<code>Chrome</code>模拟器里配置一下，就可以本地调试了，常用UA如下：</p>\n<ul>\n<li>\n<h4>iOS-微信</h4>\n</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcdb9106348154\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMozilla/5.0 (iPhone; CPU iPhone OS 11_2_2 like Mac OS X) AppleWebKit/604.4.7 (KHTML, like Gecko) Mobile/15C202 MicroMessenger/6.6.1 NetType/WIFI Language/zh_CN</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcdb9106348154-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcdb9106348154-1\"><span class=\"crayon-v\">Mozilla</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iPhone</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CPU </span><span class=\"crayon-e\">iPhone </span><span class=\"crayon-i\">OS</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11_2_2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-e\">Mac </span><span class=\"crayon-i\">OS</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AppleWebKit</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">604.4.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">KHTML</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-v\">Gecko</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mobile</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15C202</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MicroMessenger</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6.6.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NetType</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">WIFI </span><span class=\"crayon-v\">Language</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">zh_CN</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<ul>\n<li>\n<h4>iOS-QQ</h4>\n</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcdbd011832717\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMozilla/5.0 (iPhone; CPU iPhone OS 11_2_2 like Mac OS X) AppleWebKit/604.4.7 (KHTML, like Gecko) Mobile/15C202 QQ/7.3.5.473 V1_IPH_SQ_7.3.5_1_APP_A Pixel/1125 Core/UIWebView Device/Apple(iPhone X) NetType/WIFI QBWebViewType/1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcdbd011832717-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcdbd011832717-1\"><span class=\"crayon-v\">Mozilla</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iPhone</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CPU </span><span class=\"crayon-e\">iPhone </span><span class=\"crayon-i\">OS</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11_2_2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-e\">Mac </span><span class=\"crayon-i\">OS</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AppleWebKit</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">604.4.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">KHTML</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-v\">Gecko</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mobile</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15C202</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">QQ</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7.3.5.473</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">V1_IPH_SQ_7</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">3.5_1_APP_A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Pixel</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1125</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Core</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">UIWebView </span><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">Apple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">iPhone</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NetType</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">WIFI </span><span class=\"crayon-v\">QBWebViewType</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p>\n<ul>\n<li>\n<h4>iOS-微博</h4>\n</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcdc0085795552\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMozilla/5.0 (iPhone; CPU iPhone OS 11_2_2 like Mac OS X) AppleWebKit/604.4.7 (KHTML, like Gecko) Mobile/15C202 Weibo (iPhone10,3__weibo__8.1.0__iphone__os11.2.2)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcdc0085795552-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcdc0085795552-1\"><span class=\"crayon-v\">Mozilla</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iPhone</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CPU </span><span class=\"crayon-e\">iPhone </span><span class=\"crayon-i\">OS</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11_2_2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-e\">Mac </span><span class=\"crayon-i\">OS</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AppleWebKit</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">604.4.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">KHTML</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-v\">Gecko</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mobile</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15C202</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Weibo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iPhone10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3__weibo__8.1.0__iphone__os11.2.2</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<ul>\n<li>\n<h4>iOS-safari</h4>\n</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcdc4119371234\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMozilla/5.0 (iPhone; CPU iPhone OS 11_2_2 like Mac OS X) AppleWebKit/604.4.7 (KHTML, like Gecko) Version/11.0 Mobile/15C202 Safari/604.1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcdc4119371234-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcdc4119371234-1\"><span class=\"crayon-v\">Mozilla</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iPhone</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CPU </span><span class=\"crayon-e\">iPhone </span><span class=\"crayon-i\">OS</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11_2_2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-e\">Mac </span><span class=\"crayon-i\">OS</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">X</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AppleWebKit</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">604.4.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">KHTML</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-v\">Gecko</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Version</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">11.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mobile</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">15C202</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Safari</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">604.1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<ul>\n<li>\n<h4>Android-微信</h4>\n</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcdc7031709886\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMozilla/5.0 (Linux; Android 4.4.2; PE-TL20 Build/HuaweiPE-TL20; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/6.2 TBS/043807 Mobile Safari/537.36 MicroMessenger/6.6.1.1220(0x26060135) NetType/WIFI Language/zh_CN</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcdc7031709886-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcdc7031709886-1\"><span class=\"crayon-v\">Mozilla</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Android</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.4.2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PE</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">TL20 </span><span class=\"crayon-v\">Build</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HuaweiPE</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">TL20</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wv</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AppleWebKit</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">537.36</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">KHTML</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-v\">Gecko</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Version</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Chrome</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">57.0.2987.132</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MQQBrowser</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TBS</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">043807</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Mobile </span><span class=\"crayon-v\">Safari</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">537.36</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MicroMessenger</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6.6.1.1220</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0x26060135</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NetType</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">WIFI </span><span class=\"crayon-v\">Language</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">zh_CN</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<ul>\n<li>\n<h4>Android-QQ</h4>\n</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcdca703707877\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMozilla/5.0 (Linux; Android 4.4.2; PE-TL20 Build/HuaweiPE-TL20; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/57.0.2987.132 MQQBrowser/6.2 TBS/043807 Mobile Safari/537.36 V1_AND_SQ_7.3.2_762_YYB_D QQ/7.3.2.3350 NetType/WIFI WebP/0.3.0 Pixel/1080</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcdca703707877-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcdca703707877-1\"><span class=\"crayon-v\">Mozilla</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Android</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.4.2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PE</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">TL20 </span><span class=\"crayon-v\">Build</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HuaweiPE</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">TL20</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wv</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AppleWebKit</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">537.36</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">KHTML</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-v\">Gecko</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Version</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Chrome</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">57.0.2987.132</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MQQBrowser</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TBS</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">043807</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Mobile </span><span class=\"crayon-v\">Safari</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">537.36</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">V1_AND_SQ_7</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">3.2_762_YYB_D</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">QQ</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7.3.2.3350</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NetType</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">WIFI </span><span class=\"crayon-v\">WebP</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0.3.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Pixel</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1080</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p></p>\n<ul>\n<li>\n<h4>Android-微博</h4>\n</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a750f5bdcdcd999917215\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nMozilla/5.0 (Linux; Android 4.4.2; PE-TL20 Build/HuaweiPE-TL20) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/30.0.0.0 Mobile Safari/537.36 Weibo (HUAWEI-PE-TL20__weibo__8.0.2__android__android4.4.2)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a750f5bdcdcd999917215-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a750f5bdcdcd999917215-1\"><span class=\"crayon-v\">Mozilla</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Linux</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Android</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.4.2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PE</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">TL20 </span><span class=\"crayon-v\">Build</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">HuaweiPE</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">TL20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AppleWebKit</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">537.36</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">KHTML</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">like </span><span class=\"crayon-v\">Gecko</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Version</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Chrome</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">30.0.0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Mobile </span><span class=\"crayon-v\">Safari</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">537.36</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Weibo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">HUAWEI</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">PE</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">TL20__weibo__8</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0.2__android__android4.4.2</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>配置完成之后，就可以像我一样，在电脑上切换环境啦：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/2803f0e3a3be38c655debb4ddb956503.png\"><img class=\"alignnone size-full wp-image-93901\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/2803f0e3a3be38c655debb4ddb956503.png\" alt=\"bV2suw\"></a></p>\n<h3>源代码以及库文件使用，请参见：<a href=\"https://github.com/sunhaikuo/js-arouse-app\">Github，用力点我</a></h3>\n<h3>扫码验证</h3>\n<p>整个唤起流程，可以访问这个下载入口：<a href=\"https://party.mtime.cn/download\">https://party.mtime.cn/download</a><br>\n也可以扫码：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/477ffcac8e36effc6bd63cc6595ee170.png\"><img class=\"alignnone size-full wp-image-93900\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/477ffcac8e36effc6bd63cc6595ee170.png\" alt=\"bV2srd\"></a></p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93899\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93899votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93899\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "dd55b82446a65a10ffb0691c376f15b5", "title": "webassembly 的那些事", "url": "http://web.jobbole.com/93761/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/bb8459f6338c6a5798baffcbc72182b3.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "2", "tags": "JavaScript,webassembly", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://mp.weixin.qq.com/s/lFqvdBvusCcndoBK0-U7kg\">刘艳</a>   </div><section>\n<section>\n<section>\n<section>\n<section>\n<section>\n<section>\n<section>\n<section>\n<section>简介</section>\n</section>\n</section>\n</section>\n</section>\n</section>\n</section>\n</section>\n</section>\n</section>\n<p>JS于1995年问世，设计的初衷不是为了执行起来快。直到08年性能大战中，许多浏览器引入了即时编译 JIT(just-in-time编译器)，JavaScript 代码的运行渐渐变快。正是由于这些 JIT 的引入，使得 JavaScript 的性能达到了一个转折点，JS 代码执行速度快了 20 — 50倍。</p>\n<blockquote><p>JIT 是使 JavaScript 运行更快的一种手段，通过监视代码的运行状态，把 hot 代码（重复执行多次的代码）进行优化。通过这种方式，可以使 JavaScript 应用的性能提升很多倍。</p></blockquote>\n<p>更多JIT工作原理，有兴趣请移步：https://zhuanlan.zhihu.com/p/25669120<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/bb8459f6338c6a5798baffcbc72182b3.png\"><img class=\"alignnone size-full wp-image-93763\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/bb8459f6338c6a5798baffcbc72182b3.png\" alt=\"640\"></a></p>\n<p> </p>\n<p>随着性能的提升，JavaScript 可以应用到以前根本没有想到过的领域，比如用于后端开发的 Node.js。性能的提升使得 JavaScript 的应用范围得到很大的扩展。</p>\n<p>JavaScript的无类型是JavaScript引擎的性能瓶颈之一，在过去几年，我们看到越来越多的项目问世，它们试图通过开发编译程序，将其他语言代码转化为 JavaScript，以此让开发者克服 JavaScript 自身存在的一些短板。其中一些项目专注于给编程语言增加新的功能，比如微软的 TypeScript 和 Google 的 Dart，【设计一门新的强类型语言并强制开发者进行类型指定】或是加快 JavaScript 的执行速度，例如 Mozilla 的 asm.js 项目和Google的PNaCI【给现有的JavaScript加上变量类型】。</p>\n<p>现在通过 WebAssembly，我们很有可能正处于第二个拐点。<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/f413f45ff03b913c952a50ebef6c3f85.png\"><img class=\"alignnone size-full wp-image-93764\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/f413f45ff03b913c952a50ebef6c3f85.png\" alt=\"641\"></a></p>\n<p> </p>\n<blockquote><p>什么是webAssembly?</p></blockquote>\n<p>WebAssembly是一种新的适合于编译到Web的，可移植的，大小和加载时间高效的格式，是一种新的字节码格式。它的缩写是”.wasm”，.wasm 为文件名后缀，是一种新的底层安全的“二进制”语法。它被定义为“精简、加载时间短的格式和执行模型”，并且被设计为Web 多编程语言目标文件格式。 这意味着浏览器端的性能会得到极大提升，它也使得我们能够实现一个底层构建模块的集合.</p>\n<blockquote><p>webAssembly的优势</p></blockquote>\n<p>webassembly相较于asm.js的优势主要是涉及到性能方面。根据WebAssembly FAQ的描述：在移动设备上，对于很大的代码库，asm.js仅仅解析就需要花费20-40秒，而实验显示WebAssembly的加载速度比asm.js快了20倍，这主要是因为相比解析 asm.js 代码，JavaScript 引擎破译二进制格式的速度要快得多。</p>\n<p>主流的浏览器目前均支持webAssembly。</p>\n<ul>\n<li>Safari 支持 WebAssembly的第一个版本是11</li>\n<li>Edge 支持 WebAssembly的第一个版本是16</li>\n<li>Firefox 支持 WebAssembly的第一个版本是 52</li>\n<li>chrome 支持 WebAssembly的第一个版本是 57</li>\n</ul>\n<p>使用WebAssembly，我们可以在浏览器中运行一些高性能、低级别的编程语言，可用它将大型的C和C++代码库比如游戏、物理引擎甚至是桌面应用程序导入Web平台。</p>\n<h2>开发前准备工作（MAC系统）</h2>\n<p>1.安装 cmake brew install cmake</p>\n<p>2.安装 pyhton brew insatll python</p>\n<p>3.安装 Emscripten (调整下电脑的休眠时间，不要让电脑进入休眠，安装时间较长)</p>\n<p>安装步骤如下：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/2dc0c65fb08a4d8bcaa77fbd2b7b5d43.png\"><img class=\"alignnone size-full wp-image-93775\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/2dc0c65fb08a4d8bcaa77fbd2b7b5d43.png\" alt=\"1\"></a></p>\n<p>执行 source ./emsdkenv.sh，并将shell中的内容添加到环境变量中(~/.bashprofile):</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/8f0b73d0a20c4c006dd35c1bf2fc1af1.png\"><img class=\"alignnone size-full wp-image-93776\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/8f0b73d0a20c4c006dd35c1bf2fc1af1.png\" alt=\"2\"></a></p>\n<p>执行： source ~/.bash_profile</p>\n<p>4.安装 WABT（将.wast文件转成 .wasm文件）<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/434fd3612edc9389c7c6eaac23554901.png\"><img class=\"alignnone size-full wp-image-93777\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/434fd3612edc9389c7c6eaac23554901.png\" alt=\"3\"></a></p>\n<p>5.浏览器设置</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/e60f929f52bb752684e9c3304a733c48.png\"><img class=\"alignnone size-full wp-image-93778\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/e60f929f52bb752684e9c3304a733c48.png\" alt=\"4\"></a></p>\n<p>如果浏览器太旧，请更新浏览器，或者安装激进版浏览器来体验新技术。</p>\n<p>6.一个本地web服务器.</p>\n<blockquote><p>Emscripten，它基于 LLVM ，可以将 C/C++ 编译成 asm.js，使用 WASM 标志也可以直接生成 WebAssembly 二进制文件（后缀是 .wasm）</p></blockquote>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/05d496432d7b472a94275e807b7c108a.png\"><img class=\"alignnone size-full wp-image-93765\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/05d496432d7b472a94275e807b7c108a.png\" alt=\"642\"></a><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/c05c78e53157c87397e58bd10aa6cd29.png\"><img class=\"alignnone wp-image-93779 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/c05c78e53157c87397e58bd10aa6cd29.png\" width=\"672\" height=\"110\"></a></p>\n<p>注：emcc 在 1.37 以上版本才支持直接生成 wasm 文件</p>\n<blockquote><p>Binaryen 是一套更为全面的工具链，是用C++编写成用于WebAssembly的编译器和工具链基础结构库。WebAssembly是二进制格式（Binary Format）并且和Emscripten集成，因此该工具以Binary和Emscript-en的末尾合并命名为Binaryen。它旨在使编译WebAssembly容易、快速、有效。</p></blockquote>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/f88ddbfd01d37c6bea0c1ca0eff8de1c.png\"><img class=\"alignnone size-full wp-image-93766\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/f88ddbfd01d37c6bea0c1ca0eff8de1c.png\" alt=\"643\"></a></p>\n<p> </p>\n<ul>\n<li>wasm-as：将WebAssembly由文本格式编译成二进制格式；</li>\n<li>wasm-dis：将二进制格式的WebAssembly反编译成文本格式；</li>\n<li>asm2wasm：将asm.js编译到WebAssembly文本格式，使用Emscripten的asm优化器；</li>\n<li>s2wasm：在LLVM中开发，由新WebAssembly后端产生的.s格式的编译器；</li>\n<li>wasm.js：包含编译为JavaScript的Binaryen组件，包括解释器、asm2wasm、S表达式解析器等。</li>\n</ul>\n<blockquote><p>WABT工具包支持将二进制WebAssembly格式转换为可读的文本格式。其中wasm2wast命令行工具可以将WebAssembly二进制文件转换为可读的S表达式文本文件。而wast2wasm命令行工具则执行完全相反的过程。</p></blockquote>\n<ul>\n<li>wat2wasm: webAssembly文本格式转换为webAssembly二进制格式（.wast 到 .wasm）</li>\n<li>wasm2wat: 将WebAssembly二进制文件转换为可读的S表达式文本文件(.wat)</li>\n<li>wasm-objdump: print information about a wasm binary. Similiar to objdump.</li>\n<li>wasm-interp: 基于堆栈式解释器解码和运行webAssembly二进制文件</li>\n<li>wat-desugar: parse .wat text form as supported by the spec interpreter</li>\n<li>wasm-link: simple linker for merging multiple wasm files.</li>\n<li>wasm2c: 将webAssembly二进制文件转换为C的源文件</li>\n</ul>\n<h2>webAssembly的方法</h2>\n<h4>webAssembly.validate</h4>\n<p>webAssembly.validate() 方法验证给定的二进制代码的 typed array 是否是合法的wasm module.返回布尔值。<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/c9206749afdc215bcdb3d254fbd57729.png\"><img class=\"alignnone size-full wp-image-93780\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/c9206749afdc215bcdb3d254fbd57729.png\" alt=\"6\"></a></p>\n<p>使用</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/15e75cad307f5d19ce0698c935d69f72.png\"><img class=\"alignnone size-full wp-image-93781\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/15e75cad307f5d19ce0698c935d69f72.png\" alt=\"7\"></a></p>\n<p>webAssembly.Module</p>\n<p>WebAssembly.Module() 构造函数可以用来同步编译给定的 WebAssembly 二进制代码。不过，获取 Module 对象的主要方法是通过异步编译函数，如 WebAssembly.compile()，或者是通过 IndexedDB 读取 Module 对象.<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/253084387d0c890164ef592c530b40a5.png\"><img class=\"alignnone size-full wp-image-93782\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/253084387d0c890164ef592c530b40a5.png\" alt=\"8\"></a></p>\n<p>参数： 一个包含你想编译的wasm模块二进制代码的 typed array(类型数组) or ArrayBuffer(数组缓冲区).</p>\n<blockquote><p>重要提示：由于大型模块的编译可能很消耗资源，开发人员只有在绝对需要同步编译时，才使用 Module() 构造函数；其他情况下，应该使用异步 WebAssembly.compile() 方法。</p></blockquote>\n<h4>webAssembly.compile</h4>\n<p>WebAssembly.compile() 方法编译WebAssembly二进制代码到一个WebAssembly.Module 对象。<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/b9daefd6c7a3207f1ef2b2f9267654b0.png\"><img class=\"alignnone size-full wp-image-93783\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/b9daefd6c7a3207f1ef2b2f9267654b0.png\" alt=\"9\"></a></p>\n<h4>webAssembly.Instance</h4>\n<p>WebAssembly.Instance实例对象是有状态，可执行的 WebAssembly.Module实例。实例中包含了所有可以被 JavaScript调用的WebAssembly 代码导出的函数。</p>\n<blockquote><p>重要提示：由于大型模块的实例化可能很消耗资源，开发人员只有在绝对需要同步编译时，才使用 Instance() 构造函数；其他情况下，应该使用异步 WebAssembly.instantiate()方法。</p></blockquote>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/05469604c4be60f1fc026ee5228aaaca.png\"><img class=\"alignnone wp-image-93784 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/05469604c4be60f1fc026ee5228aaaca.png\" width=\"674\" height=\"36\"></a></p>\n<ul>\n<li>module: 需要被实例化的webAssembly module</li>\n<li>importObject: 需要导入的变量</li>\n</ul>\n<h4>webAssembly.instantiate<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/8b5d94dc41344afe4ac059351306422d.png\"><img class=\"alignnone size-full wp-image-93785\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/8b5d94dc41344afe4ac059351306422d.png\" alt=\"11\"></a></h4>\n<h4>webAssembly.Memory</h4>\n<p>当 WebAssembly 模块被实例化时，它需要一个 memory 对象。你可以创建一个新的WebAssembly.Memory并传递该对象。如果没有创建 memory 对象，在模块实例化的时候将会自动创建，并且传递给实例。<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/2b745cbbd109ae21dc2768d7bfa6e6f7.png\"><img class=\"alignnone size-full wp-image-93786\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/2b745cbbd109ae21dc2768d7bfa6e6f7.png\" alt=\"12\"></a></p>\n<blockquote><p>memoryDescriptor (object)</p></blockquote>\n<ul>\n<li>initial</li>\n<li>maximum 可选</li>\n</ul>\n<h4>webAssembly.Table<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/d71dce11d6fe87fd9ce11d899a09f191.png\"><img class=\"alignnone size-full wp-image-93787\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/d71dce11d6fe87fd9ce11d899a09f191.png\" alt=\"13\"></a></h4>\n<blockquote><p>tableDescriptor (object)</p></blockquote>\n<ul>\n<li>element，当前只支持一个值。 ‘anyfunc’</li>\n<li>initial, WebAssembly Table的初始元素数</li>\n<li>maximum(可选)， 允许的最大元素数</li>\n</ul>\n<h2>webAssembly使用</h2>\n<p>WebAssembly 与其他的汇编语言不一样，它不依赖于具体的物理机器。可以抽象地理解成它是概念机器的机器语言，而不是实际的物理机器的机器语言。浏览器把 WebAssembly 下载下来后，可以迅速地将其转换成机器汇编代码。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/5cb77000048cf2f96fc185663b78bbed.png\"><img class=\"alignnone size-full wp-image-93767\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/5cb77000048cf2f96fc185663b78bbed.png\" alt=\"644\"></a></p>\n<blockquote><p>快速体验webAssembly</p></blockquote>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/139b01557439f9556d05224d1152d426.png\"><img class=\"alignnone size-full wp-image-93788\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/139b01557439f9556d05224d1152d426.png\" alt=\"14\"></a></p>\n<blockquote><p>使用C/C++</p></blockquote>\n<p>hello.c</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/37176ef0a4deb43ddd0301f52ff8a653.png\"><img class=\"alignnone size-full wp-image-93789\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/37176ef0a4deb43ddd0301f52ff8a653.png\" alt=\"15\"></a></p>\n<p>编译：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/6ed73264f72a0c1cf91df7fe7a890236.png\"><img class=\"alignnone size-full wp-image-93790\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/6ed73264f72a0c1cf91df7fe7a890236.png\" alt=\"16\"></a></p>\n<ul>\n<li>-s WASM=1 — 指定我们想要的wasm输出形式。如果我们不指定这个选项，Emscripten默认将只会生成asm.js。</li>\n<li>-o hello.html — 指定这个选项将会生成HTML页面来运行我们的代码，并且会生成wasm模块以及编译和实例化wasim模块所需要的“胶水”js代码，这样我们就可以直接在web环境中使用了。</li>\n</ul>\n<p>编译后<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/df14619cfb4323f9aa1820a942a65c82.png\"><img class=\"alignnone size-full wp-image-93768\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/df14619cfb4323f9aa1820a942a65c82.png\" alt=\"645\"></a></p>\n<p> </p>\n<ol>\n<li>二进制的wasm模块代码 (hello.wasm)</li>\n<li>一个包含了用来在原生C函数和JavaScript/wasm之间转换的胶水代码的JavaScript文件 (hello.js)</li>\n<li>一个用来加载，编译，实例化你的wasm代码并且将它输出在浏览器显示上的一个HTML文件 (hello.html)</li>\n</ol>\n<blockquote><p>调用C++中的方法</p></blockquote>\n<p>hello.c</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/6bf3429b4d10ebc64035cf861c1b8116.png\"><img class=\"alignnone size-full wp-image-93791\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/6bf3429b4d10ebc64035cf861c1b8116.png\" alt=\"17\"></a></p>\n<p>如果想调用hello2.c中的myFunction方法，则需要将ccall方法从Moudule导出。使用下面的编译命令：<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/90b025014e72e14b6ce2d58faae25ab1.png\"><img class=\"alignnone size-full wp-image-93792\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/90b025014e72e14b6ce2d58faae25ab1.png\" alt=\"18\"></a></p>\n<ul>\n<li>htmltemplate/shellminimal.html 指定为HTML模板。</li>\n<li>-s ‘EXTRAEXPORTEDRUNTIME_METHODS=[“ccall”]’ 从Module中导出 ccall</li>\n</ul>\n<p>将 ccall 方法导出之后，就可以使用 Module.ccall来调用C++中的函数了。<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/9b746806e50b8fdb229c735950ba4a43.png\"><img class=\"alignnone size-full wp-image-93793\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/9b746806e50b8fdb229c735950ba4a43.png\" alt=\"19\"></a></p>\n<h3>更直观的例子</h3>\n<p>上面的例子中，编译后即可直接运行。但是生成的代码体积较大，不容易看懂具体做了什么。因此下面提供一个更直观的例子。</p>\n<p>math.c<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/f5f96ce0dd3c660784ee87f3dd3d3709.png\"><img class=\"alignnone size-full wp-image-93794\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/f5f96ce0dd3c660784ee87f3dd3d3709.png\" alt=\"20\"></a></p>\n<p><code>emcc math.c-Os-s WASM=1-s SIDE_MODULE=1-o math.wasm</code></p>\n<p>-s SIDE_MODULE=1 直接由C生成wasm文件</p>\n<p>目前只有一种方式能调用 wasm 里的提供接口，那就是：用 javascript ！</p>\n<h4>编写加载函数(loader)<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/7fe36221ef1b7488f14eb2c8d4037fb5.png\"><img class=\"alignnone size-full wp-image-93795\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/7fe36221ef1b7488f14eb2c8d4037fb5.png\" alt=\"21\"></a></h4>\n<p>完成了上边的操作，就可以直接使用 loadWebAssembly 这个方法加载 wasm 文件了，它相当于是一个 wasm-loader ；返回值是一个 Promise.<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/64dba5a8f63f26c898fe5211524d63b0.png\"><img class=\"alignnone wp-image-93796 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/64dba5a8f63f26c898fe5211524d63b0.png\" width=\"674\" height=\"113\"></a></p>\n<p>更完善的loader<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/e9d965918f5f5af74cd678715e66e589.png\"><img class=\"alignnone size-full wp-image-93797\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/e9d965918f5f5af74cd678715e66e589.png\" alt=\"23\"></a></p>\n<p>ArrayBuffer 做了两件事情，一件是做 WebAssembly 的内存，另外一件是做 JavaScript 的对象。</p>\n<ol>\n<li>它使 JS 和 WebAssembly 之间传递内容更方便。</li>\n<li>使内存管理更安全。</li>\n</ol>\n<p>这个 loadWebAssembly 函数还接受第二个参数，表示要传递给 wasm 的变量，在初始化 WebAssembly 实例的时候，可以把一些接口传递给 wasm 代码。</p>\n<h3>asm.js</h3>\n<p>asm.js 是 javascript 的子集，是一种语法。用了很多底层语法来标注数据类型，目的是提高 javascript 的运行效率，本身就是作为 C/C++ 编译的目标设计的（不是给人写的）。 WebAssembly 借鉴了这个思路，做的更彻底一些，直接跳过 javascript ，设计了一套新的平台指令。</p>\n<p>目前只有 asm.js 才能转成 wasm，普通 javascript 是不行的。虽然 Emscripten 能生成 asm.js 和 wasm ，但是却不能把 asm.js 转成 wasm 。想要把 asm.js 编译成 WebAssembly，就要用到他们官方提供的 Binaryen 和 WABT (WebAssembly Binary Toolkit) 工具。<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/7de253b2ba02704ac5916e76e99cd2f9.png\"><img class=\"alignnone size-full wp-image-93798\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/7de253b2ba02704ac5916e76e99cd2f9.png\" alt=\"24\"></a></p>\n<h3>Rust编译为webAssembly</h3>\n<p>1.安装Rustup</p>\n<p>Rustup是一个命令行应用，能够下载并在不同版本的Rust工具链中进行切换<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/73818416b3903ba145dcb9efa390d0c0.png\"><img class=\"alignnone size-full wp-image-93799\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/73818416b3903ba145dcb9efa390d0c0.png\" alt=\"25\"></a></p>\n<p>cargo可以将整个工程编译为wasm，首先使用cargo创建工程：</p>\n<p><code>cargonewproject</code></p>\n<p>下一步，把下面的代码加到 Cargo.toml 中<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/e192a2f94cace344167707a4a18904a7.png\"><img class=\"alignnone size-full wp-image-93800\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/e192a2f94cace344167707a4a18904a7.png\" alt=\"26\"></a></p>\n<p>2.demo：https://github.com/jakedeichert/wasm-astar</p>\n<p>编译:</p>\n<p><code>cargo+nightly build--target wasm32-unknown-unknown--release</code></p>\n<p>编译出来的wasm大小为82Kb,使用wasm-gc压缩 small-wasm_astar.wasm 的大小为 67Kb</p>\n<p><code>wasm-gc wasm_astar.wasm small-wasm_astar.wasm</code></p>\n<p> </p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/9f33b7da2c95a1213c6600e06901cc6e.png\"><img class=\"alignnone size-full wp-image-93769\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/9f33b7da2c95a1213c6600e06901cc6e.png\" alt=\"646\"></a></p>\n<p>为什么WebAssembly更快</p>\n<p>JS 引擎在图中各个部分所花的时间取决于页面所用的 JavaScript 代码。图表中的比例并不代表真实情况下的确切比例情况。</p>\n<p> </p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/c26a581122c6f8be7edefd1220356500.png\"><img class=\"alignnone size-full wp-image-93770\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/c26a581122c6f8be7edefd1220356500.png\" alt=\"647\"></a></p>\n<ul>\n<li>Parse: 把源代码变成解释器可以运行的代码所花的时间；</li>\n<li>Compiling + optimizing: 基线编译器和优化编译器花的时间;</li>\n<li>Re-optimize: 当 JIT 发现优化假设错误，丢弃优化代码所花的时间。</li>\n<li>Execut：执行代码的时间</li>\n<li>Garbage collection： 垃圾回收，清理内存的时间</li>\n</ul>\n<blockquote><p>文件获取：</p></blockquote>\n<p>WebAssembly比JS的压缩了更高，所以文件获取更快。</p>\n<blockquote><p>解析：</p></blockquote>\n<p>到达浏览器时，JS源代码被解析成了抽象语法树，浏览器采用懒加载的方式进行，只解析真正需要的部分，，而对于浏览器暂时不需要的函数只保留它的桩，解析过后 AST （抽象语法树）就变成了中间代码（叫做字节码），提供给 JS 引擎编译。</p>\n<p>而WebAssembly不需要这种转换，因为它本身就是中间代码，它要做的只是解码并且检查确认代码没有错误即可。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/971317e5ae83e41960e7d8cb84ae6b4f.png\"><img class=\"alignnone size-full wp-image-93771\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/971317e5ae83e41960e7d8cb84ae6b4f.png\" alt=\"648\"></a></p>\n<blockquote><p>编译和优化</p></blockquote>\n<p>JavaScript 是在代码的执行阶段编译的。因为它是弱类型语言，当变量类型发生变化时，同样的代码会被编译成不同版本。</p>\n<p>不同浏览器处理 WebAssembly 的编译过程也不同。不论哪种方式，WebAssembly 都更贴近机器码，所以它更快.</p>\n<ol>\n<li>在编译优化代码之前，它不需要提前运行代码以知道变量都是什么类型。</li>\n<li>编译器不需要对同样的代码做不同版本的编译。</li>\n<li>很多优化在 LLVM 阶段就已经做完了，所以在编译和优化的时候没有太多的优化需要做。</li>\n</ol>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/10844d0d2fb8153bc48b21b77ff7f91f.png\"><img class=\"alignnone size-full wp-image-93772\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/10844d0d2fb8153bc48b21b77ff7f91f.png\" alt=\"649\"></a></p>\n<blockquote><p>重优化</p></blockquote>\n<p>JS的代码由于类型的不确定性，有些情况下，JIT会返回进行 “抛弃优化代码重优化”过程。</p>\n<p>而WebAssembly中，类型都是确定了的，因为没有重优化阶段。</p>\n<blockquote><p>执行</p></blockquote>\n<p>WebAssembly 就是为了编译器而设计的，开发人员不直接对其进行编程，这样就使得 WebAssembly 专注于提供更加理想的指令给机器。</p>\n<p>执行效率方面，不同的代码功能有不同的效果，一般来讲执行效率会提高 10% – 800%。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/bdfcb09e4e06c22d3125d7cf20733414.png\"><img class=\"alignnone size-full wp-image-93773\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/bdfcb09e4e06c22d3125d7cf20733414.png\" alt=\"650\"></a></p>\n<blockquote><p>垃圾回收</p></blockquote>\n<p>WebAssembly不支持垃圾回收，内存操作需要手动控制，因此WebAssembly没有垃圾回收。</p>\n<h2>应用</h2>\n<p>WebAssembly 更适合用于写模块，承接各种复杂的计算，如图像处理、3D运算、语音识别、视音频编码解码这种工作，主体程序还是要用 javascript 来写的。</p>\n<h2>未来功能</h2>\n<ul>\n<li>直接操作DOM</li>\n<li>支持多数据（SIMD）：SIMD的使用可以获取大的数据结构，例如不同数目的向量，并且同时将相同的指令应用于不同的部分。这样，它可以大大加快各种复杂计算的游戏或VR的运行速度。</li>\n<li>ES6模块集成：浏览器目前正在添加对使用script标签加载JavaScript模块的支持。 添加此功能后，即使URL指向WebAssembly模块，</li>\n</ul>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93761\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93761votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93761\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "dd9fd9cf02f871025e392f921a29c07c", "title": "从0到1，开发一个动画库(2)", "url": "http://web.jobbole.com/93911/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/12/43e3b7266449265fdcd1d6c502862370.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,动画库", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000013010057\">jshao</a>   </div><div>\n<p>传送门：<a href=\"https://segmentfault.com/a/1190000012923589\">从0到1，开发一个动画库(1)</a></p>\n<p>上一节讲到了最基础的内容，为动画构建“帧-值”对应的函数关系，完成“由帧到值”的计算过程。这一节将在上节代码的基础上谈谈如何给一个完整的动画添加各类事件。</p>\n<p>在添加各类事件之前，我们先对<code>_loop</code>循环函数进行一些改进：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f26abb4640864601\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n_loop() {\r\n  const t = Date.now() - this.beginTime,\r\n        d = this.duration,\r\n        func = Tween[this.timingFunction] || Tween['linear'];\r\n\r\n  if (this.state === 'end' || t &gt;= d) {\r\n    this._end();\r\n  } else if (this.state === 'stop') {\r\n    this._stop(t);\r\n  } else if (this.state === 'init') {\r\n    this._reset();\r\n  } else {\r\n    this._renderFunction(t, d, func)\r\n    window.requestAnimationFrame(this._loop.bind(this));\t\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abb4640864601-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abb4640864601-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abb4640864601-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abb4640864601-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abb4640864601-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abb4640864601-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abb4640864601-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abb4640864601-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abb4640864601-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abb4640864601-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abb4640864601-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abb4640864601-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abb4640864601-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abb4640864601-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abb4640864601-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abb4640864601-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f26abb4640864601-1\"><span class=\"crayon-e\">_loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abb4640864601-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beginTime</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abb4640864601-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abb4640864601-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abb4640864601-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abb4640864601-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'end'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abb4640864601-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abb4640864601-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abb4640864601-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abb4640864601-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abb4640864601-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abb4640864601-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abb4640864601-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abb4640864601-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">requestAnimationFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_loop</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abb4640864601-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abb4640864601-16\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>可以清晰地看到，我们在循环中增加了很多类型的判断，根据<code>state</code>当前不同的状态执行相应的处理函数：我们新增了<code>_end</code>、<code>_stop</code>、<code>_reset</code>方法分别去处理结束、暂停和重置这三种状态，接下来我们依次讲解这些状态的处理。</p>\n<h3>End</h3>\n<p>我们在Core类下增加<code>_end</code>、<code>end</code>和<code>renderEndState</code>方法，<code>end</code>方法用于主动结束动画：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f26abbe986732673\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nend() {\r\n  this.state === 'play' ? (this.state = 'end') : this._end();\r\n}\r\n\r\n_end() {\r\n  this.state = 'end';\r\n  this._renderEndState();\r\n  this.onEnd &amp;&amp; this.onEnd();\r\n}\r\n\r\n_renderEndState() {\r\n  const d = this.duration,\r\n        func = Tween[this.timingFunction] || Tween['linear'];\r\n  this._renderFunction(d, d, func);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abbe986732673-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abbe986732673-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abbe986732673-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abbe986732673-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abbe986732673-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abbe986732673-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abbe986732673-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abbe986732673-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abbe986732673-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abbe986732673-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abbe986732673-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abbe986732673-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abbe986732673-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abbe986732673-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abbe986732673-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f26abbe986732673-1\"><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abbe986732673-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'end'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abbe986732673-3\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abbe986732673-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abbe986732673-5\"><span class=\"crayon-e\">_end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abbe986732673-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'end'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abbe986732673-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderEndState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abbe986732673-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onEnd</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abbe986732673-9\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abbe986732673-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abbe986732673-11\"><span class=\"crayon-e\">_renderEndState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abbe986732673-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abbe986732673-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abbe986732673-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abbe986732673-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>通过执行<code>end</code>方法，我们可以主动结束动画：如果当前目标处于运动状态，则将其设置为<code>end</code>，因此下一个<code>_loop</code>函数被执行的时候，程序就被流向了<code>_end</code>处理函数；若为其他状态，意味着循环没有被打开，我们就直接调用<code>_end</code>方法，使其直接到终止状态。</p>\n<p><code>_end</code>函数的作用有三个：</p>\n<ul>\n<li>将当前状态设置为<code>end</code>（为何要重复设置一次状态呢？这不是多余的吗？其实，倘若我们主动触发<code>end</code>去结束动画，这的确是多余的，但如果是动画自己进行到了末尾，也就是<code>t &gt;= d</code>的时刻，则必须得在<code>_end</code>中去设置状态，以确保它处于结束状态）</li>\n<li>通过<code>_renderEndState</code>方法，将目标变成结束状态</li>\n<li>若有回调函数则执行回调</li>\n</ul>\n<h3>Reset</h3>\n<p>重置动画的方式也是大同小异，与上面一样</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f26abc3774870944\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nreset() {\r\n  this.state === 'play' ? (this.state = 'init') : this._reset();\r\n}\r\n\r\n_reset() {\r\n  this.state = 'init';\r\n  this._renderInitState();\r\n  this.onReset &amp;&amp; this.onReset();\r\n}\r\n\r\n_renderInitState() {\r\n  const d = this.duration,\r\n        func = Tween[this.timingFunction] || Tween['linear'];\r\n  this._renderFunction(0, d, func);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc3774870944-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc3774870944-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc3774870944-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc3774870944-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc3774870944-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc3774870944-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc3774870944-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc3774870944-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc3774870944-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc3774870944-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc3774870944-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc3774870944-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc3774870944-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc3774870944-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc3774870944-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc3774870944-1\"><span class=\"crayon-e\">reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc3774870944-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc3774870944-3\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc3774870944-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc3774870944-5\"><span class=\"crayon-e\">_reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc3774870944-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc3774870944-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderInitState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc3774870944-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onReset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onReset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc3774870944-9\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc3774870944-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc3774870944-11\"><span class=\"crayon-e\">_renderInitState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc3774870944-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc3774870944-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc3774870944-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc3774870944-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p></p>\n<h3>Stop</h3>\n<p>让动画暂停也是与上述两者一样，但唯一的区别是，需要给<code>_renderStopState</code>方法传入当前时间进度：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f26abc7721511928\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstop() {\r\n  if (this.state === 'play') {\r\n    this.state = 'stop';\r\n  } else {\r\n    // 使目标暂停，无需像end或reset那样将目标变成结束/起始状态，保持当前状态即可\r\n    this.state = 'stop';\r\n    this.onStop &amp;&amp; this.onStop();\r\n  }\r\n}\r\n\r\n_stop(t) {\r\n  this.state = 'stop';\r\n  this._renderStopState(t);\r\n  this.onStop &amp;&amp; this.onStop();\r\n}\r\n\r\n_renderStopState(t) {\r\n  const d = this.duration,\r\n        func = Tween[this.timingFunction] || Tween['linear'];\r\n  this._renderFunction(t, d, func);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abc7721511928-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abc7721511928-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-1\"><span class=\"crayon-e\">stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 使目标暂停，无需像end或reset那样将目标变成结束/起始状态，保持当前状态即可</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onStop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-9\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-11\"><span class=\"crayon-e\">_stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderStopState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-14\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onStop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-15\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-16\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-17\"><span class=\"crayon-e\">_renderStopState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-18\"><span class=\"crayon-h\">  </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abc7721511928-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abc7721511928-21\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<h3>play</h3>\n<p>我们要在动画开始执行的时候触发<code>onPlay</code>事件，只需在<code>_play</code>方法内增加一行代码即可：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f26abca037799293\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n_play() {\r\n      this.state = 'play';\r\n  \r\n      // 新增部分\r\n    this.onPlay &amp;&amp; this.onPlay();\r\n  \r\n      this.beginTime = Date.now();\r\n      const loop = this._loop.bind(this);\r\n    window.requestAnimationFrame(loop);\r\n}```</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abca037799293-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abca037799293-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abca037799293-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abca037799293-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abca037799293-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abca037799293-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abca037799293-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abca037799293-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abca037799293-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abca037799293-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f26abca037799293-1\"><span class=\"crayon-e\">_play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abca037799293-2\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abca037799293-3\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abca037799293-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-c\">// 新增部分</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abca037799293-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onPlay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abca037799293-6\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abca037799293-7\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beginTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abca037799293-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">loop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_loop</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abca037799293-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">requestAnimationFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">loop</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abca037799293-10\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">`</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>完整代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f26abce275805977\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport Tween from './tween';\r\n\r\nclass Core {\r\n    constructor(opt) {\r\n        this._init(opt);\r\n        this.state = 'init';\r\n    }\r\n\r\n    _init(opt) {\r\n    this._initValue(opt.value);\r\n    this.duration = opt.duration || 1000;\r\n    this.timingFunction = opt.timingFunction || 'linear';\r\n    this.renderFunction = opt.render || this._defaultFunc;\r\n\r\n    /* Events */\r\n    this.onPlay = opt.onPlay;\r\n    this.onEnd = opt.onEnd;\r\n    this.onStop = opt.onStop;\r\n    this.onReset = opt.onReset;\r\n  }\r\n\r\n  _initValue(value) {\r\n      this.value = [];\r\n      value.forEach(item =&gt; {\r\n          this.value.push({\r\n              start: parseFloat(item[0]),\r\n              end: parseFloat(item[1]),\r\n          });\r\n      })\r\n  }\r\n\r\n  _loop() {\r\n    const t = Date.now() - this.beginTime,\r\n      d = this.duration,\r\n      func = Tween[this.timingFunction] || Tween['linear'];\r\n\r\n    if (this.state === 'end' || t &gt;= d) {\r\n      this._end();\r\n    } else if (this.state === 'stop') {\r\n      this._stop(t);\r\n    } else if (this.state === 'init') {\r\n      this._reset();\r\n    } else {\r\n      this._renderFunction(t, d, func)\r\n      window.requestAnimationFrame(this._loop.bind(this));\r\n    }\r\n  }\r\n\r\n  _renderFunction(t, d, func) {\r\n      const values = this.value.map(value =&gt; func(t, value.start, value.end - value.start, d));\r\n      this.renderFunction.apply(this, values);\r\n  }\r\n  \r\n  _renderEndState() {\r\n    const d = this.duration,\r\n      func = Tween[this.timingFunction] || Tween['linear'];\r\n    this._renderFunction(d, d, func);\r\n  }\r\n\r\n  _renderInitState() {\r\n    const d = this.duration,\r\n      func = Tween[this.timingFunction] || Tween['linear'];\r\n    this._renderFunction(0, d, func);\r\n  }\r\n\r\n  _renderStopState(t) {\r\n    const d = this.duration,\r\n      func = Tween[this.timingFunction] || Tween['linear'];\r\n    this._renderFunction(t, d, func);\r\n  }\r\n\r\n  _stop(t) {\r\n    this.state = 'stop';\r\n    this._renderStopState(t);\r\n    this.onStop &amp;&amp; this.onStop();\r\n  }\r\n\r\n  _play() {\r\n      this.state = 'play';\r\n    this.onPlay &amp;&amp; this.onPlay();\r\n    \r\n      this.beginTime = Date.now();\r\n      const loop = this._loop.bind(this);\r\n    window.requestAnimationFrame(loop);\r\n  }\r\n\r\n  _end() {\r\n    this.state = 'end';\r\n    this._renderEndState();\r\n    this.onEnd &amp;&amp; this.onEnd.call(this);\r\n  }\r\n\r\n  _reset() {\r\n    this.state = 'init';\r\n    this._renderInitState();\r\n    this.onReset &amp;&amp; this.onReset();\r\n  }\r\n\r\n  play() {\r\n      this._play();\r\n  }\r\n\r\n  end() {\r\n    this.state === 'play' ? (this.state = 'end') : this._end();\r\n  }\r\n\r\n  reset() {\r\n    this.state === 'play' ? (this.state = 'init') : this._reset();\r\n  }\r\n\r\n  stop() {\r\n    if (this.state === 'play') {\r\n      this.state = 'stop';\r\n    } else {\r\n      this.state = 'stop';\r\n      this.onStop &amp;&amp; this.onStop();\r\n    }\r\n  }\r\n}\r\n\r\nwindow.Timeline = Core;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abce275805977-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abce275805977-121\">121</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">Tween </span><span class=\"crayon-i\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'./tween'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-3\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Core</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">constructor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">_init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_initValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">renderFunction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">render</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_defaultFunc</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* Events */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onReset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onReset</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_initValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-23\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-24\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-25\"><span class=\"crayon-h\">          </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-26\"><span class=\"crayon-h\">              </span><span class=\"crayon-v\">start</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseFloat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-27\"><span class=\"crayon-h\">              </span><span class=\"crayon-st\">end</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseFloat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-28\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-29\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-30\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-32\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beginTime</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-34\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-35\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-36\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'end'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-38\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-40\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-42\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-44\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-45\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">requestAnimationFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_loop</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-47\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-48\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-49\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-50\"><span class=\"crayon-h\">      </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">values</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-51\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">renderFunction</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">values</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-52\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-53\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-54\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_renderEndState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-56\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-57\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-58\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-59\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-60\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_renderInitState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-62\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-63\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-64\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-65\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-66\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_renderStopState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-67\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-68\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Tween</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'linear'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-69\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderFunction</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-70\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-71\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-72\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-73\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-74\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderStopState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-75\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onStop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-76\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-77\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-78\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-79\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-80\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onPlay</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-81\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-82\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">beginTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Date</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-83\"><span class=\"crayon-h\">      </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">loop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_loop</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-84\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">requestAnimationFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">loop</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-85\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-86\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-87\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-88\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'end'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-89\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderEndState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-90\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">call</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-91\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-92\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-93\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">_reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-94\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-95\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_renderInitState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-96\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onReset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onReset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-97\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-98\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-99\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-100\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-101\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-102\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-103\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-104\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'end'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-105\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-106\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-107\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-108\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'init'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">_reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-109\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-110\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-111\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-112\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'play'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-113\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-114\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-115\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-116\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onStop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">onStop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-117\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-118\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-119\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abce275805977-120\"> </div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abce275805977-121\"><span class=\"crayon-v\">window</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Timeline</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Core</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0177 seconds] -->\r\n<p>相应地，html的代码也更新如下，添加了各类按钮，主动触发目标的各类事件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2f26abd3503472594\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n    &lt;title&gt;&lt;/title&gt;\r\n    &lt;style type=\"text/css\"&gt;\r\n        #box {\r\n            width: 100px;\r\n            height: 100px;\r\n            background: green;\r\n        }\r\n    &lt;/style&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div id=\"box\"&gt;&lt;/div&gt;\r\n&lt;button id=\"start\"&gt;START&lt;/button&gt;\r\n&lt;button id=\"end\"&gt;END&lt;/button&gt;\r\n&lt;button id=\"stop\"&gt;STOP&lt;/button&gt;\r\n&lt;button id=\"reset\"&gt;RESET&lt;/button&gt;\r\n&lt;script type=\"text/javascript\" src=\"timeline.min.js\"&gt;&lt;/script&gt;\r\n&lt;script type=\"text/javascript\"&gt;\r\n    const el = (name) =&gt; document.querySelector(name);\r\n    const box = el('#box');\r\n    const timeline = new Timeline({\r\n        duration: 3000,\r\n        value: [[0, 400], [0, 600]],\r\n        render: function(value1, value2) {\r\n            box.style.transform = `translate(${ value1 }px, ${ value2 }px)`;\r\n        },\r\n        timingFunction: 'easeOut',\r\n        onPlay: () =&gt; console.log('play'),\r\n        onEnd: () =&gt; console.log('end'),\r\n        onReset: () =&gt;  console.log('reset'),\r\n        onStop: () =&gt; console.log('stop')\r\n    })\r\n\r\n    el('#start').onclick = () =&gt; timeline.play();\r\n    el('#end').onclick = () =&gt; timeline.end();\r\n    el('#stop').onclick = () =&gt; timeline.stop()\r\n    el('#reset').onclick = () =&gt; timeline.reset()\r\n&lt;/script&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2f26abd3503472594-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2f26abd3503472594-42\">42</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">DOCTYPE</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">html</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">title</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">title</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-ta\">&lt;style </span><span class=\"crayon-e \">type</span><span class=\"crayon-k \">=\"text/css\"&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-6\"><span class=\"crayon-k \">        #box </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-e \">width</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">100px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-e \">height</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">100px</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-e \">background</span><span class=\"crayon-sy\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i \">green</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-ta\">&lt;/style&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-12\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">head</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-13\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-14\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">div </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"box\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">div</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-15\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">button </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"start\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">START</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">button</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-16\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">button </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"end\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-st\">END</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">button</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-17\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">button </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"stop\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">STOP</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">button</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-18\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">button </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"reset\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-e\">RESET</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">button</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-19\"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/javascript\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">src</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"timeline.min.js\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-20\"><span class=\"crayon-ta\">&lt;script </span><span class=\"crayon-e \">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"text/javascript\"</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">el</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">document</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">querySelector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">box</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">el</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'#box'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeline</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Timeline</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">duration</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3000</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">400</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">600</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">render</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">box</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">style</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">transform</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">translate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">value1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">px</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">value2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">px</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">timingFunction</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'easeOut'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">onPlay</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'play'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">onEnd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'end'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">onReset</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'reset'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">onStop</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'stop'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">el</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'#start'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onclick</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">play</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">el</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'#end'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onclick</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">el</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'#stop'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onclick</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">el</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'#reset'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">onclick</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeline</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-40\"><span class=\"crayon-ta\">&lt;/script&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2f26abd3503472594-41\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">body</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2f26abd3503472594-42\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">html</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0108 seconds] -->\r\n<p>看到这里，我们第二节的内容就结束啦，下一节，我们将介绍：</p>\n<ul>\n<li>支持自定义路径动画</li>\n<li>动画间的链式调用</li>\n</ul>\n<p>下一节再见啦^_^</p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93911\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93911votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93911\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "2d5e7e07c7be26da981961812f0b729b", "title": "2017 年 JavaScript 现状调查报告总结", "url": "http://web.jobbole.com/93915/", "create_date": "2018-02-03", "front_image_url": ["//cdn.liayal.com/image/8570cdd77620fba7d18f2f3406b04dfa"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,调查", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/i-just-asked-23-000-developers-what-they-think-of-javascript-heres-what-i-learned-9a06b61998fa\">Sacha Greif</a>   译文出处：<a target=\"_blank\" href=\"https://www.liayal.com/article/5a6ece2aeba8a1470c87f931\">记</a>   </div><div>\n<blockquote><p>前段时间国外的开发者针对2017年JavaScript的现状做了一个调查并给出了相关调查报告。本文针对他的调查报告总结进行了翻译，如有问题欢迎留言。</p></blockquote>\n<p>我最近公布了2017年版年度JavaScript调查的结果，该调查覆盖了了23000多名开发者。</p>\n<p>这份调查结果揭示了很多信息，从流行趋势到薪资细分。如果你还没有看过这边调查，你会想自己<a title=\"看一看\" href=\"https://stateofjs.com/2017/introduction/\">看一看</a>。但在所有这些数据中，以下10点是我最令我关注的。</p>\n<p>即使您已经看到了调查结果，您也可能希望查看我们刚刚添加的<a title=\"新特性\" href=\"https://stateofjs.com/2017/features/\">新特性</a>和<a href=\"https://stateofjs.com/2017/opinions/\">意见</a>。</p>\n<h4 id=\"h4-1-react-\"><a name=\"1:%20React%20%E6%9C%80%E5%8F%97%E6%AC%A2%E8%BF%8E\"></a>1: React 最受欢迎</h4>\n<p>今年的结果证实了去年的趋势：React是目前最受欢迎的前端库。</p>\n<div><img src=\"//cdn.liayal.com/image/8570cdd77620fba7d18f2f3406b04dfa\" alt=\"图：React 拥有最多的满意用户（深紫色）\">图：React 拥有最多的满意用户（深紫色）\n</div>\n<p> </p>\n<p>早期对React的批评（通常集中在HTML和JS混合的方式）现在看起来像是一个遥远的记忆。今年，Facebook 通过<a href=\"https://medium.freecodecamp.org/facebook-just-changed-the-license-on-react-heres-a-2-minute-explanation-why-5878478913b2\">取消他们的“专利”条款</a>，平复了开发者们的最后抗议。</p>\n<p>在用户数量和开发人员满意度都处于历史最高水平的情况下，可以肯定地说，React是目前最受欢迎的，至少目前是这样。</p>\n<h4 id=\"h4-2-angular-\"><a name=\"2:%20Angular%E6%AD%A3%E5%9C%A8%E8%BD%AC%E5%90%91%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E8%A7%92%E8%89%B2\"></a>2: Angular正在转向一个新的角色</h4>\n<p>这并不意味着你可以忽略Angular。虽然他已没有React那样的活力，但它有一些强大的基因在身上。</p>\n<p>首先，Angular 有 Google 背后的支持。如你所知，一些业内最好的全职工程师在不断的改善Angular。</p>\n<p>同时还有一个重要的点需要要指出，Angular仍然有一个庞大的用户基础。银行、政府和其他大公司并不能像一般的自由职业者那样迅速地采用最新的技术，他们通常有大量遗留的Angular代码需要维护。</p>\n<div><img src=\"//cdn.liayal.com/image/7d23abb52f97e9ad6e76303d4c607e7e\" alt=\"图：“新” Angular（2+）vs “老” Angular（AngularJS）：较小的采用率，但开发人员的满意度更高\">图：“新” Angular（2+）vs “老” Angular（AngularJS）：较小的采用率，但开发人员的满意度更高\n</div>\n<p> </p>\n<p>但最后一点可能是最关键的：Angular 并不试图与React 正面对抗，而是重新聚焦于企业市场。看看 Angular 对 TypeScript的采用就可以知道：虽然它可能让一些开发人员望而却步，但这个决定也带来了企业应用程序所需的可靠性和安全性。</p>\n<h4 id=\"h4-3-vue-js-\"><a name=\"3:%20%E4%BD%A0%E4%B8%8D%E8%83%BD%E5%86%8D%E5%BF%BD%E8%A7%86Vue.js%E4%BA%86\"></a>3: 你不能再忽视Vue.js了</h4>\n<p>Vue去年似乎毫无进展，在很短的时间内，它就成为了React最大的威胁。它可能没有 Angular 的原始用户基础，也没有 Ember 那么长期存在，但它有一些东西可以击败二者：势头。</p>\n<div><img src=\"//cdn.liayal.com/image/d96bfee3402973257b43af344b492ba8\" alt=\"图：Vue＆React：开发者满意度对比（浅紫色与深紫色）\">图：Vue＆React：开发者满意度对比（浅紫色与深紫色）\n</div>\n<p> </p>\n<p>尽管Vue想击败React看起来还有很长的路要走，但是在提供完整的类似框架的体验方面，Vue可以说有更好的体验，这要归功于由同一个核心团队维护的<a href=\"https://router.vuejs.org/en/\">官路由</a>和<a href=\"https://github.com/vuejs/vuex\">状态管理</a>库。</p>\n<h4 id=\"h4-4-\"><a name=\"4:%20%E4%BA%86%E8%A7%A3%E4%B8%80%E4%BA%9B%E5%BA%93%E5%B0%86%E5%B8%AE%E5%8A%A9%E4%BD%A0%E6%8B%BF%E5%88%B0%E6%9B%B4%E9%AB%98%E7%9A%84%E8%96%AA%E8%B5%84%EF%BC%88%E4%BD%86%E4%B8%8D%E6%98%AF%E5%87%BA%E4%BA%8E%E4%BD%A0%E5%8F%AF%E8%83%BD%E6%83%B3%E5%88%B0%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%89\"></a>4: 了解一些库将帮助你拿到更高的薪资（但不是出于你可能想到的原因）</h4>\n<p>通过收集和交叉参照薪资数据，我们能够找到哪些技术是最有利的。</p>\n<div><img src=\"//cdn.liayal.com/image/3ecbbd0529d7f95c8203f7adf05c6715\" alt=\"图：JavaScript 相关语言，平均薪资从低（左）到高（右）\">图：JavaScript 相关语言，平均薪资从低（左）到高（右）\n</div>\n<p>事实证明，与最高工资相关联的通常是一种特殊的技术，比如 Polymer 或 Reason 。</p>\n<div><img src=\"//cdn.liayal.com/image/c04bbbf156aca319141c39e0c38394d1\" alt=\"图：JavaScript前端库，从最低收入（左）到最高收入（右）\">图：JavaScript前端库，从最低收入（左）到最高收入（右）\n</div>\n<p>现在，在你辞去你目前的工作，度过圣诞假期之前，你要记住，相关并不等于因果关系。 </p>\n<p>虽然Polymer开发人员的报酬可能更高，但也有可能是更高级的开发人员(当然收入更多)倾向于尝试更多样化的库。而初级程序员(从底层开始)则更倾向于专注于一两种主流技术。</p>\n<p>所以，也许(仅仅是也许)总是追求的最新技术并不是赚大钱的关键。</p>\n<h4 id=\"h4-5-2018-graphql-\"><a name=\"5%EF%BC%9A2018%E5%B9%B4%E5%B0%86%E6%98%AF%20GraphQL%20%E7%9A%84%E4%B8%80%E5%B9%B4\"></a>5：2018年将是 GraphQL 的一年</h4>\n<p>如果你和大多数受访者一样，你已经听说过<a href=\"http://graphql.org/\">GraphQL</a>，而且你很感兴趣，但是你还没有真正尝试过（提示：<a title=\"我专门为你写了一片文章\" href=\"https://medium.freecodecamp.org/so-whats-this-graphql-thing-i-keep-hearing-about-baf4d36c20cf\">我专门为你写了一片文章</a> ）。</p>\n<div><img src=\"//cdn.liayal.com/image/a1876b3a08ed2ca46df7b18b10d691a3\" alt=\"REST wishes it had a logo this cool\">REST wishes it had a logo this cool\n</div>\n<p>事实证明，这是一个非常普遍的情况。在调查中提到的所有技术中，尽管目前的用户数量较少，但GraphQL是最令人感兴趣的技术之一。</p>\n<div><img src=\"//cdn.liayal.com/image/baa011bfe8649d5954c775d648bde75f\" alt=\"图：那个大黄条代表了14k对GraphQL好奇的开发人员\">图：那个大黄条代表了14k对GraphQL好奇的开发人员\n</div>\n<p>谈到当前的用户，还值得一提的是，他们对GraphQL总体上非常满意。随着这种高兴趣和高满意度的结合，如果2018年是GraphQL最终跨越鸿沟成为主流技术的一年，那就不要感到惊讶了。 </p>\n<h4 id=\"h4-6-javascript-\"><a name=\"6:%20JavaScript%20!=%20%E5%89%8D%E7%AB%AF\"></a>6: JavaScript != 前端</h4>\n<p>我们已经知道JavaScript不仅仅是在浏览器中使用的。毕竟，多年来，Node已经是一种非常流行的后端选择。</p>\n<p>但在2017，JavaScript正在进一步扩展：像AWS Lambda 这样的平台允许您编写没有后端的后端代码，而物联网的设备越来越受欢迎，这意味着不久之后，您的烤面包机很可能也会运行JavaScript。</p>\n<div><img src=\"//cdn.liayal.com/image/b5b68a2f8497c33d5bea712dd999caa6\" alt=\"图：这款烤面包机使用的是Sack的桌面应用程序所产生的热量来烤面包。\">图：这款烤面包机使用的是Sack的桌面应用程序所产生的热量来烤面包。\n</div>\n<p>如果这听起来很荒谬，请记住，今年最受欢迎的文本编辑器VS Code本身就是用JavaScript编写的，并作为一个 Electron 应用程序运行。<br>\nJavaScript 从成为显示横幅广告的工具开始，到为文本编辑器提供动力，都在几年的时间里。相信我，JavaScript 烤面包机可能会比你想象来的更快。 </p>\n<h4 id=\"h4-7-\"><a name=\"7%EF%BC%9A%E5%BE%AE%E8%BD%AF%E6%AD%A3%E5%9C%A8%E5%8F%8D%E5%87%BB\"></a>7：微软正在反击</h4>\n<p>说到 VS Code，这绝对是今年的大惊喜之一。虽然 Sublime Text 和 Atom 正在争夺文本编辑的霸主地位，但新人 VS Code 通过window闯入并偷走了他们的午餐。</p>\n<p>一直以来，Sublime Text 有速度优势，但被一个不直观的UI所压垮，而 Atom 有一个很好的用户界面，但常常会感到迟钝。</p>\n<div><img src=\"//cdn.liayal.com/image/6f58ce44cbff4d1bc9774b22015dd4df\" alt=\"VS Code\">VS Code\n</div>\n<p>显然 VS Code 可能找到了正确的平衡。虽然它是构建在像 Atom 这样的 Electron 之上的，但是微软的工程师在提高性能方面做了很多工作。就像 Sublime 一样，它支持大量的插件和定制，虽然在一个更加用户友好的界面中，它只是工作包。 </p>\n<p>加上TypeScript 的兴起（稍后），而且微软好像终于把它和 web 开发整合在一起并表明它可以让开发者喜欢用它做更多事，而不是因为他们必须要。</p>\n<h4 id=\"h4-8-javascript-\"><a name=\"8%EF%BC%9A%E4%B8%96%E7%95%8C%E5%90%84%E5%9C%B0%E7%9A%84%20JavaScript%20%E5%90%84%E6%9C%89%E4%B8%8D%E5%90%8C\"></a>8：世界各地的 JavaScript 各有不同</h4>\n<p>当我们谈到JavaScript时，我们通常会把它看作一个单一的、统一的生态系统。诚然，在各个地区都遵循着主流的趋势，但很有趣的是，每个国家都会在JavaScript熔炉中添加自己的调料。</p>\n<div><img src=\"//cdn.liayal.com/image/ed2e7054e5171335422e4b9f742b706e\" alt=\"\"></div>\n<p>例如，你知道 Vue 在中国非常受欢迎吗？这是有道理的，因为中国是 Vue 的创建者<a href=\"https://twitter.com/youyuxi\">Evan You</a>的母语国家，Vue 已经被<a href=\"https://www.alibaba.com/\">阿里巴巴</a>，<a href=\"http://www.baidu.com/\">百度</a>等多家大型科技公司所采用。 </p>\n<p> </p>\n<div><img src=\"//cdn.liayal.com/image/9c7b2839a6fb1afcfa9c0b5c88d5f95a\" alt=\"\"></div>\n<p>另一方面，印度似乎更喜欢 Angular。这可能至少在一定程度上是由印度充满活力的外包行业推动的，Angular往往的是那种大企业项目的完美选择。 </p>\n<h4 id=\"h4-9-javascript-\"><a name=\"9%EF%BC%9A%E5%BC%BA%E7%B1%BB%E5%9E%8B%20JavaScript%20%E6%AD%A3%E5%9C%A8%E5%85%B4%E8%B5%B7\"></a>9：强类型 JavaScript 正在兴起</h4>\n<p>TypeScript. GraphQL. Elm. Reason. 这些都有什么共同点？ 首先，他们都是看到快速增长的尖端技术。 其次，它们都依赖于类型。</p>\n<div><img src=\"//cdn.liayal.com/image/d96af3c985e8ca41be83129667765b7c\" alt=\"TypeScript\">TypeScript\n</div>\n<p>虽然 JavaScript 开发人员长期以来一直享受着能够随心所欲地编写代码的自由，但如果没有编译器指出你的错误或警告，这种自由就会成为一把双刃剑：不那么可靠、容易出错。 </p>\n<p>但在 2017 年，情况终于发生了变化。 TypeScript 被广泛采用并不是巧合，开发人员也正在向类似IDE的文本编辑器（如 VS Code ）迁移，以更好地利用强类型提供的额外功能。</p>\n<h4 id=\"h4-10-javascript-\"><a name=\"10%EF%BC%9AJavaScript%E5%B0%B1%E6%98%AF%E4%BD%A0%E6%83%B3%E8%A6%81%E7%9A%84%E4%B8%9C%E8%A5%BF%E3%80%82\"></a>10：JavaScript就是你想要的东西。</h4>\n<p>这项调查再一次显示了JavaScript生态系统的丰富程度。</p>\n<p>似乎经过了多年的争论和忽视 JavaScript 之后，开发者社区终于找到了第三种选择：改进它。</p>\n<p>JavaScript 基本上是能满足你任何想要实现的需求，它为语言变体和适应性敞开大门，而且这种趋势几乎没有停止的迹象。</p>\n<p>这也许就是为什么大多数开发者都认为，尽管存在缺陷， JavaScript 语言仍然朝着正确的方向发展：</p>\n<div><img src=\"//cdn.liayal.com/image/90df8c7af059bd57ea1d509859ccba00\" alt=\"图：Javascript 正在变得更好\">图：Javascript 正在变得更好\n</div>\n<p> </p>\n<p> </p>\n<p>本文翻译自<a href=\"https://medium.freecodecamp.org/i-just-asked-23-000-developers-what-they-think-of-javascript-heres-what-i-learned-9a06b61998fa\">The state of JavaScript 2017</a>。</p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93915\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93915votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93915\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "731123267d76cfa2b115fc75b6817475", "title": "2017年 JavaScript 框架回顾 — 后端框架", "url": "http://web.jobbole.com/93917/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/ed57ff212886f8907e6219b4c1e89c2b.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,框架", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.npmjs.com/npm/the-state-of-javascript-frameworks-2017-part-3-back-end-frameworks\">Laurie Voss</a>   译文出处：<a target=\"_blank\" href=\"http://www.cnblogs.com/powertoolsteam/p/the-state-of-javascript-frameworks-2017-part-3-back-end-frameworks.html\">葡萄城控件</a>   </div><div id=\"cnblogs_post_body\">\n<p>本文是2017年 JavaScript 框架回顾系列的最后的一篇文章，主要介绍 JavaScript 的后端框架情况。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/ed57ff212886f8907e6219b4c1e89c2b.png\"><img class=\"alignnone size-full wp-image-93919\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/ed57ff212886f8907e6219b4c1e89c2b.png\" alt=\"139239-20180130090857062-802256402\"></a></p>\n<p>从上图中可以看到，Express 作为用 JavaScript 编写的后端服务的主流解决方案，占据了后端框架使用率的绝大部分，其次的四个最大框架对比于 Express 来说，占用率都很小。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/80df6ccb65f02fdd4d3be019e939da4a.png\"><img class=\"alignnone size-full wp-image-93920\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/80df6ccb65f02fdd4d3be019e939da4a.png\" alt=\"139239-20180130090915968-190292404\"></a></p>\n<p>到目前为止，我们所讨论的几乎所有框架的绝对使用量都在不断增加。自2013年以来，Express 的使用率已经增长了6000％。之所以 Express 的6000％增长在第一张图中显示成下降的状态，是因为在同一时间内，总的 npm registry 增长了67,000％。也就是说，JavaScript 社区正在以编程语言史上前所未有的速度增长。</p>\n<p> </p>\n<h1>npm 的前端使用正在爆炸式增长</h1>\n<p>目前，大约83％的 npm 开发人员正在编写运行在前端的 JavaScript，而只有41％的人正在为后端编写代码（前后端开发者有重叠的部分）。前后端开发人员的比例为约为2：1，这也表明 npm 社区的未来在于前端的开发和工具制造。</p>\n<p>接下来我们查看其它的后端框架。</p>\n<p> </p>\n<h1>其他后端框架</h1>\n<p>下面是除 Express 之外的四个最大的后端框架，分别为：</p>\n<ul>\n<li>Koa</li>\n<li>Hapi</li>\n<li>Sails</li>\n<li>Next</li>\n</ul>\n<p> </p>\n<h2>koa</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/7dfbed655fd902cefaf7106874e61f8d.png\"><img class=\"alignnone size-full wp-image-93921\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/7dfbed655fd902cefaf7106874e61f8d.png\" alt=\"139239-20180130091051812-795725909\"></a></p>\n<p>蓝色代表的是 koa 的相对使用率情况。Koa 是 Express 的开发人员使用一套更紧密的设计原则编写的，旨在创建一个更小、更富表现力同时也更健壮的 Web 框架。虽然 Koa 具有不低的使用量，但其增长速度还不是很快。</p>\n<p> </p>\n<h2>Hapi</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/d591dbc9786be63795033416466d09fe.png\"><img class=\"alignnone size-full wp-image-93922\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/d591dbc9786be63795033416466d09fe.png\" alt=\"139239-20180130091135765-1023011000\"></a></p>\n<p>Hapi 是一个用于构建应用和服务的丰富框架，Hapi 使得开发者更专注于编写可复用的应用逻辑，而不必把时间花费在基础设施的搭建上。2014年底，Hapi 有一个短暂的繁荣时期，然而自此之后，Hapi 的使用率就一直处于下滑状态。</p>\n<p> </p>\n<h2>Sails</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/4090ac8797dd9dfb218d40fd4ce5ebfa.png\"><img class=\"alignnone size-full wp-image-93923\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/4090ac8797dd9dfb218d40fd4ce5ebfa.png\" alt=\"139239-20180130091247593-762880060\"></a></p>\n<p>Sails 是 JavaScript 的 Ruby on Rails 克隆。尽管最初在2012年年底推出时，Sails 非常受欢迎，但它却也遵循着“半衰期”的衰退模式，这也表明 Sails 不再被新项目采用。</p>\n<p> </p>\n<h2>Next.js</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/26b285589850054d9361ff4c033a5def.png\"><img class=\"alignnone size-full wp-image-93924\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/26b285589850054d9361ff4c033a5def.png\" alt=\"139239-20180130091323875-252959306\"></a></p>\n<p>Next.js 是一个基于 React 的通用 JavaScript 框架，同时也是一个较新的框架。</p>\n<p>Zeit 的开发团队在 React 的基础上创建了 Next.js。Next.js 提供了一种很方便的方式来创建新的 Web 应用。当前 Next.js 的使用率尽管还很低，但是却一直保持着上升的趋势，值得关注。</p>\n<p> </p>\n<h1>Npm 中的前后端对比</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/55bb5ca1c9467d8e8e9f90c4d590cc9c.png\"><img class=\"alignnone size-full wp-image-93925\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/55bb5ca1c9467d8e8e9f90c4d590cc9c.png\" alt=\"139239-20180130091617546-465634651\"></a></p>\n<p>前面已经提到，当前前端开发者的数量远超后端开发者的数量，但这种情况是否反映在 npm 的前后端安装包数量上呢？</p>\n<p>尽管前后端的安装包也存在重叠的情况，但是整体数量还是后端安装包数量高于前端。</p>\n<p> </p>\n<h1>npm 中的前端使用情况</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/6b5c10c7ebc4ef28745320530518331f.png\"><img class=\"alignnone size-full wp-image-93926\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/6b5c10c7ebc4ef28745320530518331f.png\" alt=\"139239-20180130091653781-2092675145\"></a></p>\n<p>2013年以前，npm 中的前端框架使用量非常大，Backbone 的流行也是促成这种情况的原因之一。但是，随着 Express 和其它服务器端框架的持续增长，Backbone 变得不那么流行了。</p>\n<p>npm registry 的前端使用率在经过两年的下滑之后，2015年开始再次开始增长。</p>\n<p> </p>\n<h1>跟踪 npm 前端的具体使用情况</h1>\n<p>为了弄清楚 npm 前端的具体使用情况，我们将关注于提供前端代码的一些库，主要包括：</p>\n<ul>\n<li>Bable</li>\n<li>Webpack</li>\n<li>Browserify</li>\n<li>Bower</li>\n<li>RequireJS</li>\n<li>SystemJS</li>\n</ul>\n<p> </p>\n<h2>Bable</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/15b57dbf31ea923557ed4efb4be84519.png\"><img class=\"alignnone size-full wp-image-93927\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/15b57dbf31ea923557ed4efb4be84519.png\" alt=\"139239-20180130091750875-1771886963\"></a></p>\n<p>Babel 是一个转译器，用于将现代的 JavaScript 版本转换为与 Node.js 中的服务器端 JavaScript 以及浏览器兼容的 JavaScript 旧版本。Babel 非常受欢迎，被用于前端和后端应用程序中。</p>\n<p> </p>\n<h2>Webpack</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/38e8ca3a1ccea5dc6ab2e0b96477e9c2.png\"><img class=\"alignnone size-full wp-image-93932\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/38e8ca3a1ccea5dc6ab2e0b96477e9c2.png\" alt=\"139239-20180130092333500-237031113\"></a></p>\n<p>Webpack 是专门为浏览器提供 JavaScript 代码的工具。React 一直使用 Webpack 为浏览器服务做准备，很长一段时间，React 和 Webpack 都保持着相同的增长趋势。</p>\n<p>但是从2016年年中开始，Webpack 的使用率开始超过 React。这也表明，Web 开发人员已经开始更广泛的采用 Webpack，而不仅仅是 React 应用程序。</p>\n<p> </p>\n<h2>Browserify</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/eec572e4028030d1a3207420d09d9a17.png\"><img class=\"alignnone size-full wp-image-93931\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/eec572e4028030d1a3207420d09d9a17.png\" alt=\"139239-20180130092319390-1078733961\"></a></p>\n<p>在 WebPack 成为流行的 JavaScript 代码工具之前，Browserify 一直是浏览器端转化服务器端 JavaScript 的重要工具。Browserify 也曾在2015年中期保持很高的受欢迎程度，但是从2016年开始，随着 Webpack 的逐渐流行，Browserify 的受欢迎度出现了急剧下滑的现象。</p>\n<p>这也许和两个工具的设计目的有关。Browserify 为浏览器带来了 Node.js API surface（包括用于许多后端的API），Webpack 则是一个更通用的模块系统和编译工具，用于加载图片、CSS和其它前端资源。因此，对于非 Node.js 开发者来说，Webpack 更为有用。随着 npm Registry 前端使用的急剧增加，Webpack 已经成为一个非常有吸引力的选择。</p>\n<p> </p>\n<h2>Bower</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/82d2f1dee187a8d353e92dafc7be4f03.png\"><img class=\"alignnone wp-image-93930 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/82d2f1dee187a8d353e92dafc7be4f03.png\" width=\"742\" height=\"511\"></a></p>\n<p>浏览器端模块化 JavaScript 的另一个解决方案是 Bower，Bower 将模块引入了浏览器。尽管 Bower 客户端是由 npm Registry 托管和安装的，但是 Bower 却是一个完全独立的非 npm 模块。</p>\n<p>虽然 Bower 的开发人员认为其客户端具有许多优秀的特性，但是他们还是赞同 CommonJS（大多数 npm 包所使用的 JavaScript 模块的格式）是一种更为灵活和流行的解决方案。Bower 的受欢迎程度自2014年起开始出现了持续的下滑。</p>\n<p> </p>\n<h1>RequireJS 和 SystemJS</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/8c2442a4d14c18f110e18a531e121585.png\"><img class=\"alignnone size-full wp-image-93929\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/8c2442a4d14c18f110e18a531e121585.png\" alt=\"139239-20180130092230875-63767441\"></a></p>\n<p>Bower 的模块并不是 CommonJS 的唯一选择，RequireJS 是另一种具有模块格式的可选方案。RequireJS 在2013年初很受欢迎，但自2014年之后，开始与 Bower 一同出现下滑。2015年发布的 SystemJS 增长很缓慢。</p>\n<p> </p>\n<h1>Webpack 和 Express</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/6678b9dbd780a9bc7122c64e7d462a76.png\"><img class=\"alignnone size-full wp-image-93928\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/6678b9dbd780a9bc7122c64e7d462a76.png\" alt=\"139239-20180130092213968-1643435504\"></a></p>\n<p>目前，我们判断 npm 前端使用量的最可靠依据就是 Webpack。相比于 Express 的相对使用率，可以看到，Webpack 在三年时间内，相对使用率迅速攀升到了 Express 的一半。</p>\n<p>我们大胆预测 Webpack 将继续增长，甚至可能会超过 Express，这也与我们所见到的 Webpack 的新用户比例一致。几年后，npm 将是一个主要的前端工具。</p>\n<p> </p>\n<h1>总结</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/2fb2a97fef3a1517b92c4e76bb42a157.png\"><img class=\"alignnone size-full wp-image-93933\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/2fb2a97fef3a1517b92c4e76bb42a157.png\" alt=\"139239-20180130092439312-1769777919\"></a></p>\n<p>npm 生态系统中前端和后端的使用量增长，对于 JavaScript 的整体而言都是一个好消息。JavaScript 语言所具有的灵活性和易用性，是一种很大的优势。</p>\n<p>也许 JavaScript 的广泛采用，正是由于 JavaScript 的内置特性很少，使得 JavaScript 语言在被使用时，有了很多的其它选择。</p>\n<p>现在 JavaScript 使用量正在急剧增长，npm 也在与之同步增长。</p>\n<p> </p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93917\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93917votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93917\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "e4488dbebbce3c0a62294ccb97b3e6e7", "title": "2018 前端趋势：更一致，更简单", "url": "http://web.jobbole.com/93812/", "create_date": "2018-02-03", "front_image_url": ["https://static.oschina.net/uploads/space/2018/0115/145223_a47H_2896879.png"], "praise_nums": "1", "comment_nums": "3", "fav_nums": "4", "tags": "基础技术,趋势", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://blog.logrocket.com/what-im-looking-for-from-frontend-in-2018-2f1de300b548\">Kaelan Cooter</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/what-im-looking-for-from-frontend-in-2018\">开源中国</a>   </div><p><img src=\"https://static.oschina.net/uploads/space/2018/0115/145223_a47H_2896879.png\" width=\"1920\" height=\"1280\"></p>\n<p><a href=\"https://blog.logrocket.com/frontend-in-2017-the-important-parts-4548d085977f\" rel=\"nofollow\">2017 是一个前端 Web 开发年</a>。</p>\n<p>像 React 和 Angular 这样的框架，继续在社区中享有大规模的支持，但是，新的候选者 Vue ，人气也很旺。Webpack 依旧是构建的首选工具，NPM 仍旧是系统选择包的工具。WebAssembly 以前所未有的速度向 Web 开放了众多新的和令人兴奋的案例。像 GraphQL 等技术，革新了书写和在 web 应用中使用 API 的方式。</p>\n<p>于此同时，语言自身也在改进，ECMAScript 标准的 2017 版本增加了异步功能，这大大提高了开发者写异步代码时的经验。现在，它们被所有的主流浏览器支持。另一个值得注意的改进是共享内存和原子操作。</p>\n<p>然而， 在暴露出他们出现浏览器侧信道攻击<a href=\"https://security.googleblog.com/2018/01/todays-cpu-vulnerability-what-you-need.html\" rel=\"nofollow\">涉及推测执行</a>之后，共享内存在2月5日被<a href=\"https://www.chromium.org/Home/chromium-security/ssca\" rel=\"nofollow\">所有的主流浏览器</a>暂时禁止 。</p>\n<p>预计今年某个时候，当浏览器的开发商找到的阻止漏洞的方法时，共享内存就可以使用了。</p>\n<h2>库和框架</h2>\n<h3>React</h3>\n<p>2017年9月，React 16 的发布赚足眼球。这是迄今为止，React 动静最大的一个版本：增加了数据块（fragments，现在可以返回一个数组，而不是将所有的东西都装在一个无用的</p>\n<div>元素里）；更佳的容错机制（可以显示错误的范围，出错时，React 就会从根元素卸载或者在特殊的出错范围组件处卸载）；接口（portals，现在你可以在 React DOM 树之外的 DOM 节点中展示 React 子元素），还有数据流（streaming，允许服务器端的 App 向客户端提供数据流，而不必等待整个序列完成之后才进行）。</div>\n<p>此外，React 还采用 RFC 模式，让 React 开发团队有机会获得更多有益的想法。任何会影响到 React API 的 RFC 建议，都可以提交。React 开发团队发布了他们的语义修改（context changes）建议作为第一个 RFC 的示范。读起来还挺有意思。</p>\n<p>React 粉们已经提供好几个建议，有些功能非常有趣，包括：</p>\n<ul>\n<li>处理方法的参数——减少代码量，这个建议中，props，state 和 context 都被视为参数。</li>\n<li>setState 返回一个承诺（promise）——如果你需要 setState 同步，并且你在一个异步/等待的环境中，你会发现这对形影不离的鸳鸯对子非常美好。</li>\n<li>异步-安全静态生命周期钩子——完全抛弃传统的、基于类的 API ，让我们处理起异步数据来更容易，还能节省不必要的处理步骤，向方法组件提供更洁净的升级通道。</li>\n</ul>\n<p>当然，并不是所有的建议都会出现在未来的版本中。但要承认，React 开发团队为用户们做了这些安排，还是很不错的。随着 Yarn 和 Ember 等项目的应用展开，RFC 将会变成主流形式。</p>\n<p>现代网络开发过程中，设置并协调所有工具相当复杂，所以，Boilerplate 项目在 React 社区内总是受到欢迎。大多数人会建议用户直接克隆项目文件，就地起炉灶。新手常常茫然不知所措。因为，他们总是会看到一个复杂的“白板”（blank slate），竟然会依赖成千上万个类库或软件，而且他们完全不理解那些配置代码是什么意思。</p>\n<p>Facebook 的 <a href=\"https://github.com/facebookincubator/create-react-app\" target=\"_blank\" rel=\"nofollow\">create-react-app</a> 则不同 —— 它是一个命令行工具，可以将 Webpack、Babel、PostCSS 和 Jest 打包到一起，在零配置情况下的进行开发。自去年以来，它越来越受欢迎。它在 GitHub 中，是一颗闪亮的明星，star 数由 2017 年初的 18k 直接攀升到年底的 40k 。它还提供一个 “eject”（弹射）命令，让你跳出 create-react-app 模式。那个模式下，依赖软件自动安装、配置文件自动生成，你只需要手动修改配置文件。有人说，这个命令的面世也是 React 近年来大受欢迎的部分原因。</p>\n<p>对于服务器端的 React 应用程序，<a href=\"https://github.com/zeit/next.js\" target=\"_blank\" rel=\"nofollow\">next.js</a> 是个很流行的选择。它提供了你所需要的“通用的”（universal）网络应用开发工具，安装、配置起来还挺简单。在开发难度日益增加，渐进迭代式网络应用（progressive web app）再度受宠，通用的或者同构（isomorphic）的应用降温的情况下，这一点尤其重要。如果你要新开发一个项目，我郑重地推荐你使用 next.js 。</p>\n<p>我认为，React 社区最终会开发出类似 create-react-app 的东西，但针对的是更为复杂的应用。</p>\n<p>next.js 与此目标非常接近。但它只是服务器端的应用，这就意味着它不会成为主流。在我看来，还没有哪一个框架已经同时实现即好开发，又好使用。</p>\n<blockquote><p>“附带电池”（batteries included）的方法将诱惑越来越多的开发者，从而对系统配置的复杂和系统维护所必须花费的时间产生错觉。</p></blockquote>\n<h3>Angular</h3>\n<p>尽管 Angular 最新的版本（<a href=\"https://github.com/angular/angular/blob/master/CHANGELOG.md\" target=\"_blank\" rel=\"nofollow\">版本 5.1.3</a> ）已于1月3号发布了，但是 AngularJS 项目（也就是 Angular 1.x 版本 ）仍旧处于活跃的开发状态，甚至在 2017年12月18号 发布了<a href=\"https://github.com/angular/angular.js/blob/master/CHANGELOG.md\" target=\"_blank\" rel=\"nofollow\">版本  1.6.8</a> 。许多大公司仍旧使用旧版本的 Angular ，并由于这个原因重要的速度改进和安全修复都移植到了 AngularJS 上。</p>\n<p>尽管谷歌对就项目的支持何时结束还不明确，但是在过去的<a href=\"https://stackoverflow.com/questions/37037251/angularjs-1-x-support-lifecycle\" target=\"_blank\" rel=\"nofollow\">官方说法</a>中已表明对其的支持，在主要的 web 流量转向 angular.io 而非 angular.org 之前是不会停止的。然而，鉴于旧版本使用的是相当自由的 <a href=\"https://github.com/angular/angular.js/blob/master/LICENSE\" target=\"_blank\" rel=\"nofollow\">MIT 协议</a>，尽管官方在2018年不会对其在继续支持，你也可以期待进一步的发展。</p>\n<p>近来 Angular 的发布引起了大家的注意，尤其是最新的 <a href=\"https://blog.angular.io/angular-5-1-more-now-available-27d372f5eb4e\" target=\"_blank\" rel=\"nofollow\">v5 版本</a>的发布。通过如对模板的提前（ahead-of-time）编译，以及在打包中简单方便地整合 service worker 这样创新性的功能，其保持着与其竞争者的与众不同。</p>\n<p>当这些功能对于任何应用程序都是必备的时候，Angular 的闪光之处在于其集成的工具。<a href=\"https://cli.angular.io/\" target=\"_blank\" rel=\"nofollow\">Angular CLI</a> 简单易用，并且现在还可以通过 <a href=\"https://developers.google.com/web/fundamentals/architecture/app-shell\" target=\"_blank\" rel=\"nofollow\">App Shell</a> 提高对快速生成通用的和渐进的 web 应用的支持。</p>\n<p>React 社区所秉持的是一种不太固执己见的前端开发哲学。大多数情况下，开发者需要手动安装许多复杂的功能，除非他们使用 <a href=\"https://github.com/topics/boilerplate\" target=\"_blank\" rel=\"nofollow\">multitude of boilerplate projects</a> 项目中的一种。许多开发者倾向于自己动手设置，这样他们可以理解系统的各个方面。</p>\n<p>有时 web 社区感觉起来是在固执己见和集中化与非固执己见和非集中化之间的轮回。一件令人不禁思考的事情是 React 社区是否会最终向其他的方向发展。</p>\n<p>在完成了几个大型定义开发的 React / Redux / Webpack 项目后，所有的事情都基本为你准备好了，“马上开始工作”（just work）是一种极具吸引力的前景。</p>\n<p>通过近来发布的版本，可以有趣的看到 Angular 在新的一年中竟会更加受到欢迎。尽管还很难说有多少，但是当你看到 NPM 的下载量的时候，Angular 并没有看起来增长的那么多。React 已经继续保持领先，尤其是在过去的一年中。它目前每天 NPM 的下载量是其他的三倍。</p>\n<h3>Vue</h3>\n<p><a href=\"https://github.com/vuejs/vue\" target=\"_blank\" rel=\"nofollow\">Vue</a> 在 2017 年已经成了 React 一个非常受欢迎的可替代选项。它们都利用了虚拟 DOM ，并且都是基于组件且超轻量级的。在 JavaScript 2017 调查的描述中，Vue 被列为Angular 1 和 React 之后<a href=\"https://stateofjs.com/2017/front-end/results\" target=\"_blank\" rel=\"nofollow\">第三个最常被使用的</a>前端框架。最值得注意的是它还是那次调查中最“想要去学习”的框架。</p>\n<p>Vue 的核心团队计划 <a href=\"https://github.com/vuejs/roadmap\" target=\"_blank\" rel=\"nofollow\">2.6 版本的</a>发布会赶在今年的2月份之前，并将专注于错误处理、函数式组件一级服务端渲染。跟随 React 的引领，他们也计划在未来的版本中只支持那些基业长青的浏览器版本。</p>\n<blockquote><p>Vue 在过去几年<a href=\"https://npm-stat.com/charts.html?package=vue&amp;package=react\" target=\"_blank\" rel=\"nofollow\">日渐受欢迎</a>, 但要取代 React 当前前端视图库王者的地位，现在看来还很难说。</p></blockquote>\n<p>许多人都写过它对于<a href=\"https://medium.com/reverdev/why-we-moved-from-angular-2-to-vue-js-and-why-we-didnt-choose-react-ef807d9f4163\" target=\"_blank\" rel=\"nofollow\">来自 Angular 领域的开发者们</a>的吸引力, 而我也期望这种吸引力能继续保持。通常的观点是，Vue 不需要你去使用 JSX ，也不像 Angular，它不会强制要求你使用 TypeScript。</p>\n<p>它的模板语言也同 Angular 的相当类似。此外，Vue 也有一整套类似 Angular 的联系紧密的包，不过 Vue 在以一种更加分散的方式将它们维护得相当好。</p>\n<h2>模块打包器</h2>\n<h3>Webpack</h3>\n<p><a href=\"https://medium.com/webpack/webpack-3-official-release-15fd2dd8f07b\" target=\"_blank\" rel=\"nofollow\">Webpack 3</a> 在 2017 年 6 月发布，将作用域的提升（scope hoisting）作为它的旗舰功能。作用域的提升（scope hoisting）将所有模块一同封装在一单个闭包中而不是分拆它们。这可以显著地提升 bundle 的执行时间和 bundle 的体积。 Rollup 是一个显著的特性，另一个捆绑器模块已经成为 Webpack 2 及更高版本中功能的灵感来源。</p>\n<p>Webpack 团队已为 Webpack v4 版<a href=\"https://medium.com/webpack/road-to-webpack-4-week-20-21-1641d03ce06e\" target=\"_blank\" rel=\"nofollow\">计划</a>了许多重要的特征，这是为 alpha 版本写的博文，预计将会很快发布。最大的特点是 WebAssembly 模块的支持–目标是使 WASM 模块作为 ECMAScript 模块轻易地运行在 Webpack 上。还计划在生成 CSS 的方式彻底修改 WebPack 。而不是把 CSS 植入 JavaScript 中，Webpack 4 将生成 CSS 资源。</p>\n<p>新版本还将专注于构建效率（性能）– 这是 Webpack 社区投票选出的最优先的 issue 。</p>\n<p>在我看来，Webpack 也应该更多地关注文档和配置信息。虽然 Webpack 的过人之处是配置灵活，但它牺牲了用户体验。</p>\n<p>一个 Webpack 的 zero-config（零配置）模式已被提出，但它并没有被优先考虑，尽管像 Parcel 这样的模块打包器已经爆炸式地流行。</p>\n<h3><strong>Parcel</strong></h3>\n<p>2017 年底，Parcel 大出风头，在不到一个月的时间里斩获 1.4万 多个 star。它的成功，得益于 Webpack 提供的“零配置”的进展缓慢和混沌不清。它提供了几个重要的、跟 Webpack 类似的模块绑定功能，如代码分割和模块热替换。</p>\n<p>接下来的开发工作将会集中在补充与 Webpack 类似的小功能上，如进入点（entry point）和一个完备的插件系统。</p>\n<p>2018 年我将会密切关注 Parcel 的开发进展。它是否能取代炙手可热的 Webpack ，让我们拭目以待。</p>\n<blockquote><p>尽管 Webpack 的最新版本推出了很有价值的功能，新版的用户文档网站也进行了大幅的改进，还是让人感觉到 Webpack 正在走下坡路。</p></blockquote>\n<p>在复杂应用情景下，Webpack 的配置工作仍然是一件头疼的事。</p>\n<p>如果能纾解开发人员的痛苦，提供一个不需要多少配置工作的替代方案，Parcel 定会有所成就。</p>\n<h3>其他工具</h3>\n<p>Gulp 和 Browserify 仍然被数以千计的项目以各种形式采用，但不再被认为是前端构建工具的前沿技术。它们的持续开发对于现有系统的维护非常重要，并且它们目前仍然可以用于非常具体的新项目用例。然而，过去几年开发者的普遍看法是，它们过于复杂，需要过多的手动设置。在 Webpack 应用越来越广泛占据领先地位的情况下，他们去年的 NPM 下载量都在<a href=\"https://npm-stat.com/charts.html?package=gulp&amp;package=browserify&amp;package=webpack&amp;package=parcel-bundler&amp;from=2017-01-09&amp;to=2018-01-09\" target=\"_blank\" rel=\"nofollow\">持续下滑</a>。</p>\n<h2>工具</h2>\n<h3>TypeScript</h3>\n<p>TypeScript 有一个版本<a href=\"https://github.com/Microsoft/TypeScript/wiki/Roadmap#27-january-2018\" target=\"_blank\" rel=\"nofollow\">计划</a>在一月发布，包括新的 ECMAScript 功能，例如<a href=\"https://github.com/tc39/proposal-numeric-separator\" target=\"_blank\" rel=\"nofollow\">数字隔离器</a>和几种涉及对象的文字和类的高级类型系统改进。还有<a href=\"https://github.com/Microsoft/TypeScript/pull/19675\" target=\"_blank\" rel=\"nofollow\">一个改变</a>计划，是提高 TypeScript 的模块系统处理非 ECMAScript 模块的能力。</p>\n<p>这将使它更符合 Babel 处理模块互操作性的方式。希望这可以让 TypeScript 更容易使用不同类型的模块，毕竟对新用户来说是一个致命的痛点。此版本还计划通过增加对 ECMAScript 模块自动转换的支持，来改进已经非常棒的重构功能。</p>\n<blockquote><p>微软的 TypeScript <a href=\"http://www.npmtrends.com/flow-bin-vs-typescript\" target=\"_blank\" rel=\"nofollow\">显然在对抗 Flow 上已经赢了</a>（对手是来自  Facebook 的类型检查工具）。这有很多原因，但在我看来，仅仅是微软把项目运作得很好。</p></blockquote>\n<p>跟微软<a href=\"https://github.com/Microsoft/TypeScript/releases\" target=\"_blank\" rel=\"nofollow\">每个月的大量的版本发布</a>相比，Flow 就是<a href=\"https://github.com/facebook/flow/releases\" target=\"_blank\" rel=\"nofollow\">零星的小的版本</a>。而且使用 TypeScript 的工具也更好，带有 tslint 的卓越的 linter 支持和 Visual Studio Code（以及许多其他编辑器）提供的绝妙的编辑器支持，提供了 Flow 不可能实现的自动转换。</p>\n<p>这跟是否是一个更好的类型系统几乎是无关的。——我敢打赌，大多数开发人员更关心的是支持和易用性。</p>\n<p>此外，TypeScript 的社区是很大的。通过  <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped\" target=\"_blank\" rel=\"nofollow\">DefinitelyType</a>  项目，TypeScript 提供的流行 NPM 包的类型定义与  <a href=\"https://github.com/flowtype/flow-typed\" target=\"_blank\" rel=\"nofollow\">flow-typed</a>  提供的类型定义相比，要多很多。如果不出意外，这一事实对任何使用 Flow 的项目的长期生存能力构成严重威胁。</p>\n<h3>移动端</h3>\n<p>通用 Web 应用程序在 React 出现的时候开始流行起来。这种创新使前端 Web 应用程序能够以增加开发复杂性为代价在服务器上先渲染。虽然它们还很是很流行，但它们绝不是真正的做事方式。</p>\n<p>在移动端，当前的开发者已经开始专注于开发所谓的<a href=\"https://developers.google.com/web/progressive-web-apps/\" target=\"_blank\" rel=\"nofollow\">渐进式 Web 应用</a> – 这是最初由 Google 赞助的一项计划，旨在使 Web 应用对移动端用户更加友好。对于开发者来说，这意味着更加关注速度和移动端用户体验。这可以通过使用像 service workers 来实现离线支持和应用程序清单文件来定制应用在操作系统中的外观等新技术来实现。这可以被看作是响应式网页设计的自然演变。</p>\n<p>Google 还赞助了加速移动端页面（<a href=\"https://www.ampproject.org/\" target=\"_blank\" rel=\"nofollow\">Accelerated Mobile Pages</a>，AMP）项目，该项目通过标准化由 Google 提供的缓存式 <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components\" target=\"_blank\" rel=\"nofollow\">Web Components</a> 轻量级文档格式来极大地增加了移动设备上的网页加载次数。它已经被网络上的主流内容发布商迅速采用，但关于发布商的<a href=\"https://www.wsj.com/articles/google-amp-gets-mixed-reviews-from-publishers-1477648838\" target=\"_blank\" rel=\"nofollow\">广告收入</a>和关于通过在 <a href=\"https://www.theregister.co.uk/2017/05/19/open_source_insider_google_amp_bad_bad_bad/\" target=\"_blank\" rel=\"nofollow\">Google 服务器</a>上托管内容而放弃控制权的担忧这两方面存在持续的争议。</p>\n<p>如果我们希望 Web 继续保持为一个充满竞争和吸引力的平台，我们需要与移动端应用竞争。</p>\n<blockquote><p>尽管<a href=\"https://medium.com/dev-channel/why-progressive-web-apps-vs-native-is-the-wrong-question-to-ask-fb8555addcbb\" target=\"_blank\" rel=\"nofollow\">渐进式 Web 应用不能做移动端应用可以做的所有事情</a>，但它是维持 Web 长期健康状况的重要一步。我希望他们变得更受欢迎，最好在不久的将来成为强制性的。</p></blockquote>\n<h3>概括总结</h3>\n<p>总的来说，前端已趋于将现有项目和 Web 开发中许多不同的部分进行整合。React、webpack、TypeScript 继续变得更受欢迎。Vue 和 Parcel 看起来可能成为各自的领域的领先者的竞争威胁；同时，旧的技术如 Angular 和 Browserify 还在，但以开始缓慢下滑。</p>\n<p>一些趋势仍在继续，如基于组件的设计。它绝不是<a href=\"https://en.wikipedia.org/wiki/Component-based_software_engineering\" target=\"_blank\" rel=\"nofollow\">一个新概念</a>，它最近开始复兴<a href=\"https://en.wikipedia.org/wiki/Entity%E2%80%93component%E2%80%93system\" target=\"_blank\" rel=\"nofollow\">并不局限于 Web 开发</a>。我不希望应用程序架构在短期内发生任何根本性的变化。</p>\n<p>有一种倾向于开发者友好的“自以为是”的工具。你可以在反对 Webpack 和 React 的生态系统的复杂性上看到它们。简单的确胜过复杂，但是没有复杂度很难满足各种各样的需求。</p>\n<blockquote><p>前端发展需要的是更多的共识。人们常常嘲笑它过于复杂，我也有这样的观点。</p></blockquote>\n<p>最近的一个重点是吸引新的开发人员，我认为我们也应该关注一般企业 Web 项目中的复杂性——包括应用程序本身和辅助它的构建工具。</p>\n<h3>插件: LogRocket, 一款适合 Web 应用的 DVR</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0115/145200_rDFz_2896879.png\" width=\"2000\" height=\"1128\"></p>\n<p><a href=\"https://logrocket.com/\" target=\"_blank\" rel=\"nofollow\">LogRocket</a> 是一个前端日志工具，它可以让你像发生在自己的浏览器中那样重现问题。无需猜测错误发生的原因，或者要求用户截图以及日志转储，LogRocket 可以让你重现会话以便快速了解发生了什么错误。无需考虑框架，它适用于任何应用程序，也有插件可以从 Redux、Vuex和@ngrx/tore 上记录额外的上下文。</p>\n<p>除了记录 Redux 动作和状态之外，LogRocket 还会记录控制台日志、JavaScript 错误、堆栈信息、带有头+主体的网络请求/响应、浏览器元数据和自定义日志。它还可以指导 DOM 记录页面上的 HTML 和 CSS ，即使是最复杂的单页面应用程序也可以重建像素完美的视频。</p>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93812\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93812votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93812\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "563f422d4f079269b34b454b8a1db59f", "title": "VUE 使用中踩过的坑", "url": "http://web.jobbole.com/93944/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/04/9c392404c95efdb0bf6da94525674df6.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,Vue", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000013008420\">Xguoliang</a>   </div><div>\n<h2>前言</h2>\n<p>vue如今可谓是一匹<strong>黑马</strong>,github star数已居第一位！前端开发对于vue的使用已经越来越多，它的优点就不做介绍了,<br>\n本篇是我对vue使用过程中以及对一些社区朋友提问我的问题中做的一些总结,帮助大家踩坑。如果喜欢的话可以点波赞，或者关注一下，希望本文可以帮到大家!!!</p>\n<p>———-我是分割线</p>\n<h2>本篇介绍的问题大概如下:</h2>\n<ol>\n<li>路由变化页面数据不刷新问题</li>\n<li>setTimeout/setInterval(泛指异步回掉函数的this指向)this指向改变，无法用this访问VUe实例</li>\n<li>setInterval路由跳转继续运行并没有及时进行销毁</li>\n<li>vue 滚动行为用法,进入路由需要滚动到浏览器底部 头部等等</li>\n<li>实现vue路由拦截浏览器的需求,进行 一系列操作 草稿保存等等</li>\n<li>v-once 只渲染元素和组件一次，优化更新渲染性能</li>\n<li>vue本地代理配置 解决跨域问题,仅限于开发环境</li>\n<li>本地开发 没有任何问题 部署服务器 就404啊这些问题</li>\n</ol>\n<h2>1. 路由变化页面数据不刷新问题</h2>\n<p>出现这种情况是因为依赖路由的params参数获取写在created生命周期里面,因为相同路由二次甚至多次加载的关系 没有达到监听，退出页面再进入另一个文章页面并不会运行created组件生命周期,导致文章数据还是第一次进入的数据</p>\n<p>解决方法：watch监听路由是否变化</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc6d501659264\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n watch: {\r\n // 方法1\r\n  '$route' (to, from) { //监听路由是否变化\r\n    if(this.$route.params.articleId){// 判断条件1  判断传递值的变化\r\n      //获取文章数据\r\n    }\r\n  }\r\n  //方法2\r\n  '$route'(to, from) {\r\n    if (to.path == \"/page\") {    /// 判断条件2  监听路由名 监听你从什么路由跳转过来的\r\n       this.message = this.$route.query.msg     \r\n    }\r\n  }\r\n  \r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc6d501659264-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc6d501659264-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc6d501659264-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc6d501659264-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc6d501659264-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc6d501659264-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc6d501659264-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc6d501659264-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc6d501659264-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc6d501659264-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc6d501659264-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc6d501659264-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc6d501659264-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc6d501659264-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc6d501659264-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc6d501659264-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">watch</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc6d501659264-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 方法1</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc6d501659264-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">'$route'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">to</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">from</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//监听路由是否变化</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc6d501659264-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">route</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">params</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">articleId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-c\">// 判断条件1  判断传递值的变化</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc6d501659264-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-c\">//获取文章数据</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc6d501659264-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc6d501659264-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc6d501659264-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//方法2</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc6d501659264-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-s\">'$route'</span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">to</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">from</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc6d501659264-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">to</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/page\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/// 判断条件2  监听路由名 监听你从什么路由跳转过来的</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc6d501659264-11\"><span class=\"crayon-h\">       </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">route</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">msg</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc6d501659264-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc6d501659264-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc6d501659264-14\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc6d501659264-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p></p>\n<h2>2. 异步回调函数中使用this无法指向vue实例对象</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc77162387456\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//setTimeout/setInterval ajax Promise等等\r\ndata(){\r\n  return{\r\n    ...\r\n  }\r\n},\r\nmethods (){\r\n     setTimeout(function () {   //其它几种情况相同\r\n      console.log(this);//此时this指向并不是vue实例 导致操作的一些ma'f\r\n    },1000);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc77162387456-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc77162387456-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc77162387456-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc77162387456-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc77162387456-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc77162387456-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc77162387456-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc77162387456-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc77162387456-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc77162387456-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc77162387456-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc77162387456-1\"><span class=\"crayon-c\">//setTimeout/setInterval ajax Promise等等</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc77162387456-2\"><span class=\"crayon-e\">data</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc77162387456-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc77162387456-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc77162387456-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc77162387456-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc77162387456-7\"><span class=\"crayon-e\">methods</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc77162387456-8\"><span class=\"crayon-h\">     </span><span class=\"crayon-e\">setTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">//其它几种情况相同</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc77162387456-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//此时this指向并不是vue实例 导致操作的一些ma'f</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc77162387456-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc77162387456-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p><strong>解决方案 变量赋值和箭头函数</strong></p>\n<p><a href=\"http://blog.csdn.net/nfer_zhuang/article/details/48781671\">var和let的区别</a></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc7b195490919\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n //使用变量访问this实例\r\nlet self=this;   \r\n    setTimeout(function () {  \r\n      console.log(self);//使用self变量访问this实例\r\n    },1000);\r\n    \r\n //箭头函数访问this实例 因为箭头函数本身没有绑定this\r\n setTimeout(() =&gt; { \r\n   console.log(this);\r\n }, 500);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc7b195490919-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc7b195490919-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc7b195490919-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc7b195490919-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc7b195490919-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc7b195490919-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc7b195490919-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc7b195490919-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc7b195490919-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc7b195490919-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc7b195490919-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//使用变量访问this实例</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc7b195490919-2\"><span class=\"crayon-e\">let </span><span class=\"crayon-r\">self</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc7b195490919-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">setTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc7b195490919-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//使用self变量访问this实例</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc7b195490919-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc7b195490919-6\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc7b195490919-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//箭头函数访问this实例 因为箭头函数本身没有绑定this</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc7b195490919-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc7b195490919-9\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc7b195490919-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">500</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h2>3. setInterval路由跳转继续运行并没有及时进行销毁</h2>\n<p>比如一些弹幕，走马灯文字，这类需要定时调用的，路由跳转之后，因为组件已经销毁了，但是setInterval还没有销毁，还在继续后台调用，控制台会不断报错，如果运算量大的话，无法及时清除，会导致严重的页面卡顿。</p>\n<p><strong>解决办法：在组件生命周期beforeDestroy停止setInterval</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc7f290464614\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//组件销毁前执行的钩子函数，跟其他生命周期钩子函数的用法相同。\r\nbeforeDestroy(){\r\n     //我通常是把setInterval()定时器赋值给this实例，然后就可以像下面这么停止。\r\n    clearInterval(this.intervalId);\r\n},</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc7f290464614-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc7f290464614-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc7f290464614-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc7f290464614-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc7f290464614-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc7f290464614-1\"><span class=\"crayon-c\">//组件销毁前执行的钩子函数，跟其他生命周期钩子函数的用法相同。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc7f290464614-2\"><span class=\"crayon-e\">beforeDestroy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc7f290464614-3\"><span class=\"crayon-h\">     </span><span class=\"crayon-c\">//我通常是把setInterval()定时器赋值给this实例，然后就可以像下面这么停止。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc7f290464614-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">clearInterval</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">intervalId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc7f290464614-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h2>4. vue 滚动行为用法,进入路由需要滚动到浏览器底部 头部等等</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc83143525041\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n使用前端路由，当切换到新路由时，想要页面滚到顶部，或者是保持原先的滚动位置，就像重新加载页面那样。 \r\nvue-router 能做到，而且更好，它让你可以自定义路由切换时页面如何滚动。</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc83143525041-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc83143525041-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc83143525041-1\">使用前端路由，当切换到新路由时，想要页面滚到顶部，或者是保持原先的滚动位置，就像重新加载页面那样。<span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc83143525041-2\"><span class=\"crayon-v\">vue</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">router</span><span class=\"crayon-h\"> </span>能做到，而且更好，它让你可以自定义路由切换时页面如何滚动。</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><strong>注意: 这个功能只在支持 history.pushState 的浏览器中可用。</strong><br>\n路由设置如下: <a href=\"https://router.vuejs.org/zh-cn/advanced/scroll-behavior.html\">详情猛戳</a></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc86324731132\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n const router = new VueRouter({\r\n   mode: 'history',\r\n scrollBehavior (to, from, savedPosition) {\r\n     if (savedPosition) { //如果savedPosition存在，滚动条会自动跳到记录的值的地方\r\n       return savedPosition\r\n     } else {\r\n       return { x: 0, y: 0 }//savedPosition也是一个记录x轴和y轴位置的对象\r\n      }\r\n     }，\r\n   routes: [...]\r\n })</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc86324731132-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc86324731132-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc86324731132-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc86324731132-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc86324731132-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc86324731132-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc86324731132-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc86324731132-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc86324731132-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc86324731132-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc86324731132-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc86324731132-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">router</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VueRouter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc86324731132-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'history'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc86324731132-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scrollBehavior</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">to</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">from</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">savedPosition</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc86324731132-4\"><span class=\"crayon-h\">     </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">savedPosition</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//如果savedPosition存在，滚动条会自动跳到记录的值的地方</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc86324731132-5\"><span class=\"crayon-h\">       </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">savedPosition</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc86324731132-6\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc86324731132-7\"><span class=\"crayon-h\">       </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-c\">//savedPosition也是一个记录x轴和y轴位置的对象</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc86324731132-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc86324731132-9\"><span class=\"crayon-h\">     </span><span class=\"crayon-sy\">}</span>，</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc86324731132-10\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">routes</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc86324731132-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<h2>5. 实现vue路由拦截浏览器的需求,进行一系列操作 草稿保存等等</h2>\n<p>场景：<br>\n为了防止用户失误点错关闭按钮等等，导致没有保存已输入的信息(关键信息)。<br>\n用法：<br>\n//在路由组件中：<br>\n…<br>\nbeforeRouteLeave (to, from, next) {</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc89088154472\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n  if(用户已经输入信息){\r\n    //出现弹窗提醒保存草稿，或者自动后台为其保存\r\n    \r\n  }else{\r\n    next(true);//用户离开\r\n  }\r\n\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc89088154472-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc89088154472-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc89088154472-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc89088154472-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc89088154472-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc89088154472-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc89088154472-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc89088154472-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc89088154472-1\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span>用户已经输入信息<span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc89088154472-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//出现弹窗提醒保存草稿，或者自动后台为其保存</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc89088154472-3\"><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc89088154472-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc89088154472-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//用户离开</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc89088154472-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc89088154472-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc89088154472-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>还有beforeEach、beforeRouteUpdate这些生命周期函数 <a href=\"https://router.vuejs.org/zh-cn/advanced/navigation-guards.html\">详情猛戳</a></p>\n<h2>6. v-once 只渲染元素和组件一次，优化更新渲染性能</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc8d499882565\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nv-once这个指令相信大家用的很少,不过个人感觉还是挺实用的！</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc8d499882565-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc8d499882565-1\"><span class=\"crayon-v\">v</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">once</span>这个指令相信大家用的很少<span class=\"crayon-sy\">,</span>不过个人感觉还是挺实用的！</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><strong>只渲染元素和组件一次。随后的重新渲染，元素/组件及其所有的子节点将被视为静态内容并跳过。这可以用于优化更新性能。</strong><br>\n这个就不举例子了 直接猛戳这 <a href=\"https://cn.vuejs.org/v2/api/#v-once\">v-once</a></p>\n<h2>7. vue本地代理配置 解决跨域问题,仅限于开发环境</h2>\n<p>这个本地代理用来解决开发环境下的跨域问题,跨域可谓老生常谈的问题了,proxy 在vue中配置代理非常简单</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc90344252385\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//比方说你要访问 http://192.168.1.xxx:8888/backEnd/paper这个接口\r\n//配置  config.js下面proxyTable对象\r\nproxyTable: {\r\n            '/backEnd':{\r\n                target:'http://192.168.3.200:8888', //目标接口域名有端口可以把端口也写上\r\n                                                    //或者prot本地起服务端口与服务端统一\r\n                changeOrigin:true,    \r\n            }\r\n},\r\n// 发送request请求\r\n   axios.get('/backEnd/page')  //按代理配置 匹配到/backEnd就代理到目标target地址\r\n    .then((res) =&gt; {\r\n       console.log(res) // 数据完全拿得到  配置成功\r\n      this.newsList = res.data\r\n    }, (err) =&gt; {\r\n      console.log(err)\r\n    })</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc90344252385-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc90344252385-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc90344252385-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc90344252385-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc90344252385-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc90344252385-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc90344252385-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc90344252385-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc90344252385-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-1\"><span class=\"crayon-c\">//比方说你要访问 http://192.168.1.xxx:8888/backEnd/paper这个接口</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc90344252385-2\"><span class=\"crayon-c\">//配置  config.js下面proxyTable对象</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-3\"><span class=\"crayon-v\">proxyTable</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc90344252385-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'/backEnd'</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-5\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">target</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'http://192.168.3.200:8888'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//目标接口域名有端口可以把端口也写上</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc90344252385-6\"><span class=\"crayon-h\">                                                    </span><span class=\"crayon-c\">//或者prot本地起服务端口与服务端统一</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">changeOrigin</span><span class=\"crayon-o\">:</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc90344252385-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-9\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc90344252385-10\"><span class=\"crayon-c\">// 发送request请求</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-11\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">axios</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'/backEnd/page'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\">//按代理配置 匹配到/backEnd就代理到目标target地址</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc90344252385-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">then</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-13\"><span class=\"crayon-h\">       </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 数据完全拿得到  配置成功</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc90344252385-14\"><span class=\"crayon-h\">      </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">newsList</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">res</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">data</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc90344252385-16\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75c2934bc90344252385-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p></p>\n<h2>8. 本地开发 没有任何问题 部署服务器 就404啊这些问题</h2>\n<p><strong>由于前端路由缘故，单页面应用应该放到nginx或者apache、tomcat等web代理服务器中，千万不要直接访问index.html，同时要根据自己服务器的项目路径更改react或vue的路由地址</strong></p>\n<p>注意点</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75c2934bc94006753796\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1： vue-router的 history 模式\r\n2： 服务nginx配置</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75c2934bc94006753796-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75c2934bc94006753796-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75c2934bc94006753796-1\"><span class=\"crayon-cn\">1</span>：<span class=\"crayon-h\"> </span><span class=\"crayon-v\">vue</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">router</span>的<span class=\"crayon-h\"> </span><span class=\"crayon-i\">history</span><span class=\"crayon-h\"> </span>模式</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75c2934bc94006753796-2\"><span class=\"crayon-cn\">2</span>：<span class=\"crayon-h\"> </span>服务<span class=\"crayon-i\">nginx</span>配置</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>这个问题讲完整今天我下不了班了! 具体详情 可以猛戳 <a href=\"https://segmentfault.com/a/1190000012675012\">如何部署单页面项目到服务</a></p>\n<p><strong>到最后我想说声抱歉,之前答应你们的node由于个人原因没有及时更新出来,node 方面的文章篇幅一定短不了,因为要把它讲清楚不是一句俩句话的事,好在我发现了一篇文章 对初学者晋升高级初学者有很大帮助,请点击<a href=\"http://www.nodebeginner.org/index-zh-cn.html\">猛戳这里</a>,希望你认真的看完这篇文章(书把,篇幅不短),它会对你有很大的帮助,我一定在年前给你补一遍开发完整应用的node 方向的文章！</strong></p>\n<h2>结语</h2>\n<p><strong>这篇文章只是开始,它的待续还会很长很长，希望你我坚持下去！也希望我能帮助到更多的人,当然也会让我真正沉淀一下,为了以后为了将来 一起努力如果大家有什么问题,或者需要补充的 欢迎留言！我会进行补全的 ！ 详细版本我稍后也会上传到gitHub！</strong></p>\n<p><strong>如果觉得文章对大家有帮助,希望大家能点赞一下或者关注一下,得到肯定的我会更加努力！~~</strong></p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93944\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93944votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93944\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "0c5db2ad7dbf92845ab22892a9bdcf7a", "title": "2017 年崛起的 JS 项目", "url": "http://web.jobbole.com/93815/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/b1f8baed2467ee5a1c1777f881c0064c.png"], "praise_nums": "1", "comment_nums": "1", "fav_nums": "2", "tags": "JavaScript,项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://risingstars.js.org/2017/en/\">Sacha Grief&amp;Michael Rambeau</a>   译文出处：<a target=\"_blank\" href=\"https://segmentfault.com/a/1190000012927293\">wangshijun</a>   </div><div>\n<blockquote><p>共 4741 字，读完需 8 分钟，速读 2 分钟。我有幸参与了该项目的部分中文版翻译、校对工作，感谢 <a href=\"http://sachagreif.com\">Sacha Grief</a>，<a href=\"https://michaelrambeau.com\">Micheal Ramberu</a> 的统计整理，以及 <a href=\"https://github.com/frankyxhl\">Frank Xu</a> 的翻译工作，完整版本请猛击<a href=\"https://risingstars.js.org/2017/en\">阅读原文</a>。</p></blockquote>\n<p>和 2016年 一样，又到了我们回顾 2017年 Javascript 领域发展与变化的时候。<br>\n通过对比各项目过去 12 个月在 GitHub 上新增 star 数量，来评估其在 2017 年度的受关注程度，进而选出 2017 年度 JavaScript 领域崛起的明星项目。</p>\n<blockquote><p>下列图表对比了各个项目在 Github 上于过去 12 个月新增的 star 数量。分析的数据来源为 <a href=\"https://risingstars.js.org/\">bestof.js.org</a> 网站 ，一个 WEB 领域优秀项目的精选网站。通过点击项目，可以查看更多信息。</p></blockquote>\n<h2>最受欢迎项目</h2>\n<p>下面是不分类别的 2017 年度最受欢迎 Javascript 项目，如果你时间很紧，看这部分就够了。</p>\n<h3>Vue.js 蝉联冠军</h3>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/b1f8baed2467ee5a1c1777f881c0064c.png\"><img class=\"alignnone size-full wp-image-93839\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/b1f8baed2467ee5a1c1777f881c0064c.png\" alt=\"1460000012927298\"></a></p>\n<p><a href=\"http://vuejs.org\">Vue.js</a> 再次强势登顶年度排行榜冠军，今年在 GitHub 上新增了超过 40K 的 star。相较于 2016 年的（26K star），今年 Vue.js 领先排行榜第 2 名（ <a href=\"https://reactjs.org\">React</a> ）的优势更大了。</p>\n<p>那么，是什么令 Vue.js 如此出众？</p>\n<ul>\n<li>首先，它学习曲线平缓，使用了与 <a href=\"https://reactjs.org\">React</a> 相似语法更让 WEB 开发者熟悉的组件方案；</li>\n<li>发展良好的生态圈，社区中涌现出事实上的官方标准库：路由 <a href=\"http://router.vuejs.org/\">vue-router</a>，状态管理库: <a href=\"https://vuex.vuejs.org\">Vuex</a>；</li>\n<li>把模板、逻辑和样式放入单个 <code>.vue</code> 文件中的单文件组件设计理念在模块化代行其道的今天显得非常亲切；</li>\n<li>被流行的 PHP 框架 <a href=\"https://laravel.com/\">Laravel</a> 选为默认的视图引擎（View Engine）；</li>\n<li>为 <a href=\"https://github.com/yyx990803\">Evan You</a> 个人维护，通过众筹方式来获取支持的开源项目，而不是由 Facebook 或 Google 这样的互联网巨头来主导。</li>\n</ul>\n<p>也许正因为上述最后一点，Vue.js 在中国拥有大量的拥趸。不仅被中国最大的电商平台阿里巴巴使用，也获得了 GitLab 与 Adobe 这些公司青睐。</p>\n<h3>React 再次获得亚军</h3>\n<p><a href=\"https://reactjs.org\">React</a> 和 2016 一样稳占第二名，2017 年它在 GitHub 上获得了超过 27K star（再次明确下，此处我们分析的是今年<strong>新增</strong>的 star 数量而非<strong>所有</strong>的 star 数量）。</p>\n<p><a href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a>，是排行榜的季军，已经成为新建 React 项目的首选方式。它的大获成功让不少 React 样板项目（React Boilerplates）慢慢淡出历史舞台。</p>\n<p><a href=\"https://github.com/gaearon\">Dan Abramov</a>（ <a href=\"http://redux.js.org\">Redux</a> 作者，现就职于 Facebook）创建 <a href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> 的确是做了一件了不起的工作，他在功能性与简洁性之间取得了巧妙的平衡，比如，它没有集成花哨的样式解决方案（只使用了纯粹的 CSS）和服务器端渲染，却具有恰到好处的封装，这些造就了良好的开发体验。</p>\n<h3>Axios</h3>\n<p><a href=\"https://github.com/axios/axios\">Axios</a> 库是最广泛使用的 HTTP 客户端。它能同时在用户端（在用户端发起 Ajax 请求）与服务器端（在 Node.js 环境中）使用。</p>\n<p>Axios 的成功或许与 Vue.js 有比较大的关系，因为大量的 Vue.js 教程都使用它来发起 API 请求获取数据。</p>\n<h3>Puppeteer</h3>\n<p><a href=\"https://github.com/GoogleChrome/puppeteer\">Puppeteer</a> 是今年的大事件之一，是 Google Chrome 团队开发的一个无界面 Chrome 浏览器，即一个在后台运行，且能被代码驱动和控制的浏览器。</p>\n<p>它可作如下用途:</p>\n<ul>\n<li>在真实浏览器中进行自动化界面测试；</li>\n<li>用生成页面快照的方式来实现服务端渲染；</li>\n<li>利用 Google Chrome “保存为 PDF” 的功能生成PDF文件；</li>\n</ul>\n<h2>前端框架</h2>\n<p>前端框架方面向来是兵家必争之地，不过如今已呈三家鼎足分立，大局尘埃落定之势。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/f47eecdccd12d1c4f3416836cacd412b.png\"><img class=\"alignnone size-full wp-image-93837\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/f47eecdccd12d1c4f3416836cacd412b.png\" alt=\"1460000012927299\"></a></p>\n<h3>Vue、React、Angular 三足鼎立</h3>\n<p>毫无疑问，目前公认的 3 大 UI 框架分别是 <a href=\"http://vuejs.org\">Vue.js</a>，<a href=\"https://reactjs.org\">React</a> 和 <a href=\"https://angular.io\">Angular</a> 。</p>\n<p>我们习惯称他们为_框架_，但准确地讲只有 <a href=\"https://angular.io\">Angular</a> 是_框架_，<a href=\"http://vuejs.org\">Vue.js</a> 和 <a href=\"https://reactjs.org\">React</a> 应归类为_库_。</p>\n<p>前文中，我们已经分析了 <a href=\"http://vuejs.org\">Vue.js</a> 的成功因素和它的集成方案。</p>\n<p>与 Vue.js 相对应的，<a href=\"https://reactjs.org\">React</a> 方面却依然处于碎片化的状态，开发者需要根据自身项目的情况，进行技术选型：</p>\n<ul>\n<li>页面间的路由切换问题；</li>\n<li>如何获取数据；</li>\n<li>如何把数据绑定到表单；</li>\n<li>如何存储应用的状态；</li>\n</ul>\n<p>相反，<a href=\"https://angular.io\">Angular</a> 生态圈则更可控也更稳定。有一种叫_Angular 准则_ 的最佳实践用来指导开发。</p>\n<p>这可能给人一种 <a href=\"https://angular.io\">Angular</a> 对于多人协同工作更友好的印象。此外，随着支持静态类型的 <a href=\"http://www.typescriptlang.org\">TypeScript</a> 加入，<a href=\"https://angular.io\">Angular</a> 也势必能得到更多熟悉 C# 或 Java 的后端开发人员人观注与青睐。</p>\n<h2>少即是多</h2>\n<p>在三巨头之后，能非常有趣的发现第四名 <a href=\"https://preactjs.com\">Preact</a>。</p>\n<p><a href=\"https://preactjs.com\">Preact</a> 是一个 <a href=\"https://reactjs.org\">React</a> 的小型替代解决方案：有相同的 API，却只有 3KB 的大小。</p>\n<p>类似的还有许多竞争者，为了区别于三巨头，它们在浏览器的性能上下功夫，努力做出自己的特色。</p>\n<h2>Node.js 框架<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/c4be6c8c77971c88f454cae11af641fc.png\"><img class=\"alignnone size-full wp-image-93836\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/c4be6c8c77971c88f454cae11af641fc.png\" alt=\"1460000012927300\"></a></h2>\n<p> </p>\n<p>JavaScript 已不仅仅局限于 Web 前端应用，也被越来越多的人使用开发后端应用。Node.js 社区颇具有影响力的 <a href=\"https://github.com/mikeal\">Mikeal Rogers</a> 做出了 <a href=\"https://thenewstack.io/open-source-profile-mikeal-rogers-node-js/\">Node.js 会在一年内超越 Java</a>的预测。</p>\n<p>和其他语言都有事实上的标准框架不同的是（如 Ruby 有 Ruby on Rails，Python 有 Django，PHP 有 Laravel），目前基于 Node.js 写服务端程序还没有一个大家都认可的标准框架。</p>\n<p><a href=\"https://expressjs.com\">Express</a> 并不是 2017 年度的 Node.js 框架分类排行冠军，毕竟这个项目已经成立多年，但它已转变为许多框架和 CMS 的基础组件，包括 <a href=\"https://feathersjs.com\">Feathers</a>、<a href=\"http://www.keystonejs.com\">Keystone</a> 和 <a href=\"https://nestjs.com/\">Nest</a>。</p>\n<p>Express 的极简主义设计似乎完美地符合了当今微服务理念的发展趋势：把一个大型程序解耦成几个小的应用。</p>\n<p>与去年相比, 今年有 3 个新面孔进入了 node.js 框架分类排行的 TOP 10：</p>\n<ul>\n<li><a href=\"https://www.fastify.io\">Fastify</a> 是一个受 <a>Hapi</a> 启发而开发的通用 Web 框架，也适合用作 JSON HTTP API 服务器；</li>\n<li><a href=\"https://serverjs.io/\">Server.js</a> 注重于“开箱即用”的开发体验；</li>\n<li><a href=\"https://nestjs.com/\">Nest</a> 是一个用 TypeScript 写的框架，其模块化和控制器组合的架构设计，让 Angular 用户感到十分亲切。</li>\n</ul>\n<h2>React 生态圈</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/cb592237553e164ccf00faf4c832c540.png\"><img class=\"alignnone size-full wp-image-93834\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/cb592237553e164ccf00faf4c832c540.png\" alt=\"1460000012927301\"></a></p>\n<p><a href=\"https://reactjs.org\">React</a> 只专注于视图层 (View Layer)，这在为整个生态圈留下更多发展空间的同时，也为自身快速向前发展创造了机会。这个分类下我们会统计基于 <a href=\"https://reactjs.org\">React</a> 和 <a href=\"http://facebook.github.io/react-native/\">React Native</a> 构建的项目。</p>\n<p><a href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> 通过集成优秀的预置和包，解决了新建 React 应用时要进行繁琐复杂的配置问题。今年 Facebook 也继续保持了频繁更新的节奏，使他成为目前 React 生态中最活跃的项目。</p>\n<p>作为 <a href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> 的一个成功案例，我们可以看 <a href=\"https://stackblitz.com/\">StackBlitz</a>，这是一个在线 IDE，通过 <a href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a>，让你在数秒内就可以在浏览器中创建一个应用。</p>\n<p>即使 <a href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> 已被默认为 React 的新建工具包，开发者们仍然可以有其它选项，例如 <a href=\"https://www.reactboilerplate.com\">React boilerplate</a>，这也是十分受人关注的项目，继承了诸如 GraphQL 的很多有用功能。</p>\n<p><a href=\"http://ant.design\">Ant Design</a>，<a href=\"http://pro.ant.design/\">Ant Design Pro</a> 和 <a href=\"http://www.material-ui.com\">Material UI</a> 是 React 组件的样式工具集，它们能帮助程序员在新建应用时而不再担心样式问题。</p>\n<p>第 10 名 <a href=\"https://github.com/acdlite/recompose\">Recompose</a> 的人气值也证明了开发者们喜欢 React 的原因：它的“函数式”特性，一切皆函数。<a href=\"https://github.com/acdlite/recompose\">Recompose</a> 提供了一全套的函数来帮助你走的更远。</p>\n<h2>Vue.js 生态圈</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/63f935c6982623441708852dc5ec7112.png\"><img class=\"alignnone size-full wp-image-93831\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/63f935c6982623441708852dc5ec7112.png\" alt=\"1460000012927302\"></a></p>\n<blockquote><p>特约撰稿人: <a href=\"https://twitter.com/youyuxi\">Evan You</a>，虽然我们很欣赏 Vue.js，但不得不承认我们并不太熟悉它的生态圈。为此我们找了一位专家来点评下今年 Vue.js 的发展情况，那么还有谁能比 Vue.js 作者更熟悉呢？</p></blockquote>\n<p>在 2017 年，伴随着 Vue.js 用户的增长，许多 Vue.js 生态圈中的项目也得到了令人惊喜地快速成长。</p>\n<p><a href=\"http://element.eleme.io/\">Element</a> 和 <a href=\"https://iviewui.com/\">iView</a> 是两个最受欢迎的 UI 组件工具包，专注于桌面端 UI 界面的快速开发。而 <a href=\"http://mint-ui.github.io/#!/en\">Mint UI</a> 与 <a href=\"https://vux.li/\">vux</a> 则相反，是移动端最受欢迎的 UI 工具包。</p>\n<p><a href=\"https://vuetifyjs.com\">Vuetify</a> 是一款功能最完备的能同时适用于移动端和桌面端的 Material Design 组件框架内置了包括服务端渲染、PWA、CLI 模板支持等诸多特性。</p>\n<p><a href=\"https://nuxtjs.org\">Nuxt</a> 则是一款基于 Vue.js 的更高级的框架，它能让我们流畅地开发具备服务器端渲染能力的 Vue.js 应用，而它的通用性使我们能用同样的代码库来构建单页引用，甚至生成静态网站。</p>\n<p><a href=\"https://weex.apache.org/\">Weex</a> 是一个可以用 Vue.js 语法和 API 来进行原生渲染的移动桌面应用开发。它由阿里巴巴公司开发，并已运用于世界上一些最高频使用的移动应用中，十分注重性能问题上的优化。</p>\n<h2>移动开发</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/755531eb2c3e413cf884a86e1c70a1e6.png\"><img class=\"alignnone size-full wp-image-93830\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/755531eb2c3e413cf884a86e1c70a1e6.png\" alt=\"1460000012927303\"></a></p>\n<p>无所不能的 JavaScript，自然可已用来编写移动应用，这意为着你可以在 WEB 端与 Native 端复用你的组件。</p>\n<p>在本分类中，我们为 3 大前端框架找到了对应的解决方案：</p>\n<ul>\n<li>React: <a href=\"http://facebook.github.io/react-native/\">React Native</a></li>\n<li>Vue：<a href=\"https://weex.apache.org/\">Weex</a> 和 <a href=\"http://quasar-framework.org\">Quasar</a></li>\n<li>Angular：<a href=\"https://ionicframework.com/\">Ionic</a> 和 <a href=\"http://www.nativescript.org\">NativeScript</a></li>\n</ul>\n<p>与 2016 年一样，<a href=\"http://facebook.github.io/react-native/\">React Native</a> 两年蝉联头名，它能让我们使用把 JavaScript 编译成能够运行在 iOS、Android 甚至是 Windows 系统的原生 APP 应用。</p>\n<p>正如视频 <a href=\"https://www.youtube.com/watch?v=1cI-978DHaA\">使用 React Native 来跨平台编译APP</a>中所特别强调的：“Write One, Run Everywhere” 的承诺已经变成现实。</p>\n<h2>编译工具：Compilers</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/69c028cbbf466df5a5f62c74fa83af89.png\"><img class=\"alignnone size-full wp-image-93829\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/69c028cbbf466df5a5f62c74fa83af89.png\" alt=\"1460000012927304\"></a></p>\n<p>这里我们将讨论那些编译到标准 JavaScript 代码的语言。</p>\n<p>通常情况下，在搭建自己的构建工作流时需要编译器可能有 2 个原因：</p>\n<ul>\n<li>想立即使用最新的 JavaScript 语言特性，并把它应用到尽可能多的浏览器中，这类需求让 <a href=\"https://babeljs.io/\">Babel</a> 获得了成功，很多项目都依赖于它；</li>\n<li>想为语言添加新的特性，比如“类型检查”；</li>\n</ul>\n<p>对 Javascript 程序员进行分类有个热门的问题是：你是用类型的，还是不用类型的？</p>\n<p>JavaScript 本身带有基本的动态类型，但缺乏静态类型。而很多开发者倾向于在代码中使用类型，尤其在大型项目中，因为这样可以让代码变得更为健壮且易于阅读和理解。</p>\n<p>如果你需要类型，有两个主流可选项：微软的 <a href=\"http://www.typescriptlang.org\">TypeScript</a> 和 Facebook 的 <a href=\"https://flow.org/\">Flow</a>（Facebook 在自己的主要项目 <a href=\"https://reactjs.org\">React</a>，<a href=\"http://facebook.github.io/react-native/\">React Native</a>，<a href=\"http://facebook.github.io/jest/\">Jest</a> 中都有使用)</p>\n<p>你可以从 <a href=\"https://github.com/thejameskyle\">James Kyle</a> 的文章来感受两者的区别: <a href=\"https://medium.com/the-thinkmill/adopting-flow-typescript-3549a3a36d51\">A Comparison Between Adopting Flow or TypeScript</a>。</p>\n<h2>构建工具：Build Tools<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/8efd3ab6aeea2066531c56416b2ae73e.png\"><img class=\"alignnone size-full wp-image-93846\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/8efd3ab6aeea2066531c56416b2ae73e.png\" alt=\"1460000012927305\"></a></h2>\n<p> </p>\n<p>构建工具分类中的排行冠军是 <a href=\"https://parceljs.org\">Parcel</a>，这或许是今年最大的惊喜，作为一个 8 月份才在 GitHub 上发布的新项目却已达到 14K 个 star 的关注度。</p>\n<p><a href=\"https://parceljs.org\">Parcel</a> 不仅提供现代前端开发所需的各种功能，还有个碾压性的优势：零配置！这是它与依靠大量 “loaders” 的 <a href=\"https://webpack.js.org\">Webpack</a> 最大区别。</p>\n<p>请别误解数字，<a href=\"https://webpack.js.org\">Webpack</a> 依然是最流行的构建应用，它在 GitHub 上 有 35K 的 star 和超 500 人的贡献者。目前有许多项目使用了它，包括今年最流行的两个项目：<a href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> 和 <a href=\"https://www.gatsbyjs.org\">Gatsby</a>。</p>\n<p><a href=\"https://webpack.js.org\">Webpack</a> 不断在迭代更新，2.0 版本可以让开发者通过动态加载的方式轻松实现“代码分割”的功能。</p>\n<p><a href=\"https://webpack.js.org\">Webpack</a> 与 <a href=\"https://parceljs.org\">Parcel</a> 同时定位于构建 <strong>WEB 应用</strong>，而 <a href=\"http://rollupjs.org\">Rollup</a> 则定位于<strong>库</strong>的构建，它专注于 ES6 模块的性能提升上。</p>\n<p><a href=\"http://rollupjs.org\">Rollup</a> 已被一些主流的库使用，值得一提的是 <a href=\"https://reactjs.org\">React</a> 团队也在 2017 年把它们的构建系统从 <a href=\"http://browserify.org/\">Browserify</a> 切换到了 <a href=\"http://rollupjs.org\">Rollup</a>。</p>\n<p>在 <a href=\"https://reactjs.org/blog/2017/12/15/improving-the-repository-infrastructure.html\">React 博客</a>中提到</p>\n<blockquote><p>Rollup 可以预编译并且集成到应用中，能与 React 之类相似的库做到完美配合。</p></blockquote>\n<p><a href=\"https://poi.js.org\">Poi</a> 与 <a href=\"https://parceljs.org\">Parcel</a> 有同样的目标：一款现代网络应用构建工具，它默认零配置但你可以通过使用 preset 来扩展。</p>\n<h2>测试框架</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/6e1ca11187bb8736597a3823f846935f.png\"><img class=\"alignnone size-full wp-image-93826\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/6e1ca11187bb8736597a3823f846935f.png\" alt=\"1460000012927306\"></a></p>\n<p>正如我们<a href=\"/2016/en#test-framework\">去年</a>预计的一样 (这是我们第一次预测成功!)，<a href=\"http://facebook.github.io/jest/\">Jest</a> 成了今年测试框架类别中的王者。</p>\n<p><a href=\"http://facebook.github.io/jest/\">Jest</a> 最初是 Facebook 因为 React 组件测试目的而开发的，但最近几个月革命性的版本变更（发布了 22 个大版本）使得它现在能同时用于测试前端、后端代码。</p>\n<p><a href=\"http://facebook.github.io/jest/\">Jest</a> 有几个大的闪光点：</p>\n<ul>\n<li>无需配置，默认地设定已经满足通常需求；</li>\n<li>强大的开发者体验 (智能观察模式，直观的错误报告)；</li>\n<li>语法上与 <a href=\"https://mochajs.org\">Mocha</a> 很接近，许多程序员熟悉 <code>describe</code> 和 <code>it</code> 这样的关键词；</li>\n<li>不需要额外的库来创建 assertions，已全部内置；</li>\n<li>独特的”快照”模式可以作为重新运行测试时的对比基准；</li>\n</ul>\n<p><a href=\"https://github.com/avajs/ava\">AVA</a>，去年的第一名，仍然有许多吸引人的特点。</p>\n<p>这个项目由 <a href=\"https://github.com/sindresorhus\">Sindre Sorhus</a> 创建并在他所有的项目中使用，熟悉他的同学肯定知道这意味着什么！</p>\n<p>相较于 <a href=\"http://facebook.github.io/jest/\">Jest</a>，<a href=\"https://github.com/avajs/ava\">AVA</a> 更侧重于并行测试上的速度，更轻量，也更接近测试标准，语法上与测试框架 <a href=\"https://github.com/substack/tape\">Tape</a> 接近。</p>\n<h2>IDE 和编辑器</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/57270eef5f9c1914446c6a7c5c314004.png\"><img class=\"alignnone size-full wp-image-93824\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/57270eef5f9c1914446c6a7c5c314004.png\" alt=\"1460000012927307\"></a></p>\n<p>在这里我们讨论的是利用 WEB 技术来构建的开源的代码编辑器（ Sublime 粉丝们对不住了！）。</p>\n<p>2016 年由微软主导的 <a href=\"https://code.visualstudio.com\">VS Code</a> 与 GitHub 主导的 <a href=\"https://atom.io\">Atom</a> 在本类别中齐头并进。今年他们也依然处于领先地位，不过在互相较量中，<a href=\"https://code.visualstudio.com\">VS Code</a> 己领先它的对手一大截。</p>\n<p>每个月 <a href=\"https://code.visualstudio.com\">VS Code</a> 都会发布新版本，带来更多实用 IDE 功能同时性能上却没有太大的损耗。即使不安装任何插件，你也有一大堆开箱即用的功能：</p>\n<ul>\n<li>Git 集成功能；</li>\n<li>自动补全：JavaScript 语法，文件路径进行补全，npm 包名字等等；</li>\n<li>React 语法集成等；</li>\n</ul>\n<p>此外，你可以在编辑器中添加 <a href=\"https://prettier.io/\">Prettier</a> 插件，这样每次保存时它都会自动格式化文件，在这样的编程环境下编码真是一种享受。</p>\n<h2>CSS in JavaScript<a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/5561dc4c6b6d8d4369ed6cbe08e93514.png\"><img class=\"alignnone size-full wp-image-93848\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/5561dc4c6b6d8d4369ed6cbe08e93514.png\" alt=\"1460000012927308\"></a></h2>\n<p> </p>\n<p>目前 React 社区仍然没有就如何有效管理组件样式这个问题达成共识，即没有标准的解决方案。</p>\n<p>如果无需太多自定义的标准样式，可以用 <a href=\"http://www.material-ui.com\">Material UI</a> 或 <a href=\"http://ant.design\">Ant Design</a> 这样现成的组件工具包。如果需要更高度灵活的自定义，你仍然能使用传统方式：用一个像 <a href=\"http://getbootstrap.com\">Bootstrap</a> 或 <a href=\"https://bulma.io\">Bulma</a> 这样的全局 CSS 样式，通过修改组件的 <code>className</code> 属性来达到目的。这样做缺点是组件无法进行自我样式管理，因为样式分布在单独的文件中。</p>\n<p>CSS in JavaScript 概念的出现即是为了解决上述问题。</p>\n<p>概念本身很简单：既然我们在 React 中己能通过 JavaScript 来<strong>同时</strong>控制逻辑和模板部分，何不再进一步，连样式也一并管理了呢？</p>\n<p><a href=\"http://styled-components.com\">Styled Components</a> 是今年本类别的冠军，它利用 JavasScript 最近新加入的模板字符串特性，让开发者在 React 组件中直接使用标准的 CSS 语法编写样式。</p>\n<p><a href=\"https://github.com/css-modules/css-modules\">CSS Modules</a>，作为本类别的亚军，则采用了混合的解决方案。它让开发者自己挑选诸如标准 CSS, SASS, NO slug Less, NO slug Stylus等方式编写样式，再以文件的方式<strong>导入</strong>到组件中。</p>\n<p><a href=\"http://markdalgleish.com/\">Mark Dalgleish</a>，<a href=\"https://github.com/css-modules/css-modules\">CSS Modules</a> 的作者，写了一篇有意思的文章来阐述 CSS-in-JavaScript 解决方案：<a href=\"https://medium.com/seek-blog/a-unified-styling-language-d0c208de2660\">A Unified Styling Language</a>。如果你对 CSS-in-Javascript 解决方案仍持怀疑态度的话，那此文绝对不容错过。</p>\n<h2>静态网站生成器</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/23a7c7451fdadb403bade926d9173227.png\"><img class=\"alignnone size-full wp-image-93820\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/23a7c7451fdadb403bade926d9173227.png\" alt=\"1460000012927309\"></a></p>\n<p>静态网站生成器（SSG，Static Site Generator）是指能够生成一坨 HTML、CSS、JS 文件，方便你快速部署到 WEB 服务器上而不需要安装和配置数据库的工具。</p>\n<p>静态网站具有速度快，稳定且易于维护的特点。作为 2016 年的亚军，<a href=\"https://www.gatsbyjs.org\">Gatsby</a> 今年成功拨得头筹。它新增了许多新功能来助你优化静态网站：</p>\n<ul>\n<li>快速浏览和导出速度；</li>\n<li>主动预加载机能；</li>\n<li>智能代码分解 (模板 + 网页数据)；</li>\n</ul>\n<p><a href=\"https://www.gatsbyjs.org\">Gatsby</a> 使用 <a href=\"https://reactjs.org\">React</a> 来做视图层(View Layer)，构建时候则用 GraphQL 来查询内容。它有一个强大的社区并且 <a href=\"https://reactjs.org\">React 官网</a>也是用 Gatsby 的来搭建的.</p>\n<p><a href=\"https://github.com/nozzle/react-static\">React Static</a> 是本类别的新面孔。它从 <a href=\"https://github.com/facebookincubator/create-react-app\">Create React App</a> 项目中获得灵感，定位于做一个轻量的 <a href=\"https://www.gatsbyjs.org\">Gatsby</a> 替代方案，专注于性能和简洁。</p>\n<p>此外，值得一提的是 <a href=\"https://zeit.co/blog/next4\">Next.js</a> 也能当静态网站生成器来用。</p>\n<h2>GraphQL</h2>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/a5ecbe47e6466b2b35649e85999d7cf9.png\"><img class=\"alignnone size-full wp-image-93818\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/a5ecbe47e6466b2b35649e85999d7cf9.png\" alt=\"1460000012927310\"></a></p>\n<p>在未来回顾 GraphQL 的历史时，2017 年很有可能会成为一个转折点。</p>\n<p>像 <a href=\"https://open.nytimes.com/react-relay-and-graphql-under-the-hood-of-the-times-website-redesign-22fb62ea9764\">the New York Times</a> 这样的大公司开始使用 GraphQL，<a href=\"https://code.facebook.com/posts/1362748677097871/relay-modern-simpler-faster-more-extensible/\">Relay</a> 和 <a href=\"https://dev-blog.apollodata.com/apollo-client-2-0-5c8d0affcec7\">Apollo</a> (两个主要的 GraphQL 客户端框架) 也在今年发布了两个重要的版本更新。</p>\n<p>在这两大库的身后，像 <a href=\"http://www.graph.cool/\">Graphcool</a> 这样的公司也提供了大量的工具和库，而 <a href=\"http://vulcanjs.org\">Vulcan</a> 这样的全栈框架也开始采用 GraphQL 。</p>\n<p>值得注意的是今年最有人气的静态网站生成器 <a href=\"http://gatsbyjs.org\">Gatsby</a> 也在数据处理中使用了 GraphQL 。</p>\n<p>随着越来越多的人加入到 GraphQL 阵营来, 可以预见其在技术上广泛取代 REST 只是一个时间问题。</p>\n<h2>总结</h2>\n<p>希望我们今年对 JavaScript 领域做出的回顾能够对你有所启发。</p>\n<p>可以看到，<a href=\"http://vuejs.org\">Vue.js</a> 两年蝉联冠军并且没有丝毫停下来的征兆。</p>\n<p><a href=\"https://reactjs.org\">React</a> 生态圈也最终解决了证书问题，继续繁荣发展的势头。</p>\n<p>但是如果让我们评选_2017 项目之星_的话，那绝对是 <a href=\"https://prettier.io/\">Prettier</a>。有了它，我们写代码时的再也不用担心格式问题！</p>\n<p><a href=\"https://stateofjs.com/\">State of JavaScript 2017 survey</a> 收集和分析了 23,000 位开发者的调研问卷，能帮助你从另一个视角来解读社区演化的方向。</p>\n<p>明年此时，你认为谁将入围 2018 年度的 _JavaScript 明星项目_？</p>\n<ul>\n<li>一个基于 <a href=\"http://facebook.github.io/graphql/\">GraphQL</a> 的新框架?</li>\n<li>一个充分利用 WebAssembly 标准的库, 用来打造浏览器上与众不同的全新体验？</li>\n</ul>\n<p>请把你的看法告诉我们！最后，感谢您阅读这篇文章，欢迎自由转发。有任何问题或反馈请在 <a href=\"https://github.com/bestofjs/javascript-risingstars\">GitHub</a> 上联系我们！</p>\n</div>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93815\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93815votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93815\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"},{"url_object_id": "c6ca12218007ec306403bab8f8d6be05", "title": "LCS 算法：Javascript 最长公共子序列", "url": "http://web.jobbole.com/93803/", "create_date": "2018-02-03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/2f834fa82c73fbd41930c33d849b11fa.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "JavaScript,lcs", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://segmentfault.com/a/1190000012864957\">司徒正美</a>   </div><p>最长公共子序列（Longest Common Subsequence LCS）是从给定的两个序列X和Y中取出尽可能多的一部分字符，按照它们在原序列排列的先后次序排列得到。LCS问题的算法用途广泛，如在软件不同版本的管理中，用LCS算法找到新旧版本的异同处;在软件测试中，用LCS算法对录制和回放的序列进行比较，在基因工程领域，用LCS算法检查患者DNA连与键康DNA链的异同;在防抄袭系统中，用LCS算法检查论文的抄袭率。LCS算法也可以用于程序代码相似度度量，人体运行的序列检索，视频段匹配等方面，所以对LCS算法进行研究具有很高的应用价值。</p>\n<h2>基本概念</h2>\n<ol>\n<li>子序列(subsequence)： 一个特定序列的子序列就是将给定序列中零个或多个元素去掉后得到的结果(不改变元素间相对次序)。例如序列<a>的子序列有：</a><a>、<b>、</b></a><b><a>等。</a></b></li>\n<li>公共子序列(common subsequence)： 给定序列X和Y，序列Z是X的子序列，也是Y的子序列，则Z是X和Y的公共子序列。例如X=[A,B,C,B,D,A,B]，Y=[B,D,C,A,B,A[，那么序列Z=[B,C,A]为X和Y的公共子序列，其长度为3。但Z不是X和Y的最长公共子序列，而序列[B,C,B,A]和[B,D,A,B]也均为X和Y的最长公共子序列，长度为4，而X和Y不存在长度大于等于5的公共子序列。对于序列[A,B,C]和序列[E,F,G]的公共子序列只有空序列[]。</li>\n<li>最长公共子序列：给定序列X和Y，从它们的所有公共子序列中选出长度最长的那一个或几个。</li>\n<li>子串： 将一个序列从最前或最后或同时删掉零个或几个字符构成的新系列。区别与子序列，子序列是可以从中间抠掉字符的。cnblogs这个字符串中子序列有多少个呢？很显然有27个，比如其中的cb,cgs等等都是其子序列</li>\n</ol>\n<p>给一个图再解释一下：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/2f834fa82c73fbd41930c33d849b11fa.png\"><img class=\"alignnone size-full wp-image-93804\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/2f834fa82c73fbd41930c33d849b11fa.png\" alt=\"image_1c3ofq79gg4f1u7sf3o40gls29\"></a></p>\n<p>我们可以看出子序列不见得一定是连续的，连续的是子串。</p>\n<h2>问题分析</h2>\n<p>我们还是从一个矩阵开始分析,自己推导出状态迁移方程。</p>\n<p>首先，我们把问题转换成前端够为熟悉的概念，不要序列序列地叫了，可以认为是数组或字符串。一切从简，我们就估且认定是两个字符串做比较吧。</p>\n<p>我们重点留意”子序列“的概念，它可以删掉多个或零个，也可以全部干掉。这时我们的第一个子序列为<strong>空字符串</strong>（如果我们的序列不是字符串，我们还可以 ）！这个真是千万要注意到！许多人就是看不懂《算法导论》的那个图表，还有许多博客的作者不懂装懂。我们总是从左到右比较，当然了第一个字符串，由于作为矩阵的高，就垂直放置了。</p>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>“”</th>\n<th>B</th>\n<th>D</th>\n<th>C</th>\n<th>A</th>\n<th>B</th>\n<th>A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td colspan=\"11\">“”</td>\n</tr>\n<tr>\n<td colspan=\"14\">A</td>\n</tr>\n<tr>\n<td colspan=\"14\">B</td>\n</tr>\n<tr>\n<td colspan=\"14\">C</td>\n</tr>\n<tr>\n<td colspan=\"14\">D</td>\n</tr>\n<tr>\n<td colspan=\"14\">A</td>\n</tr>\n<tr>\n<td colspan=\"14\">B</td>\n</tr>\n</tbody>\n</table>\n<p>假令X ＝ “ABCDAB”， Y＝”BDCABA”，各自取出最短的序列，也就是空字符串与空字符串比较。LCS的方程解为一个数字，那么这个表格也只能填数字。两个空字符串的公同区域的长度为0.</p>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>“”</th>\n<th>B</th>\n<th>D</th>\n<th>C</th>\n<th>A</th>\n<th>B</th>\n<th>A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>“”</td>\n<td colspan=\"10\">0</td>\n</tr>\n<tr>\n<td colspan=\"14\">A</td>\n</tr>\n<tr>\n<td colspan=\"14\">B</td>\n</tr>\n<tr>\n<td colspan=\"14\">C</td>\n</tr>\n<tr>\n<td colspan=\"14\">D</td>\n</tr>\n<tr>\n<td colspan=\"14\">A</td>\n</tr>\n<tr>\n<td colspan=\"14\">B</td>\n</tr>\n</tbody>\n</table>\n<p>然后我们X不动，继续让空字符串出阵，Y让“B”出阵，很显然，它们的公共区域的长度为0. Y换成其他字符， D啊，C啊， 或者， 它们的连续组合DC、 DDC， 情况没有变， 依然为0. 因此第一行都为0. 然后我们Y不动，Y只出空字任串，那么与上面的分析一样，都为0，第一列都是0.</p>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>“”</th>\n<th>B</th>\n<th>D</th>\n<th>C</th>\n<th>A</th>\n<th>B</th>\n<th>A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>“”</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>A</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>C</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>D</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>A</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n</tbody>\n</table>\n<p>LCS问题与背包问题有点不一样，背包问题还可以设置-1行，而最长公共子序列因为有空子序列的出现，一开始就把左边与上边固定死了。</p>\n<p>然后我们再将问题放大些，这次双方都出一个字符，显然只有两都相同时，才有存在不为空字符串的公共子序列，长度也理解数然为1。</p>\n<p>A为”X”, Y为”BDCA”的子序列的任意一个</p>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>“”</th>\n<th>B</th>\n<th>D</th>\n<th>C</th>\n<th>A</th>\n<th>B</th>\n<th>A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>“”</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>A</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td colspan=\"5\">1</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>C</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>D</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>A</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n</tbody>\n</table>\n<p>继续往右填空，该怎么填？显然，LCS不能大于X的长度，Y的从A字符串开始的子序列与B的A序列相比，怎么也能等于1。</p>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>“”</th>\n<th>B</th>\n<th>D</th>\n<th>C</th>\n<th>A</th>\n<th>B</th>\n<th>A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>“”</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>A</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>C</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>D</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>A</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n</tbody>\n</table>\n<p>如果X只从派出前面个字符A,B吧，亦即是“”，“A”, “B”, “AB”这四种组合，前两个已经解说过了。那我们先看B，${X_1} == ${Y_0}， 我们得到一个新的公共子串了，应该加1。为什么呢？因为我们这个矩阵是一个状态表，从左到右，从上到下描述状态的迁移过程，并且这些状态是基于已有状态<strong>累加</strong>出来的。<strong>现在我们需要确认的是，现在我们要填的这个格子的值与它周围已经填好的格子的值是存在何种关系</strong>。目前，信息太少，就是一个孤点，直接填1。</p>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>“”</th>\n<th>B</th>\n<th>D</th>\n<th>C</th>\n<th>A</th>\n<th>B</th>\n<th>A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>“”</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>A</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>B</td>\n<td>0</td>\n<td colspan=\"12\">1</td>\n</tr>\n<tr>\n<td>C</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>D</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>A</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n</tbody>\n</table>\n<p>然后我们让Y多出一个D做帮手，{“”,A,B,AB} vs {“”,B,D,BD}，显然，继续填1. 一直填到Y的第二个B之前，都是1。 因为到BDCAB时，它们有另一个公共子序列，AB。</p>\n<table>\n<thead>\n<tr>\n<th>X</th>\n<th>“”</th>\n<th>B</th>\n<th>D</th>\n<th>C</th>\n<th>A</th>\n<th>B</th>\n<th>A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>“”</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>A</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>B</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td colspan=\"4\">2</td>\n</tr>\n<tr>\n<td>C</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>D</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>A</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n</tbody>\n</table>\n<p>到这一步，我们可以总结一些规则了，之后就是通过计算验证我们的想法，加入新的规则或限定条件来完善。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/f2a42a20764cf9e0550ad18e7608018e.png\"><img class=\"alignnone wp-image-93807 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/f2a42a20764cf9e0550ad18e7608018e.png\" width=\"679\" height=\"99\"></a>Y将所有字符派上去，X依然是2个字符，经仔细观察，还是填2.</p>\n<p>看五行，X再多派一个C，ABC的子序列集合比AB的子序列集合大一些，那么它与Y的B子序列集合大一些，就算不大，就不能比原来的小。显然新增的C不能成为战力，不是两者的公共字符，因此值应该等于AB的子序列集合。</p>\n<table>\n<thead>\n<tr>\n<th>×</th>\n<th>“”</th>\n<th>B</th>\n<th>D</th>\n<th>C</th>\n<th>A</th>\n<th>B</th>\n<th>A</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>“”</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>A</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>B</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>1</td>\n<td>2</td>\n<td>2</td>\n</tr>\n<tr>\n<td>C</td>\n<td>0</td>\n<td colspan=\"11\">1</td>\n</tr>\n<tr>\n<td>D</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>A</td>\n<td colspan=\"13\">0</td>\n</tr>\n<tr>\n<td>B</td>\n<td colspan=\"13\">0</td>\n</tr>\n</tbody>\n</table>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/ec3b5bb1067a0794e24a599aca56ccfb.png\"><img class=\"alignnone wp-image-93809 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/ec3b5bb1067a0794e24a599aca56ccfb.png\" width=\"648\" height=\"320\"></a></p>\n<p>并且我们可以确定，如果两个字符串要比较的字符不一样，那么要填的格子是与其左边或上边有关，那边大就取那个。</p>\n<p>如果比较的字符一样呢，稍安毋躁，刚好X的C要与Y的C进行比较，即ABC的子序列集合{“”,A,B,C,AB,BC,ABC}与BDC的子序列集合｛””,B,D,C,BD,DC,BDC｝比较，得到公共子串有“”,B,D 。这时还是与之前的结论一样，当字符相等时，它对应的格子值等于左边与右边与左上角的值，并且左边，上边，左上边总是相等的。这些奥秘需要更严格的数学知识来论证。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211c75213067862\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n假设有两个数组，A和B。A[i]为A的第i个元素，A(i)为由A的第一个元素到第i个元素所组成的前缀。m(i, j)为A(i)和B(j)的最长公共子序列长度。\r\n\r\n由于算法本身的递推性质，其实只要证明，对于某个i和j：\r\n\r\n  m(i, j) = m(i-1, j-1) + 1 （当A[i] = B[j]时）\r\n\r\n  m(i, j) = max( m(i-1, j), m(i, j-1) ) （当A[i] != B[j]时）\r\n\r\n第一个式子很好证明，即当A[i] = B[j]时。可以用反证，假设m(i, j) &gt; m(i-1, j-1) + 1 （m(i, j)不可能小于m(i-1, j-1) + 1，原因很明显），那么可以推出m(i-1, j-1)不是最长的这一矛盾结果。\r\n\r\n第二个有些trick。当A[i] != B[j]时，还是反证，假设m(i, j) &gt; max( m(i-1, j), m(i, j-1) )。\r\n\r\n由反证假设，可得m(i, j) &gt; m(i-1, j)。这个可以推出A[i]一定在m(i, j)对应的LCS序列中（反证可得）。而由于A[i] != B[j]，故B[j]一定不在m(i, j)对应的LCS序列中。所以可推出m(i, j) = m(i, j-1)。这就推出了与反正假设矛盾的结果。\r\n\r\n得证。</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c75213067862-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c75213067862-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c75213067862-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c75213067862-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c75213067862-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c75213067862-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c75213067862-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c75213067862-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c75213067862-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c75213067862-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c75213067862-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c75213067862-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c75213067862-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c75213067862-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c75213067862-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211c75213067862-1\">假设有两个数组，<span class=\"crayon-i\">A</span>和<span class=\"crayon-i\">B</span>。<span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span>为<span class=\"crayon-i\">A</span>的第<span class=\"crayon-i\">i</span>个元素，<span class=\"crayon-e\">A</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span>为由<span class=\"crayon-i\">A</span>的第一个元素到第<span class=\"crayon-i\">i</span>个元素所组成的前缀。<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span>为<span class=\"crayon-e\">A</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span>和<span class=\"crayon-e\">B</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span>的最长公共子序列长度。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c75213067862-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c75213067862-3\">由于算法本身的递推性质，其实只要证明，对于某个<span class=\"crayon-i\">i</span>和<span class=\"crayon-i\">j</span>：</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c75213067862-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c75213067862-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span>（当<span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span>时）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c75213067862-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c75213067862-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span>（当<span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span>时）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c75213067862-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c75213067862-9\">第一个式子很好证明，即当<span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span>时。可以用反证，假设<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span>（<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span>不可能小于<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span>，原因很明显），那么可以推出<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span>不是最长的这一矛盾结果。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c75213067862-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c75213067862-11\">第二个有些<span class=\"crayon-i\">trick</span>。当<span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span>时，还是反证，假设<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span>。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c75213067862-12\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c75213067862-13\">由反证假设，可得<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span>。这个可以推出<span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span>一定在<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span>对应的<span class=\"crayon-i\">LCS</span>序列中（反证可得）。而由于<span class=\"crayon-v\">A</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span>，故<span class=\"crayon-v\">B</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span>一定不在<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span>对应的<span class=\"crayon-i\">LCS</span>序列中。所以可推出<span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">m</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span>。这就推出了与反正假设矛盾的结果。</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c75213067862-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c75213067862-15\">得证。</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0073 seconds] -->\r\n<p>我们现在用下面的方程来继续填表了。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/6602e29c199a5c6bd66b70e80f355500.png\"><img class=\"alignnone size-full wp-image-93808\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/6602e29c199a5c6bd66b70e80f355500.png\" alt=\"image_1c3vdljfs1g5p1s5lpppcln1s88m\"></a></p>\n<h2>程序实现</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211c89490640804\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//by 司徒正美\r\nfunction LCS(str1, str2){\r\n        var rows =  str1.split(\"\")\r\n        rows.unshift(\"\")\r\n        var cols =  str2.split(\"\")\r\n        cols.unshift(\"\")\r\n        var m = rows.length \r\n        var n = cols.length \r\n        var dp = []\r\n        for(var i = 0; i &lt; m; i++){ \r\n            dp[i] = []\r\n            for(var j = 0; j &lt; n; j++){ \r\n                if(i === 0 || j === 0){\r\n                    dp[i][j] = 0\r\n                    continue\r\n                }\r\n              \r\n                if(rows[i] === cols[j]){ \r\n                    dp[i][j] = dp[i-1][j-1] + 1 //对角＋1\r\n                }else{\r\n                    dp[i][j] = Math.max( dp[i-1][j], dp[i][j-1]) //对左边，上边取最大\r\n                }\r\n            }\r\n            console.log(dp[i].join(\"\"))//调试\r\n        } \r\n        return dp[i-1][j-1]\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211c89490640804-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211c89490640804-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-1\"><span class=\"crayon-c\">//by 司徒正美</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-2\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rows</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">rows</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unshift</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cols</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">cols</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unshift</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rows</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-8\"><span class=\"crayon-e\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cols</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-9\"><span class=\"crayon-e\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-14\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-15\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">continue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-17\"><span class=\"crayon-h\">              </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-18\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rows</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cols</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-19\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//对角＋1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-20\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-21\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//对左边，上边取最大</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-22\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-23\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-c\">//调试</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211c89490640804-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211c89490640804-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0063 seconds] -->\r\n<p>LCS可以进一步简化，只要通过挪位置，省去新数组的生成</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211ca5676067969\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//by司徒正美\r\nfunction LCS(str1, str2){\r\n    var m = str1.length \r\n    var n = str2.length\r\n    var dp = [new Array(n+1).fill(0)] //第一行全是0\r\n    for(var i = 1; i &lt;= m; i++){ //一共有m+1行\r\n        dp[i] = [0] //第一列全是0\r\n        for(var j = 1; j &lt;= n; j++){//一共有n+1列\r\n            if(str1[i-1] === str2[j-1]){ \r\n                //注意这里，str1的第一个字符是在第二列中，因此要减1，str2同理\r\n                dp[i][j] = dp[i-1][j-1] + 1 //对角＋1\r\n            } else {\r\n                 dp[i][j] = Math.max( dp[i-1][j], dp[i][j-1]) \r\n            }\r\n        }\r\n    } \r\n    return dp[m][n];\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211ca5676067969-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211ca5676067969-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-1\"><span class=\"crayon-c\">//by司徒正美</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-2\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-4\"><span class=\"crayon-e\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-5\"><span class=\"crayon-e\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fill</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//第一行全是0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//一共有m+1行</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//第一列全是0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-c\">//一共有n+1列</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-10\"><span class=\"crayon-h\">                </span><span class=\"crayon-c\">//注意这里，str1的第一个字符是在第二列中，因此要减1，str2同理</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-11\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//对角＋1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-13\"><span class=\"crayon-h\">                 </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211ca5676067969-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211ca5676067969-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n<p></p>\n<h2>打印一个LCS</h2>\n<p>我们再给出打印函数，先看如何打印一个。我们从右下角开始寻找，一直找到最上一行终止。因此目标字符串的构建是倒序。为了避免使用stringBuffer这样麻烦的中间量，我们可以通过递归实现，每次执行程序时，只返回一个字符串，没有则返回一个空字符串， 以<code>printLCS(x,y,...) + str[i]</code>相加，就可以得到我们要求的字符串。</p>\n<p>我们再写出一个方法，来验证我们得到的字符串是否真正的LCS字符串。作为一个已经工作的人，不能写的代码像在校生那样，不做单元测试就放到线上让别人踩坑。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211cb1009542570\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//by 司徒正美，打印一个LCS\r\nfunction printLCS(dp, str1, str2, i, j){\r\n    if (i == 0 || j == 0){\r\n        return \"\";\r\n    }\r\n    if( str1[i-1] == str2[j-1] ){\r\n        return printLCS(dp, str1, str2, i-1, j-1) + str1[i-1];\r\n    }else{\r\n        if (dp[i][j-1] &gt; dp[i-1][j]){\r\n            return printLCS(dp, str1, str2, i, j-1);\r\n        }else{\r\n            return printLCS(dp, str1, str2, i-1, j);\r\n        }\r\n    }\r\n}\r\n//by司徒正美， 将目标字符串转换成正则，验证是否为之前两个字符串的LCS\r\nfunction validateLCS(el, str1, str2){\r\n   var re =  new RegExp( el.split(\"\").join(\".*\") )\r\n   console.log(el, re.test(str1),re.test(str2))\r\n   return re.test(str1) &amp;&amp; re.test(str2)\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb1009542570-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb1009542570-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-1\"><span class=\"crayon-c\">//by 司徒正美，打印一个LCS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-2\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">printLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">printLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">printLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">printLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-15\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-16\"><span class=\"crayon-c\">//by司徒正美， 将目标字符串转换成正则，验证是否为之前两个字符串的LCS</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-17\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">validateLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-18\"><span class=\"crayon-h\">   </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">re</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RegExp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\".*\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-19\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">re</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">test</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">re</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">test</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb1009542570-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">re</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">test</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">re</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">test</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb1009542570-21\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0053 seconds] -->\r\n<p>使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211cb9859767762\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction LCS(str1, str2){\r\n    var m = str1.length \r\n    var n = str2.length\r\n    //....略，自行补充\r\n    var s = printLCS(dp, str1, str2, m, n)\r\n    validateLCS(s, str1, str2)\r\n    return dp[m][n]\r\n}\r\nvar c1 = LCS( \"ABCBDAB\",\"BDCABA\");\r\nconsole.log(c1) //4 BCBA、BCAB、BDAB\r\nvar c2 = LCS(\"13456778\" , \"357486782\" );\r\nconsole.log(c2) //5 34678 \r\nvar c3 = LCS(\"ACCGGTCGAGTGCGCGGAAGCCGGCCGAA\" ,\"GTCGTTCGGAATGCCGTTGCTCTGTAAA\" );\r\nconsole.log(c3) //20 GTCGTCGGAAGCCGGCCGAA</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb9859767762-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb9859767762-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb9859767762-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb9859767762-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb9859767762-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb9859767762-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb9859767762-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb9859767762-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb9859767762-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb9859767762-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb9859767762-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb9859767762-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cb9859767762-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cb9859767762-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb9859767762-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb9859767762-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb9859767762-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb9859767762-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//....略，自行补充</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb9859767762-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">printLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb9859767762-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">validateLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb9859767762-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb9859767762-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb9859767762-9\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ABCBDAB\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"BDCABA\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb9859767762-10\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//4 BCBA、BCAB、BDAB</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb9859767762-11\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"13456778\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"357486782\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb9859767762-12\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//5 34678 </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cb9859767762-13\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"ACCGGTCGAGTGCGCGGAAGCCGGCCGAA\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"GTCGTTCGGAATGCCGTTGCTCTGTAAA\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cb9859767762-14\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//20 GTCGTCGGAAGCCGGCCGAA</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/2877d061118026a8a501e2ecf13bb188.png\"><img class=\"alignnone size-full wp-image-93805\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/2877d061118026a8a501e2ecf13bb188.png\" alt=\"image_1c3v0n1qnhq1sqa36min2goi16\"></a></p>\n<h2>打印全部LCS</h2>\n<p>思路与上面差不多，我们注意一下，在LCS方法有一个Math.max取值，这其实是整合了三种情况，因此可以分叉出三个字符串。我们的方法将返回一个es6集合对象，方便自动去掉。然后每次都用新的集合合并旧的集合的字任串。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211cc1395911730\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//by 司徒正美 打印所有LCS\r\nfunction printAllLCS(dp, str1, str2, i, j){\r\n    if (i == 0 || j == 0){\r\n        return new Set([\"\"])\r\n    }else if(str1[i-1] == str2[j-1]){\r\n        var newSet = new Set()\r\n        printAllLCS(dp, str1, str2, i-1, j-1).forEach(function(el){\r\n            newSet.add(el + str1[i-1])\r\n        })\r\n        return newSet\r\n    }else{\r\n        var set = new Set()\r\n        if (dp[i][j-1] &gt;= dp[i-1][j]){\r\n            printAllLCS(dp, str1, str2, i, j-1).forEach(function(el){\r\n              set.add(el)\r\n            })\r\n        }\r\n        if (dp[i-1][j] &gt;= dp[i][j-1]){//必须用&gt;=，不能简单一个else搞定\r\n            printAllLCS(dp, str1, str2, i-1, j).forEach(function(el){\r\n              set.add(el)\r\n            })\r\n        }   \r\n        return set\r\n    } \r\n }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc1395911730-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc1395911730-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-1\"><span class=\"crayon-c\">//by 司徒正美 打印所有LCS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-2\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">printAllLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">printAllLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">newSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">newSet</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">printAllLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-15\"><span class=\"crayon-h\">              </span><span class=\"crayon-v\">set</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-c\">//必须用&gt;=，不能简单一个else搞定</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">printAllLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-20\"><span class=\"crayon-h\">              </span><span class=\"crayon-v\">set</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">set</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc1395911730-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc1395911730-25\"><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0057 seconds] -->\r\n<p>使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211cc9210961799\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction LCS(str1, str2){\r\n    var m = str1.length \r\n    var n = str2.length\r\n    //....略，自行补充\r\n    var s =  printAllLCS(dp, str1, str2, m, n)\r\n    console.log(s)\r\n    s.forEach(function(el){\r\n        validateLCS(el,str1, str2)\r\n        console.log(\"输出LCS\",el)\r\n    })\r\n    return dp[m][n]\r\n}\r\nvar c1 = LCS( \"ABCBDAB\",\"BDCABA\");\r\nconsole.log(c1) //4 BCBA、BCAB、BDAB\r\nvar c2 = LCS(\"13456778\" , \"357486782\" );\r\nconsole.log(c2) //5 34678 \r\nvar c3 = LCS(\"ACCGGTCGAGTGCGCGGAAGCCGGCCGAA\" ,\"GTCGTTCGGAATGCCGTTGCTCTGTAAA\" );\r\nconsole.log(c3) //20 GTCGTCGGAAGCCGGCCGAA</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cc9210961799-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cc9210961799-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">//....略，自行补充</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">printAllLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">validateLCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"输出LCS\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">el</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-12\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-13\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ABCBDAB\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"BDCABA\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-14\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//4 BCBA、BCAB、BDAB</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-15\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"13456778\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"357486782\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-16\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//5 34678 </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cc9210961799-17\"><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"ACCGGTCGAGTGCGCGGAAGCCGGCCGAA\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"GTCGTTCGGAATGCCGTTGCTCTGTAAA\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cc9210961799-18\"><span class=\"crayon-v\">console</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//20 GTCGTCGGAAGCCGGCCGAA</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/41c04c33ec43ac8029de20f954307635.png\"><img class=\"alignnone size-full wp-image-93806\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/41c04c33ec43ac8029de20f954307635.png\" alt=\"image_1c3v1al221m5l1cdlmui48vd831j\"></a></p>\n<h2>空间优化</h2>\n<p>使用滚动数组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211cd1658179700\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">JavaScript</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction LCS(str1, str2){\r\n    var m = str1.length \r\n    var n = str2.length\r\n    var dp = [new Array(n+1).fill(0)],now = 1，row //第一行全是0\r\n    for(var i = 1; i &lt;= m; i++){ //一共有2行\r\n        row = dp[now] = [0] //第一列全是0\r\n        for(var j = 1; j &lt;= n; j++){//一共有n+1列\r\n            if(str1[i-1] === str2[j-1]){ \r\n                //注意这里，str1的第一个字符是在第二列中，因此要减1，str2同理\r\n                dp[now][j] = dp[i-now][j-1] + 1 //对角＋1\r\n            } else {\r\n                dp[now][j] = Math.max( dp[i-now][j], dp[now][j-1]) \r\n            }\r\n        }\r\n        now = 1- now; //1-1=&gt;0;1-0=&gt;1; 1-1=&gt;0 ...\r\n    } \r\n    return row ? row[n]: 0\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cd1658179700-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cd1658179700-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-4\"><span class=\"crayon-e\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Array</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fill</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span>，<span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//第一行全是0</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//一共有2行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//第一列全是0</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-c\">//一共有n+1列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-9\"><span class=\"crayon-h\">                </span><span class=\"crayon-c\">//注意这里，str1的第一个字符是在第二列中，因此要减1，str2同理</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-10\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//对角＋1</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dp</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//1-1=&gt;0;1-0=&gt;1; 1-1=&gt;0 ...</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cd1658179700-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">row</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">row</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cd1658179700-18\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0058 seconds] -->\r\n<p></p>\n<h2>危险的递归解法</h2>\n<p>str1的一个子序列相应于下标序列{1, 2, …, m}的一个子序列，因此，str1共有${2^m}$个不同子序列（str2亦如此，如为${2^n}$），因此复杂度达到惊人的指数时间（${2^m * 2^n}$）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a75cb2211cdb421215379\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n//警告，字符串的长度一大就会爆栈\r\nfunction LCS(str1, str2, a, b) {\r\n      if(a === void 0){\r\n          a = str1.length - 1\r\n      }\r\n      if(b === void 0){\r\n          b = str2.length - 1\r\n      }\r\n      if(a == -1 || b == -1){\r\n          return 0\r\n      } \r\n      if(str1[a] == str2[b]) {\r\n         return LCS(str1, str2,  a-1, b-1)+1;\r\n      }\r\n      if(str1[a] != str2[b]) {\r\n         var x =  LCS(str1, str2, a, b-1)\r\n         var y =  LCS(str1, str2, a-1, b)\r\n         return x &gt;= y ? x : y\r\n      }\r\n  }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a75cb2211cdb421215379-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a75cb2211cdb421215379-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-1\"><span class=\"crayon-c\">//警告，字符串的长度一大就会爆栈</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-2\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-3\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-4\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-5\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-6\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">===</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-7\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-8\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-9\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-10\"><span class=\"crayon-h\">          </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-11\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-12\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-13\"><span class=\"crayon-h\">         </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-14\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-15\"><span class=\"crayon-h\">      </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-16\"><span class=\"crayon-h\">         </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-17\"><span class=\"crayon-h\">         </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">LCS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">str1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-18\"><span class=\"crayon-h\">         </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5a75cb2211cdb421215379-19\"><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a75cb2211cdb421215379-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p></p>\n<h2>参考链接</h2>\n<ol>\n<li><a href=\"http://blog.csdn.net/hrn1216/article/details/51534607\">http://blog.csdn.net/hrn1216/…</a></li>\n<li><a href=\"https://segmentfault.com/a/1190000002641054\">https://segmentfault.com/a/11…</a></li>\n<li><a href=\"https://www.cnblogs.com/ider/p/longest-common-substring-problem-optimization.html\">https://www.cnblogs.com/ider/…</a></li>\n<li><a href=\"http://www.cppblog.com/mysileng/archive/2013/05/14/200265.html\">http://www.cppblog.com/mysile…</a></li>\n</ol>\n\r\n        <script language=\"javascript\"> \r\nvar randomNum = Math.round(Math.random()*1);\r\nvar innerHTML=new Array(2);\r\ninnerHTML[0]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\ninnerHTML[1]=\"如果有人让你推荐前端技术书，请让他看这个列表 ->《<a target='_blank' href='http://web.jobbole.com/86734/'>经典前端技术书籍</a>》\";\r\nvar widgetHTML=\"<div id='single-page-inner-widget'>\"+innerHTML[randomNum]+\"</div>\";\r\ndocument.write(widgetHTML);\r\n</script>\r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"93803\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"93803votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"11\" data-item-id=\"93803\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"}]